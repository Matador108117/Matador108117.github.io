import{a as V,b as Me,c as pf,d as M,e as Y0,f as du,g as J0,h as X0,i as e_,j as gf,k as t_,l as na,m as mf,n as hu,o as n_,p as r_,q as yf,r as Fe,s as si,t as In,u as fu,v as ra,w as i_,x as o_,y as mr,z as Vt}from"./chunk-4ZHOUZTK.js";var wf=null;var vf=1,s_=Symbol("SIGNAL");function Te(n){let e=wf;return wf=n,e}function a_(){return wf}var _f={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wx(n){if(!(Tf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===vf)){if(!n.producerMustRecompute(n)&&!Ef(n)){n.dirty=!1,n.lastCleanEpoch=vf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=vf}}function If(n){return n&&(n.nextProducerIndex=0),Te(n)}function c_(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Tf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Cf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ef(n){bf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Wx(t),r!==t.version))return!0}return!1}function Df(n){if(bf(n),Tf(n))for(let e=0;e<n.producerNode.length;e++)Cf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Cf(n,e){if(Kx(n),n.liveConsumerNode.length===1&&Qx(n))for(let r=0;r<n.producerNode.length;r++)Cf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];bf(i),i.producerIndexOfThis[r]=e}}function Tf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function bf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Kx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Qx(n){return n.producerNode!==void 0}function Zx(){throw new Error}var Yx=Zx;function u_(n){Yx=n}function ne(n){return typeof n=="function"}function so(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pu=so(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ai(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof pu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{l_(o)}catch(s){e=e??[],s instanceof pu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)l_(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ai(t,e)}remove(e){let{_finalizers:t}=this;t&&ai(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var Sf=$e.EMPTY;function gu(n){return n instanceof $e||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function l_(n){ne(n)?n():n.unsubscribe()}var sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ao={setTimeout(n,e,...t){let{delegate:r}=ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function mu(n){ao.setTimeout(()=>{let{onUnhandledError:e}=sn;if(e)e(n);else throw n})}function ia(){}var d_=Af("C",void 0,void 0);function h_(n){return Af("E",void 0,n)}function f_(n){return Af("N",n,void 0)}function Af(n,e,t){return{kind:n,value:e,error:t}}var ci=null;function co(n){if(sn.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ci;if(ci=null,t)throw r}}else n()}function p_(n){sn.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=n)}var ui=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gu(e)&&e.add(this)):this.destination=eM}static create(e,t,r){return new zn(e,t,r)}next(e){this.isStopped?Mf(f_(e),this):this._next(e)}error(e){this.isStopped?Mf(h_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mf(d_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Jx=Function.prototype.bind;function xf(n,e){return Jx.call(n,e)}var Rf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yu(r)}else yu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yu(t)}}},zn=class extends ui{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xf(e.next,o),error:e.error&&xf(e.error,o),complete:e.complete&&xf(e.complete,o)}):i=e}this.destination=new Rf(i)}};function yu(n){sn.useDeprecatedSynchronousErrorHandling?p_(n):mu(n)}function Xx(n){throw n}function Mf(n,e){let{onStoppedNotification:t}=sn;t&&ao.setTimeout(()=>t(n,e))}var eM={closed:!0,next:ia,error:Xx,complete:ia};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function Nf(...n){return Pf(n)}function Pf(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=nM(t)?t:new zn(t,r,i);return co(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=g_(r),new r((i,o)=>{let s=new zn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return Pf(t)(this)}toPromise(t){return t=g_(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function g_(n){var e;return(e=n??sn.Promise)!==null&&e!==void 0?e:Promise}function tM(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function nM(n){return n&&n instanceof ui||tM(n)&&gu(n)}function kf(n){return ne(n?.lift)}function ce(n){return e=>{if(kf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new Of(n,e,t,r,i)}var Of=class extends ui{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lo(){return ce((n,e)=>{let t=null;n._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ho=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,kf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return lo()(this)}};var m_=so(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new m_}next(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Sf:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,ai(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new vu(e,t),n})(),vu=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Sf}};var ut=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var oa={now(){return(oa.delegate||Date).now()},delegate:void 0};var wu=class extends ze{constructor(e=1/0,t=1/0,r=oa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var _u=class extends $e{constructor(e,t){super()}schedule(e,t=0){return this}};var sa={setInterval(n,e,...t){let{delegate:r}=sa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=sa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fo=class extends _u{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return sa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&sa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ai(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var po=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};po.now=oa.now;var go=class extends po{constructor(e,t=po.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var aa=new go(fo);var Iu=class extends fo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Eu=class extends go{};var Ff=new Eu(Iu);var Et=new fe(n=>n.complete());function y_(n){return n&&ne(n.schedule)}function Lf(n){return n[n.length-1]}function v_(n){return ne(Lf(n))?n.pop():void 0}function En(n){return y_(Lf(n))?n.pop():void 0}function w_(n,e){return typeof Lf(n)=="number"?n.pop():e}var Du=n=>n&&typeof n.length=="number"&&typeof n!="function";function Cu(n){return ne(n?.then)}function Tu(n){return ne(n[uo])}function bu(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function Su(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Au=rM();function xu(n){return ne(n?.[Au])}function Mu(n){return J0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield du(t.read());if(i)return yield du(void 0);yield yield du(r)}}finally{t.releaseLock()}})}function Ru(n){return ne(n?.getReader)}function Le(n){if(n instanceof fe)return n;if(n!=null){if(Tu(n))return iM(n);if(Du(n))return oM(n);if(Cu(n))return sM(n);if(bu(n))return __(n);if(xu(n))return aM(n);if(Ru(n))return cM(n)}throw Su(n)}function iM(n){return new fe(e=>{let t=n[uo]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oM(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sM(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mu)})}function aM(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function __(n){return new fe(e=>{uM(n,e).catch(t=>e.error(t))})}function cM(n){return __(Mu(n))}function uM(n,e){var t,r,i,o;return Y0(this,void 0,void 0,function*(){try{for(t=X0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Rt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function zt(n,e=0){return ce((t,r)=>{t.subscribe(le(r,i=>Rt(r,n,()=>r.next(i),e),()=>Rt(r,n,()=>r.complete(),e),i=>Rt(r,n,()=>r.error(i),e)))})}function an(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function I_(n,e){return Le(n).pipe(an(e),zt(e))}function E_(n,e){return Le(n).pipe(an(e),zt(e))}function D_(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function C_(n,e){return new fe(t=>{let r;return Rt(t,e,()=>{r=n[Au](),Rt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function Nu(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{Rt(t,e,()=>{let r=n[Symbol.asyncIterator]();Rt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function T_(n,e){return Nu(Mu(n),e)}function b_(n,e){if(n!=null){if(Tu(n))return I_(n,e);if(Du(n))return D_(n,e);if(Cu(n))return E_(n,e);if(bu(n))return Nu(n,e);if(xu(n))return C_(n,e);if(Ru(n))return T_(n,e)}throw Su(n)}function De(n,e){return e?b_(n,e):Le(n)}function X(...n){let e=En(n);return De(n,e)}function mo(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function Vf(n){return!!n&&(n instanceof fe||ne(n.lift)&&ne(n.subscribe))}var Gn=so(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return ce((t,r)=>{let i=0;t.subscribe(le(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:lM}=Array;function dM(n,e){return lM(e)?n(...e):n(e)}function S_(n){return G(e=>dM(n,e))}var{isArray:hM}=Array,{getPrototypeOf:fM,prototype:pM,keys:gM}=Object;function A_(n){if(n.length===1){let e=n[0];if(hM(e))return{args:e,keys:null};if(mM(e)){let t=gM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mM(n){return n&&typeof n=="object"&&fM(n)===pM}function x_(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ca(...n){let e=En(n),t=v_(n),{args:r,keys:i}=A_(n);if(r.length===0)return De([],e);let o=new fe(yM(r,e,i?s=>x_(i,s):It));return t?o.pipe(S_(t)):o}function yM(n,e,t=It){return r=>{M_(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)M_(e,()=>{let l=De(n[u],e),h=!1;l.subscribe(le(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function M_(n,e,t){n?Rt(t,n,e):e()}function R_(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=R=>l<r?b(R):u.push(R),b=R=>{o&&e.next(R),l++;let N=!1;Le(t(R,h++)).subscribe(le(e,j=>{i?.(j),o?v(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let j=u.shift();s?Rt(e,s,()=>b(j)):b(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(le(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ye(n,e,t=1/0){return ne(e)?Ye((r,i)=>G((o,s)=>e(r,o,i,s))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),ce((r,i)=>R_(r,i,n,t)))}function yr(n=1/0){return Ye(It,n)}function N_(){return yr(1)}function yo(...n){return N_()(De(n,En(n)))}function Pu(n){return new fe(e=>{Le(n()).subscribe(e)})}function Uf(...n){let e=En(n),t=w_(n,1/0),r=n;return r.length?r.length===1?Le(r[0]):yr(t)(De(r,e)):Et}function lt(n,e){return ce((t,r)=>{let i=0;t.subscribe(le(r,o=>n.call(e,o,i++)&&r.next(o)))})}function vr(n){return ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(le(t,void 0,void 0,s=>{o=Le(n(s,vr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function P_(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(le(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function li(n,e){return ne(e)?Ye(n,e,1):Ye(n,1)}function wr(n){return ce((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wn(n){return n<=0?()=>Et:ce((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function jf(n){return G(()=>n)}function Bf(n,e=It){return n=n??vM,ce((t,r)=>{let i,o=!0;t.subscribe(le(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function vM(n,e){return n===e}function ku(n=wM){return ce((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wM(){return new Gn}function ua(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):It,Wn(1),t?wr(e):ku(()=>new Gn))}function vo(n){return n<=0?()=>Et:ce((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $f(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):It,vo(1),t?wr(e):ku(()=>new Gn))}function la(){return ce((n,e)=>{let t,r=!1;n.subscribe(le(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function di(n,e){return ce(P_(n,e,arguments.length>=2,!0))}function k_(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let R=s;v(),R?.unsubscribe()};return ce((R,N)=>{l++,!p&&!h&&m();let j=u=u??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Hf(b,i))}),j.subscribe(N),!s&&l>0&&(s=new zn({next:q=>j.next(q),error:q=>{p=!0,m(),a=Hf(v,t,q),j.error(q)},complete:()=>{h=!0,m(),a=Hf(v,r),j.complete()}}),Le(R).subscribe(s))})(o)}}function Hf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new zn({next:()=>{r.unsubscribe(),n()}});return Le(e(...t)).subscribe(r)}function Ou(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,k_({connector:()=>new wu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function hi(...n){let e=En(n);return ce((t,r)=>{(e?yo(n,t,e):yo(n,t)).subscribe(r)})}function He(n,e){return ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(le(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(n(u,h)).subscribe(i=le(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Fu(n,e){return ne(e)?He(()=>n,e):He(()=>n)}function qf(n){return ce((e,t)=>{Le(n).subscribe(le(t,()=>t.complete(),ia)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var vI="https://g.co/ng/security#xss",Z=class extends Error{constructor(e,t){super(Up(e,t)),this.code=e}};function Up(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Da(n){return{toString:n}.toString()}var Lu="__parameters__";function _M(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function wI(n,e,t){return Da(()=>{let r=_M(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Lu)?u[Lu]:Object.defineProperty(u,Lu,{value:[]})[Lu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ln=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function Ut(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ut).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function O_(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var IM=Ae({__forward_ref__:Ae});function _I(n){return n.__forward_ref__=_I,n.toString=function(){return Ut(this())},n}function Kt(n){return II(n)?n():n}function II(n){return typeof n=="function"&&n.hasOwnProperty(IM)&&n.__forward_ref__===_I}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ml(n){return F_(n,DI)||F_(n,CI)}function EI(n){return ml(n)!==null}function F_(n,e){return n.hasOwnProperty(e)?n[e]:null}function EM(n){let e=n&&(n[DI]||n[CI]);return e||null}function L_(n){return n&&(n.hasOwnProperty(V_)||n.hasOwnProperty(DM))?n[V_]:null}var DI=Ae({\u0275prov:Ae}),V_=Ae({\u0275inj:Ae}),CI=Ae({ngInjectableDef:Ae}),DM=Ae({ngInjectorDef:Ae}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function TI(n){return n&&!!n.\u0275providers}var CM=Ae({\u0275cmp:Ae}),TM=Ae({\u0275dir:Ae}),bM=Ae({\u0275pipe:Ae}),SM=Ae({\u0275mod:Ae}),zu=Ae({\u0275fac:Ae}),ha=Ae({__NG_ELEMENT_ID__:Ae}),U_=Ae({__NG_ENV_ID__:Ae});function pa(n){return typeof n=="string"?n:n==null?"":String(n)}function AM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():pa(n)}function xM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Z(-200,n)}function jp(n,e){throw new Z(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Xf;function bI(){return Xf}function Wt(n){let e=Xf;return Xf=n,e}function SI(n,e,t){let r=ml(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;jp(n,"Injector")}var MM={},ga=MM,ep="__NG_DI_FLAG__",Gu="ngTempTokenPath",RM="ngTokenPath",NM=/\n/gm,PM="\u0275",j_="__source",Do;function kM(){return Do}function _r(n){let e=Do;return Do=n,e}function OM(n,e=ue.Default){if(Do===void 0)throw new Z(-203,!1);return Do===null?SI(n,void 0,e):Do.get(n,e&ue.Optional?null:void 0,e)}function O(n,e=ue.Default){return(bI()||OM)(Kt(n),e)}function U(n,e=ue.Default){return O(n,yl(e))}function yl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function tp(n){let e=[];for(let t=0;t<n.length;t++){let r=Kt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=FM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function AI(n,e){return n[ep]=e,n.prototype[ep]=e,n}function FM(n){return n[ep]}function LM(n,e,t,r){let i=n[Gu];throw e[j_]&&i.unshift(e[j_]),n.message=VM(`
`+n.message,i,t,r),n[RM]=i,n[Gu]=null,n}function VM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==PM?n.slice(2):n;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(NM,`
  `)}`}var wi=AI(wI("Optional"),8);var vl=AI(wI("SkipSelf"),4);function To(n,e){let t=n.hasOwnProperty(zu);return t?n[zu]:null}function Bp(n,e){n.forEach(t=>Array.isArray(t)?Bp(t,e):e(t))}function xI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var ma={},Dn=[],bo=new W(""),MI=new W("",-1),RI=new W(""),Ku=class{get(e,t=ga){if(t===ga){let r=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw r.name="NullInjectorError",r}return t}},NI=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(NI||{}),Tn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Tn||{}),Cr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Cr||{});function UM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function np(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];BM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function jM(n){return n===3||n===4||n===6}function BM(n){return n.charCodeAt(0)===64}function $p(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?B_(n,t,i,null,e[++r]):B_(n,t,i,null,null))}}return n}function B_(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var PI="ng-template";function $M(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&UM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Hp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Hp(n){return n.type===4&&n.value!==PI}function HM(n,e,t){let r=n.type===4&&!t?PI:n.value;return e===r}function qM(n,e,t){let r=4,i=n.attrs,o=i!==null?WM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!cn(r)&&!cn(u))return!1;if(s&&cn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!HM(n,u,t)||u===""&&e.length===1){if(cn(r))return!1;s=!0}}else if(r&8){if(i===null||!$M(n,i,u,t)){if(cn(r))return!1;s=!0}}else{let l=e[++a],h=zM(u,i,Hp(n),t);if(h===-1){if(cn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(cn(r))return!1;s=!0}}}}return cn(r)||s}function cn(n){return(n&1)===0}function zM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return KM(e,n)}function GM(n,e,t=!1){for(let r=0;r<e.length;r++)if(qM(n,e[r],t))return!0;return!1}function WM(n){for(let e=0;e<n.length;e++){let t=n[e];if(jM(t))return e}return n.length}function KM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function $_(n,e){return n?":not("+e.trim()+")":e}function QM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!cn(s)&&(e+=$_(o,i),i=""),r=s,o=o||!cn(r);t++}return i!==""&&(e+=$_(o,i)),e}function ZM(n){return n.map(QM).join(",")}function YM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!cn(i))break;i=o}r++}return{attrs:e,classes:t}}function ot(n){return Da(()=>{let e=VI(n),t=Me(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===NI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Tn.Emulated,styles:n.styles||Dn,_:null,schemas:n.schemas||null,tView:null,id:""});UI(t);let r=n.dependencies;return t.directiveDefs=q_(r,!1),t.pipeDefs=q_(r,!0),t.id=eR(t),t})}function JM(n){return Tr(n)||kI(n)}function XM(n){return n!==null}function St(n){return Da(()=>({type:n.type,bootstrap:n.bootstrap||Dn,declarations:n.declarations||Dn,imports:n.imports||Dn,exports:n.exports||Dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function H_(n,e){if(n==null)return ma;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Cr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Cr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ca(n){return Da(()=>{let e=VI(n);return UI(e),e})}function Tr(n){return n[CM]||null}function kI(n){return n[TM]||null}function OI(n){return n[bM]||null}function FI(n){let e=Tr(n)||kI(n)||OI(n);return e!==null?e.standalone:!1}function LI(n,e){let t=n[SM]||null;if(!t&&e===!0)throw new Error(`Type ${Ut(n)} does not have '\u0275mod' property.`);return t}function VI(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ma,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:H_(n.inputs,e),outputs:H_(n.outputs),debugInfo:null}}function UI(n){n.features?.forEach(e=>e(n))}function q_(n,e){if(!n)return null;let t=e?OI:JM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(XM)}function eR(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function tR(...n){return{\u0275providers:jI(!0,n),\u0275fromNgModule:!0}}function jI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Bp(e,s=>{let a=s;rp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BI(i,o),t}function BI(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qp(i,o=>{e(o,r)})}}function rp(n,e,t,r){if(n=Kt(n),!n)return!1;let i=null,o=L_(n),s=!o&&Tr(n);if(!o&&!s){let u=n.ngModule;if(o=L_(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)rp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Bp(o.imports,h=>{rp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&BI(l,e)}if(!a){let l=To(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dn},i),e({provide:RI,useValue:i,multi:!0},i),e({provide:bo,useValue:()=>O(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;qp(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function qp(n,e){for(let t of n)TI(t)&&(t=t.\u0275providers),Array.isArray(t)?qp(t,e):e(t)}var nR=Ae({provide:String,useValue:Ae});function $I(n){return n!==null&&typeof n=="object"&&nR in n}function rR(n){return!!(n&&n.useExisting)}function iR(n){return!!(n&&n.useFactory)}function ip(n){return typeof n=="function"}var wl=new W(""),Bu={},oR={},zf;function zp(){return zf===void 0&&(zf=new Ku),zf}var jt=class{},ya=class extends jt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sp(e,s=>this.processProvider(s)),this.records.set(MI,wo(void 0,this)),i.has("environment")&&this.records.set(jt,wo(void 0,this));let o=this.records.get(wl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(RI,Dn,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=_r(this),r=Wt(void 0),i;try{return e()}finally{_r(t),Wt(r)}}get(e,t=ga,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(U_))return e[U_](this);r=yl(r);let i,o=_r(this),s=Wt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=dR(e)&&ml(e);l&&this.injectableDefInScope(l)?u=wo(op(e),Bu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?zp():this.parent;return t=r&ue.Optional&&t===ga?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Gu]=a[Gu]||[]).unshift(Ut(e)),o)throw a;return LM(a,e,"R3InjectorError",this.source)}else throw a}finally{Wt(s),_r(o)}}resolveInjectorInitializers(){let e=Te(null),t=_r(this),r=Wt(void 0),i;try{let o=this.get(bo,Dn,ue.Self);for(let s of o)s()}finally{_r(t),Wt(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){e=Kt(e);let t=ip(e)?e:Kt(e&&e.provide),r=aR(e);if(!ip(e)&&e.multi===!0){let i=this.records.get(t);i||(i=wo(void 0,Bu,!0),i.factory=()=>tp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===Bu&&(t.value=oR,t.value=t.factory()),typeof t.value=="object"&&t.value&&lR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Kt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function op(n){let e=ml(n),t=e!==null?e.factory:To(n);if(t!==null)return t;if(n instanceof W)throw new Z(204,!1);if(n instanceof Function)return sR(n);throw new Z(204,!1)}function sR(n){if(n.length>0)throw new Z(204,!1);let t=EM(n);return t!==null?()=>t.factory(n):()=>new n}function aR(n){if($I(n))return wo(void 0,n.useValue);{let e=cR(n);return wo(e,Bu)}}function cR(n,e,t){let r;if(ip(n)){let i=Kt(n);return To(i)||op(i)}else if($I(n))r=()=>Kt(n.useValue);else if(iR(n))r=()=>n.useFactory(...tp(n.deps||[]));else if(rR(n))r=()=>O(Kt(n.useExisting));else{let i=Kt(n&&(n.useClass||n.provide));if(uR(n))r=()=>new i(...tp(n.deps));else return To(i)||op(i)}return r}function wo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uR(n){return!!n.deps}function lR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dR(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function sp(n,e){for(let t of n)Array.isArray(t)?sp(t,e):t&&TI(t)?sp(t.\u0275providers,e):e(t)}function An(n,e){n instanceof ya&&n.assertNotDestroyed();let t,r=_r(n),i=Wt(void 0);try{return e()}finally{_r(r),Wt(i)}}function HI(){return bI()!==void 0||kM()!=null}function hR(n){if(!HI())throw new Z(-203,!1)}function fR(n){let e=ln.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function pR(n){return typeof n=="function"}var Zn=0,pe=1,re=2,Ct=3,un=4,dn=5,Qu=6,z_=7,br=8,So=9,bn=10,Tt=11,va=12,G_=13,Ta=14,Sn=15,Ao=16,_o=17,xo=18,_l=19,qI=20,Er=21,Gf=22,Qt=23,Sr=25,zI=1;var pi=7,Zu=8,Yu=9,Zt=10,Ju=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ju||{});function Dr(n){return Array.isArray(n)&&typeof n[zI]=="object"}function Yn(n){return Array.isArray(n)&&n[zI]===!0}function GI(n){return(n.flags&4)!==0}function Il(n){return n.componentOffset>-1}function WI(n){return(n.flags&1)===1}function ba(n){return!!n.template}function ap(n){return(n[re]&512)!==0}var cp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function KI(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function El(){return QI}function QI(n){return n.type.prototype.ngOnChanges&&(n.setInput=mR),gR}El.ngInherit=!0;function gR(){let n=YI(this),e=n?.current;if(e){let t=n.previous;if(t===ma)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function mR(n,e,t,r,i){let o=this.declaredInputs[r],s=YI(n)||yR(n,{previous:ma,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new cp(l&&l.currentValue,t,u===ma),KI(n,e,i,t)}var ZI="__ngSimpleChanges__";function YI(n){return n[ZI]||null}function yR(n,e){return n[ZI]=e}var W_=null;var Ir=function(n,e,t){W_?.(n,e,t)},vR="svg",wR="math";function Kn(n){for(;Array.isArray(n);)n=n[Zn];return n}function _R(n,e){return Kn(e[n])}function xn(n,e){return Kn(e[n.index])}function JI(n,e){return n.data[e]}function _i(n,e){let t=e[n];return Dr(t)?t:t[Zn]}function Gp(n){return(n[re]&128)===128}function IR(n){return Yn(n[Ct])}function Xu(n,e){return e==null?null:n[e]}function XI(n){n[_o]=0}function eE(n){n[re]&1024||(n[re]|=1024,Gp(n)&&Cl(n))}function Dl(n){return!!(n[re]&9216||n[Qt]?.dirty)}function up(n){n[bn].changeDetectionScheduler?.notify(8),n[re]&64&&(n[re]|=1024),Dl(n)&&Cl(n)}function Cl(n){n[bn].changeDetectionScheduler?.notify(0);let e=gi(n);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!Gp(e)));)e=gi(e)}function tE(n,e){if((n[re]&256)===256)throw new Z(911,!1);n[Er]===null&&(n[Er]=[]),n[Er].push(e)}function ER(n,e){if(n[Er]===null)return;let t=n[Er].indexOf(e);t!==-1&&n[Er].splice(t,1)}function gi(n){let e=n[Ct];return Yn(e)?e[Ct]:e}var we={lFrame:dE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var nE=!1;function DR(){return we.lFrame.elementDepthCount}function CR(){we.lFrame.elementDepthCount++}function TR(){we.lFrame.elementDepthCount--}function rE(){return we.bindingsEnabled}function bR(){return we.skipHydrationRootTNode!==null}function SR(n){return we.skipHydrationRootTNode===n}function AR(){we.skipHydrationRootTNode=null}function Ge(){return we.lFrame.lView}function Ii(){return we.lFrame.tView}function hn(){let n=iE();for(;n!==null&&n.type===64;)n=n.parent;return n}function iE(){return we.lFrame.currentTNode}function xR(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Sa(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function oE(){return we.lFrame.isParent}function MR(){we.lFrame.isParent=!1}function sE(){return nE}function K_(n){nE=n}function RR(){let n=we.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function NR(){return we.lFrame.bindingIndex}function PR(n){return we.lFrame.bindingIndex=n}function aE(){return we.lFrame.bindingIndex++}function kR(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function OR(){return we.lFrame.inI18n}function FR(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,lp(e)}function LR(){return we.lFrame.currentDirectiveIndex}function lp(n){we.lFrame.currentDirectiveIndex=n}function cE(n){we.lFrame.currentQueryIndex=n}function VR(n){let e=n[pe];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function uE(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=VR(o),i===null||(o=o[Ta],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=we.lFrame=lE();return r.currentTNode=e,r.lView=n,!0}function Wp(n){let e=lE(),t=n[pe];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function lE(){let n=we.lFrame,e=n===null?null:n.child;return e===null?dE(n):e}function dE(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function hE(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var fE=hE;function Kp(){let n=hE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Tl(){return we.lFrame.selectedIndex}function mi(n){we.lFrame.selectedIndex=n}function pE(){let n=we.lFrame;return JI(n.tView,n.selectedIndex)}function UR(){return we.lFrame.currentNamespace}var gE=!0;function Qp(){return gE}function Zp(n){gE=n}function jR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=QI(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Yp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function $u(n,e,t){mE(n,e,3,t)}function Hu(n,e,t,r){(n[re]&3)===t&&mE(n,e,t,r)}function Wf(n,e){let t=n[re];(t&3)===e&&(t&=16383,t+=1,n[re]=t)}function mE(n,e,t,r){let i=r!==void 0?n[_o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[_o]+=65536),(a<o||o==-1)&&(BR(n,t,e,u),n[_o]=(n[_o]&4294901760)+u+2),u++}function Q_(n,e){Ir(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),Ir(5,n,e)}}function BR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[re]>>14<n[_o]>>16&&(n[re]&3)===e&&(n[re]+=16384,Q_(a,o)):Q_(a,o)}var Co=-1,wa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function $R(n){return n instanceof wa}function HR(n){return(n.flags&8)!==0}function qR(n){return(n.flags&16)!==0}var Kf={},dp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=yl(r);let i=this.injector.get(e,Kf,r);return i!==Kf||t===Kf?i:this.parentInjector.get(e,t,r)}};function yE(n){return n!==Co}function el(n){return n&32767}function zR(n){return n>>16}function tl(n,e){let t=zR(n),r=e;for(;t>0;)r=r[Ta],t--;return r}var hp=!0;function Z_(n){let e=hp;return hp=n,e}var GR=256,vE=GR-1,wE=5,WR=0,Cn={};function KR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ha)&&(r=t[ha]),r==null&&(r=t[ha]=WR++);let i=r&vE,o=1<<i;e.data[n+(i>>wE)]|=o}function _E(n,e){let t=IE(n,e);if(t!==-1)return t;let r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,Qf(r.data,n),Qf(e,null),Qf(r.blueprint,null));let i=Jp(n,e),o=n.injectorIndex;if(yE(i)){let s=el(i),a=tl(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Qf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function IE(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Jp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=bE(i),r===null)return Co;if(t++,i=i[Ta],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function QR(n,e,t){KR(n,e,t)}function EE(n,e,t){if(t&ue.Optional||n!==void 0)return n;jp(e,"NodeInjector")}function DE(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[So],o=Wt(void 0);try{return i?i.get(e,r,t&ue.Optional):SI(e,r,t&ue.Optional)}finally{Wt(o)}}return EE(r,e,t)}function CE(n,e,t,r=ue.Default,i){if(n!==null){if(e[re]&2048&&!(r&ue.Self)){let s=eN(n,e,t,r,Cn);if(s!==Cn)return s}let o=TE(n,e,t,r,Cn);if(o!==Cn)return o}return DE(e,t,r,i)}function TE(n,e,t,r,i){let o=JR(t);if(typeof o=="function"){if(!uE(e,n,r))return r&ue.Host?EE(i,t,r):DE(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))jp(t);else return s}finally{fE()}}else if(typeof o=="number"){let s=null,a=IE(n,e),u=Co,l=r&ue.Host?e[Sn][dn]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?Jp(n,e):e[a+8],u===Co||!J_(r,!1)?a=-1:(s=e[pe],a=el(u),e=tl(u,e)));a!==-1;){let h=e[pe];if(Y_(o,a,h.data)){let p=ZR(a,e,t,s,r,l);if(p!==Cn)return p}u=e[a+8],u!==Co&&J_(r,e[pe].data[a+8]===l)&&Y_(o,a,e)?(s=h,a=el(u),e=tl(u,e)):a=-1}}return i}function ZR(n,e,t,r,i,o){let s=e[pe],a=s.data[n+8],u=r==null?Il(a)&&hp:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=YR(a,s,t,u,l);return h!==null?_a(e,s,h,a):Cn}function YR(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<u&&t===b||v>=u&&b.type===t)return v}if(i){let v=s[u];if(v&&ba(v)&&v.type===t)return u}return null}function _a(n,e,t,r){let i=n[t],o=e.data;if($R(i)){let s=i;s.resolving&&xM(AM(o[t]));let a=Z_(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Wt(s.injectImpl):null,h=uE(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&jR(t,o[t],e)}finally{l!==null&&Wt(l),Z_(a),s.resolving=!1,fE()}}return i}function JR(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ha)?n[ha]:void 0;return typeof e=="number"?e>=0?e&vE:XR:e}function Y_(n,e,t){let r=1<<n;return!!(t[e+(n>>wE)]&r)}function J_(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var fi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return CE(this._tNode,this._lView,e,yl(r),t)}};function XR(){return new fi(hn(),Ge())}function Xp(n){return Da(()=>{let e=n.prototype.constructor,t=e[zu]||fp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[zu]||fp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function fp(n){return II(n)?()=>{let e=fp(Kt(n));return e&&e()}:To(n)}function eN(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!(s[re]&512);){let a=TE(o,s,t,r|ue.Self,Cn);if(a!==Cn)return a;let u=o.parent;if(!u){let l=s[qI];if(l){let h=l.get(t,Cn,r);if(h!==Cn)return h}u=bE(s),s=s[Ta]}o=u}return i}function bE(n){let e=n[pe],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function X_(n,e=null,t=null,r){let i=SE(n,e,t,r);return i.resolveInjectorInitializers(),i}function SE(n,e=null,t=null,r,i=new Set){let o=[t||Dn,tR(n)];return r=r||(typeof n=="object"?void 0:Ut(n)),new ya(o,e||zp(),r||null,i)}var Yt=class n{static{this.THROW_IF_NOT_FOUND=ga}static{this.NULL=new Ku}static create(e,t){if(Array.isArray(e))return X_({name:""},t,e,"");{let r=e.name??"";return X_({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(MI)})}static{this.__NG_ELEMENT_ID__=-1}};var tN=new W("");tN.__NG_ELEMENT_ID__=n=>{let e=hn();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new Z(204,!1)};var nN="ngOriginalError";function Zf(n){return n[nN]}var AE=!0,eg=(()=>{class n{static{this.__NG_ELEMENT_ID__=rN}static{this.__NG_ENV_ID__=t=>t}}return n})(),pp=class extends eg{constructor(e){super(),this._lView=e}onDestroy(e){return tE(this._lView,e),()=>ER(this._lView,e)}};function rN(){return new pp(Ge())}var ko=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var gp=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,HI()&&(this.destroyRef=U(eg,{optional:!0})??void 0,this.pendingTasks=U(ko,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Dt=gp;function nl(...n){}function xE(n){let e,t;function r(){n=nl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function eI(n){return queueMicrotask(()=>n()),()=>{n=nl}}var tg="isAngularZone",rl=tg+"_ID",iN=0,ge=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=AE}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,aN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,oN,nl,nl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},oN={};function ng(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){xE(()=>{n.callbackScheduled=!1,mp(n),n.isCheckStableRunning=!0,ng(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),mp(n)}function aN(n){let e=()=>{sN(n)},t=iN++;n._inner=n._inner.fork({name:"angular",properties:{[tg]:!0,[rl]:t,[rl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(cN(u))return r.invokeTask(o,s,a,u);try{return tI(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),nI(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return tI(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uN(u)&&e(),nI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,mp(n),ng(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function mp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function tI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function nI(n){n._nesting--,ng(n)}var il=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dt,this.onMicrotaskEmpty=new Dt,this.onStable=new Dt,this.onError=new Dt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function cN(n){return ME(n,"__ignore_ng_zone__")}function uN(n){return ME(n,"__scheduler_tick__")}function ME(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function lN(n="zone.js",e){return n==="noop"?new il:n==="zone.js"?new ge(e):n}var Qn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Zf(e);for(;t&&Zf(t);)t=Zf(t);return t||null}},dN=new W("",{providedIn:"root",factory:()=>{let n=U(ge),e=U(Qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function hN(){return bl(hn(),Ge())}function bl(n,e){return new Aa(xn(n,e))}var Aa=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=hN}}return n})();function RE(n){return(n.flags&128)===128}var NE=new Map,fN=0;function pN(){return fN++}function gN(n){NE.set(n[_l],n)}function yp(n){NE.delete(n[_l])}var rI="__ngContext__";function yi(n,e){Dr(e)?(n[rI]=e[_l],gN(e)):n[rI]=e}function PE(n){return OE(n[va])}function kE(n){return OE(n[un])}function OE(n){for(;n!==null&&!Yn(n);)n=n[un];return n}var vp;function FE(n){vp=n}function mN(){if(vp!==void 0)return vp;if(typeof document<"u")return document;throw new Z(210,!1)}var Sl=new W("",{providedIn:"root",factory:()=>yN}),yN="ng",rg=new W(""),Nt=new W("",{providedIn:"platform",factory:()=>"unknown"});var ig=new W("",{providedIn:"root",factory:()=>mN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vN="h",wN="b";var _N=()=>null;function og(n,e,t=!1){return _N(n,e,t)}var LE=!1,IN=new W("",{providedIn:"root",factory:()=>LE});var Vu;function EN(){if(Vu===void 0&&(Vu=null,ln.trustedTypes))try{Vu=ln.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vu}function DN(n){return EN()?.createScriptURL(n)||n}var ol=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vI})`}};function sg(n){return n instanceof ol?n.changingThisBreaksApplicationSecurity:n}function VE(n,e){let t=CN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${vI})`)}return t===e}function CN(n){return n instanceof ol&&n.getTypeName()||null}var TN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function UE(n){return n=String(n),n.match(TN)?n:"unsafe:"+n}var ag=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ag||{});function jE(n){let e=bN();return e?e.sanitize(ag.URL,n)||"":VE(n,"URL")?sg(n):UE(pa(n))}function Al(n){return DN(n[0])}function bN(){let n=Ge();return n&&n[bn].sanitizer}function BE(n){return n instanceof Function?n():n}function SN(n){return(n??U(Yt)).get(Nt)==="browser"}var Mr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Mr||{}),AN;function cg(n,e){return AN(n,e)}function Io(n,e,t,r,i){if(r!=null){let o,s=!1;Yn(r)?o=r:Dr(r)&&(s=!0,r=r[Zn]);let a=Kn(r);n===0&&t!==null?i==null?GE(e,t,a):sl(e,t,a,i||null,!0):n===1&&t!==null?sl(e,t,a,i||null,!0):n===2?HN(e,a,s):n===3&&e.destroyNode(a),o!=null&&zN(e,n,o,t,i)}}function xN(n,e){return n.createText(e)}function MN(n,e,t){n.setValue(e,t)}function $E(n,e,t){return n.createElement(e,t)}function RN(n,e){HE(n,e),e[Zn]=null,e[dn]=null}function NN(n,e,t,r,i,o){r[Zn]=i,r[dn]=e,xl(n,r,t,1,i,o)}function HE(n,e){e[bn].changeDetectionScheduler?.notify(9),xl(n,e,e[Tt],2,null,null)}function PN(n){let e=n[va];if(!e)return Yf(n[pe],n);for(;e;){let t=null;if(Dr(e))t=e[va];else{let r=e[Zt];r&&(t=r)}if(!t){for(;e&&!e[un]&&e!==n;)Dr(e)&&Yf(e[pe],e),e=e[Ct];e===null&&(e=n),Dr(e)&&Yf(e[pe],e),t=e&&e[un]}e=t}}function kN(n,e,t,r){let i=Zt+r,o=t.length;r>0&&(t[i-1][un]=e),r<o-Zt?(e[un]=t[i],xI(t,Zt+r,e)):(t.push(e),e[un]=null),e[Ct]=t;let s=e[Ao];s!==null&&t!==s&&qE(s,e);let a=e[xo];a!==null&&a.insertView(n),up(e),e[re]|=128}function qE(n,e){let t=n[Yu],r=e[Ct];if(Dr(r))n[re]|=Ju.HasTransplantedViews;else{let i=r[Ct][Sn];e[Sn]!==i&&(n[re]|=Ju.HasTransplantedViews)}t===null?n[Yu]=[e]:t.push(e)}function ug(n,e){let t=n[Yu],r=t.indexOf(e);t.splice(r,1)}function wp(n,e){if(n.length<=Zt)return;let t=Zt+e,r=n[t];if(r){let i=r[Ao];i!==null&&i!==n&&ug(i,r),e>0&&(n[t-1][un]=r[un]);let o=Wu(n,Zt+e);RN(r[pe],r);let s=o[xo];s!==null&&s.detachView(o[pe]),r[Ct]=null,r[un]=null,r[re]&=-129}return r}function zE(n,e){if(!(e[re]&256)){let t=e[Tt];t.destroyNode&&xl(n,e,t,3,null,null),PN(e)}}function Yf(n,e){if(e[re]&256)return;let t=Te(null);try{e[re]&=-129,e[re]|=256,e[Qt]&&Df(e[Qt]),FN(n,e),ON(n,e),e[pe].type===1&&e[Tt].destroy();let r=e[Ao];if(r!==null&&Yn(e[Ct])){r!==e[Ct]&&ug(r,e);let i=e[xo];i!==null&&i.detachView(n)}yp(e)}finally{Te(t)}}function ON(n,e){let t=n.cleanup,r=e[z_];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[z_]=null);let i=e[Er];if(i!==null){e[Er]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function FN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof wa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ir(4,a,u);try{u.call(a)}finally{Ir(5,a,u)}}else{Ir(4,i,o);try{o.call(i)}finally{Ir(5,i,o)}}}}}function LN(n,e,t){return VN(n,e.parent,t)}function VN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Zn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Tn.None||o===Tn.Emulated)return null}return xn(r,t)}}function sl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function GE(n,e,t){n.appendChild(e,t)}function iI(n,e,t,r,i){r!==null?sl(n,e,t,r,i):GE(n,e,t)}function WE(n,e){return n.parentNode(e)}function UN(n,e){return n.nextSibling(e)}function jN(n,e,t){return $N(n,e,t)}function BN(n,e,t){return n.type&40?xn(n,t):null}var $N=BN,oI;function lg(n,e,t,r){let i=LN(n,r,e),o=e[Tt],s=r.parent||e[dn],a=jN(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)iI(o,i,t[u],a,!1);else iI(o,i,t,a,!1);oI!==void 0&&oI(o,r,e,t,i)}function da(n,e){if(e!==null){let t=e.type;if(t&3)return xn(e,n);if(t&4)return _p(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return da(n,r);{let i=n[e.index];return Yn(i)?_p(-1,i):Kn(i)}}else{if(t&128)return da(n,e.next);if(t&32)return cg(e,n)()||Kn(n[e.index]);{let r=KE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(n[Sn]);return da(i,r)}else return da(n,e.next)}}}return null}function KE(n,e){if(e!==null){let r=n[Sn][dn],i=e.projection;return r.projection[i]}return null}function _p(n,e){let t=Zt+n+1;if(t<e.length){let r=e[t],i=r[pe].firstChild;if(i!==null)return da(r,i)}return e[pi]}function HN(n,e,t){n.removeChild(null,e,t)}function dg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&yi(Kn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)dg(n,e,t.child,r,i,o,!1),Io(e,n,i,a,o);else if(u&32){let l=cg(t,r),h;for(;h=l();)Io(e,n,i,h,o);Io(e,n,i,a,o)}else u&16?qN(n,e,r,t,i,o):Io(e,n,i,a,o);t=s?t.projectionNext:t.next}}function xl(n,e,t,r,i,o){dg(t,r,n.firstChild,e,i,o,!1)}function qN(n,e,t,r,i,o){let s=t[Sn],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Io(e,n,i,h,o)}else{let l=u,h=s[Ct];RE(r)&&(l.flags|=128),dg(n,e,l,h,i,o,!0)}}function zN(n,e,t,r,i){let o=t[pi],s=Kn(t);o!==s&&Io(e,n,r,o,i);for(let a=Zt;a<t.length;a++){let u=t[a];xl(u[pe],u,n,e,r,o)}}function GN(n,e,t){n.setAttribute(e,"style",t)}function QE(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ZE(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&np(n,e,r),i!==null&&QE(n,e,i),o!==null&&GN(n,e,o)}var Rr={};function me(n=1){YE(Ii(),Ge(),Tl()+n,!1)}function YE(n,e,t,r){if(!r)if((e[re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&$u(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Hu(e,o,0,t)}mi(t)}function Ve(n,e=ue.Default){let t=Ge();if(t===null)return O(n,e);let r=hn();return CE(r,t,Kt(n),e)}function JE(){let n="invalid";throw new Error(n)}function XE(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&Cr.SignalBased&&(a=e[r][s_]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Cr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):KI(e,a,r,o)}finally{Te(s)}}function WN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mi(~i);else{let o=i,s=t[++r],a=t[++r];FR(s,o);let u=e[o];a(2,u)}}}finally{mi(-1)}}function Ml(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Zn]=i,p[re]=r|4|128|8|64,(l!==null||n&&n[re]&2048)&&(p[re]|=2048),XI(p),p[Ct]=p[Ta]=n,p[br]=t,p[bn]=s||n&&n[bn],p[Tt]=a||n&&n[Tt],p[So]=u||n&&n[So]||null,p[dn]=o,p[_l]=pN(),p[Qu]=h,p[qI]=l,p[Sn]=e.type==2?n[Sn]:p,p}function Rl(n,e,t,r,i){let o=n.data[e];if(o===null)o=KN(n,e,t,r,i),OR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=xR();o.injectorIndex=s===null?-1:s.injectorIndex}return Sa(o,!0),o}function KN(n,e,t,r,i){let o=iE(),s=oE(),a=s?o:o&&o.parent,u=n.data[e]=XN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function eD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function tD(n,e,t,r,i){let o=Tl(),s=r&2;try{mi(-1),s&&e.length>Sr&&YE(n,e,Sr,!1),Ir(s?2:0,i),t(r,i)}finally{mi(o),Ir(s?3:1,i)}}function nD(n,e,t){if(GI(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Te(r)}}}function rD(n,e,t){rE()&&(o1(n,e,t,xn(t,e)),(t.flags&64)===64&&uD(n,e,t))}function iD(n,e,t=xn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function oD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=hg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hg(n,e,t,r,i,o,s,a,u,l,h){let p=Sr+r,m=p+i,v=QN(p,m),b=typeof l=="function"?l():l;return v[pe]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function QN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Rr);return t}function ZN(n,e,t,r){let o=r.get(IN,LE)||t===Tn.ShadowDom,s=n.selectRootElement(e,o);return YN(s),s}function YN(n){JN(n)}var JN=()=>null;function XN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return bR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function sI(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Cr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?aI(r,t,l,a,u):aI(r,t,l,a)}return r}function aI(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function e1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;u=sI(0,p.inputs,h,u,v),l=sI(1,p.outputs,h,l,b);let R=u!==null&&s!==null&&!Hp(e)?p1(u,h,s):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function t1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function sD(n,e,t,r,i,o,s,a){let u=xn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(fg(n,t,h,r,i),Il(e)&&n1(t,e.index)):e.type&3?(r=t1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function n1(n,e){let t=_i(e,n);t[re]&16||(t[re]|=64)}function aD(n,e,t,r){if(rE()){let i=r===null?null:{"":-1},o=a1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&cD(n,e,t,s,i,a),i&&c1(t,r,i)}t.mergedAttrs=$p(t.mergedAttrs,t.attrs)}function cD(n,e,t,r,i,o){for(let l=0;l<r.length;l++)QR(_E(t,e),n,r[l].type);l1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=eD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=$p(t.mergedAttrs,h.hostAttrs),d1(n,t,e,u,h),u1(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}e1(n,t,o)}function r1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;i1(s)!=a&&s.push(a),s.push(t,r,o)}}function i1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function o1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Il(t)&&h1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||_E(t,e),yi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=_a(e,n,a,t);if(yi(l,e),s!==null&&f1(e,a-i,l,u,t,s),ba(u)){let h=_i(t.index,e);h[br]=_a(e,n,a,t)}}}function uD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=LR();try{mi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];lp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&s1(u,l)}}finally{mi(-1),lp(s)}}function s1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function a1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(GM(e,s.selectors,!1))if(r||(r=[]),ba(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Ip(n,e,u)}else r.unshift(s),Ip(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ip(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function c1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}}function u1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ba(e)&&(t[""]=n)}}function l1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function d1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=To(i.type,!0)),s=new wa(o,ba(i),Ve);n.blueprint[r]=s,t[r]=s,r1(n,e,r,eD(n,t,i.hostVars,Rr),i)}function h1(n,e,t){let r=xn(e,n),i=oD(t),o=n[bn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Nl(n,Ml(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function f1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];XE(r,t,u,l,h,p)}}function p1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function lD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function dD(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];cE(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Nl(n,e){return n[va]?n[G_][un]=e:n[va]=e,n[G_]=e,e}function Ep(n,e,t){cE(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function g1(n,e){let t=n[So],r=t?t.get(Qn,null):null;r&&r.handleError(e)}function fg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];XE(h,l,r,a,u,i)}}function hD(n,e,t){let r=_R(e,n);MN(n[Tt],r,t)}function m1(n,e){let t=_i(e,n),r=t[pe];y1(r,t);let i=t[Zn];i!==null&&t[Qu]===null&&(t[Qu]=og(i,t[So])),pg(r,t,t[br])}function y1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pg(n,e,t){Wp(e);try{let r=n.viewQuery;r!==null&&Ep(1,r,t);let i=n.template;i!==null&&tD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xo]?.finishViewCreation(n),n.staticContentQueries&&dD(n,e),n.staticViewQueries&&Ep(2,n.viewQuery,t);let o=n.components;o!==null&&v1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[re]&=-5,Kp()}}function v1(n,e){for(let t=0;t<e.length;t++)m1(n,e[t])}function w1(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[re]&4096?4096:16,u=Ml(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ao]=l;let h=n[xo];return h!==null&&(u[xo]=h.createEmbeddedView(o)),pg(o,u,t),u}finally{Te(i)}}function cI(n,e){return!e||e.firstChild===null||RE(n)}function _1(n,e,t,r=!0){let i=e[pe];if(kN(i,e,n,t),r){let s=_p(t,n),a=e[Tt],u=WE(a,n[pi]);u!==null&&NN(i,n[dn],a,e,u,s)}let o=e[Qu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function al(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Kn(o)),Yn(o)&&I1(o,r);let s=t.type;if(s&8)al(n,e,t.child,r);else if(s&32){let a=cg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=KE(e,t);if(Array.isArray(a))r.push(...a);else{let u=gi(e[Sn]);al(u[pe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function I1(n,e){for(let t=Zt;t<n.length;t++){let r=n[t],i=r[pe].firstChild;i!==null&&al(r[pe],r,i,e)}n[pi]!==n[Zn]&&e.push(n[pi])}var fD=[];function E1(n){return n[Qt]??D1(n)}function D1(n){let e=fD.pop()??Object.create(T1);return e.lView=n,e}function C1(n){n.lView[Qt]!==n&&(n.lView=null,fD.push(n))}var T1=Me(V({},_f),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Cl(n.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function b1(n){let e=n[Qt]??Object.create(S1);return e.lView=n,e}var S1=Me(V({},_f),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=gi(n.lView);for(;e&&!pD(e[pe]);)e=gi(e);e&&eE(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function pD(n){return n.type!==2}var A1=100;function gD(n,e=!0,t=0){let r=n[bn],i=r.rendererFactory,o=!1;o||i.begin?.();try{x1(n,t)}catch(s){throw e&&g1(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function x1(n,e){let t=sE();try{K_(!0),Dp(n,e);let r=0;for(;Dl(n);){if(r===A1)throw new Z(103,!1);r++,Dp(n,1)}}finally{K_(t)}}function M1(n,e,t,r){let i=e[re];if((i&256)===256)return;let o=!1,s=!1;!o&&e[bn].inlineEffectRunner?.flush(),Wp(e);let a=!0,u=null,l=null;o||(pD(n)?(l=E1(e),u=If(l)):a_()===null?(a=!1,l=b1(e),u=If(l)):e[Qt]&&(Df(e[Qt]),e[Qt]=null));try{XI(e),PR(n.bindingStartIndex),t!==null&&tD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&$u(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Hu(e,v,0,null),Wf(e,0)}if(s||R1(e),mD(e,0),n.contentQueries!==null&&dD(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&$u(e,v)}else{let v=n.contentHooks;v!==null&&Hu(e,v,1),Wf(e,1)}WN(n,e);let p=n.components;p!==null&&vD(e,p,0);let m=n.viewQuery;if(m!==null&&Ep(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&$u(e,v)}else{let v=n.viewHooks;v!==null&&Hu(e,v,2),Wf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Gf]){for(let v of e[Gf])v();e[Gf]=null}o||(e[re]&=-73)}catch(h){throw o||Cl(e),h}finally{l!==null&&(c_(l,u),a&&C1(l)),Kp()}}function mD(n,e){for(let t=PE(n);t!==null;t=kE(t))for(let r=Zt;r<t.length;r++){let i=t[r];yD(i,e)}}function R1(n){for(let e=PE(n);e!==null;e=kE(e)){if(!(e[re]&Ju.HasTransplantedViews))continue;let t=e[Yu];for(let r=0;r<t.length;r++){let i=t[r];eE(i)}}}function N1(n,e,t){let r=_i(e,n);yD(r,t)}function yD(n,e){Gp(n)&&Dp(n,e)}function Dp(n,e){let r=n[pe],i=n[re],o=n[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ef(o)),s||=!1,o&&(o.dirty=!1),n[re]&=-9217,s)M1(r,n,r.template,n[br]);else if(i&8192){mD(n,1);let a=r.components;a!==null&&vD(n,a,1)}}function vD(n,e,t){for(let r=0;r<e.length;r++)N1(n,e[r],t)}function wD(n,e){let t=sE()?64:1088;for(n[bn].changeDetectionScheduler?.notify(e);n;){n[re]|=t;let r=gi(n);if(ap(n)&&!r)return n;n=r}return null}var vi=class{get rootNodes(){let e=this._lView,t=e[pe];return al(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[br]}set context(e){this._lView[br]=e}get destroyed(){return(this._lView[re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Yn(e)){let t=e[Zu],r=t?t.indexOf(this):-1;r>-1&&(wp(e,r),Wu(t,r))}this._attachedToViewContainer=!1}zE(this._lView[pe],this._lView)}onDestroy(e){tE(this._lView,e)}markForCheck(){wD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){up(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,gD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ap(this._lView),t=this._lView[Ao];t!==null&&!e&&ug(t,this._lView),HE(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=ap(this._lView),r=this._lView[Ao];r!==null&&!t&&qE(r,this._lView),up(this._lView)}},gg=(()=>{class n{static{this.__NG_ELEMENT_ID__=O1}}return n})(),P1=gg,k1=class extends P1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=w1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vi(i)}};function O1(){return F1(hn(),Ge())}function F1(n,e){return n.type&4?new k1(e,n,bl(n,e)):null}var BH=new RegExp(`^(\\d+)*(${wN}|${vN})*(.*)`);var L1=()=>null;function uI(n,e){return L1(n,e)}var Mo=class{},mg=new W("",{providedIn:"root",factory:()=>!1});var _D=new W(""),ID=new W(""),Cp=class{},cl=class{};function V1(n){let e=Error(`No component factory found for ${Ut(n)}.`);return e[U1]=n,e}var U1="ngComponent";var Tp=class{resolveComponentFactory(e){throw V1(e)}},Ro=class{static{this.NULL=new Tp}},No=class{},Pl=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>j1()}}return n})();function j1(){let n=Ge(),e=hn(),t=_i(e.index,n);return(Dr(t)?t:n)[Tt]}var B1=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function bp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=O_(i,a);else if(o==2){let u=a,l=e[++s];r=O_(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ul=class extends Ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Tr(e);return new Po(t,this.ngModule)}};function lI(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Cr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Cr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function $1(n){let e=n.toLowerCase();return e==="svg"?vR:e==="math"?wR:null}var Po=class extends cl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=lI(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return lI(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ZM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof jt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new dp(e,s):e,u=a.get(No,null);if(u===null)throw new Z(407,!1);let l=a.get(B1,null),h=a.get(Mo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?ZN(m,r,this.componentDef.encapsulation,a):$E(m,v,$1(v)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let N=null;b!==null&&(N=og(b,a,!0));let j=hg(0,null,null,1,0,null,null,null,null,null,null),q=Ml(null,j,null,R,null,null,p,m,a,null,N);Wp(q);let F,Y,ee=null;try{let J=this.componentDef,I,y=null;J.findHostDirectiveDefs?(I=[],y=new Map,J.findHostDirectiveDefs(J,I,y),I.push(J)):I=[J];let _=H1(q,b);ee=q1(_,b,J,I,q,p,m),Y=JI(j,Sr),b&&W1(m,J,b,r),t!==void 0&&K1(Y,this.ngContentSelectors,t),F=G1(ee,J,I,y,q,[Q1]),pg(j,q,null)}catch(J){throw ee!==null&&yp(ee),yp(q),J}finally{Kp()}return new Sp(this.componentType,F,bl(Y,q),q,Y)}finally{Te(o)}}},Sp=class extends Cp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;fg(o[pe],o,i,e,t),this.previousInputValues.set(e,t);let s=_i(this._tNode.index,o);wD(s,1)}}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function H1(n,e){let t=n[pe],r=Sr;return n[r]=e,Rl(t,r,2,"#host",null)}function q1(n,e,t,r,i,o,s){let a=i[pe];z1(r,n,e,s);let u=null;e!==null&&(u=og(e,i[So]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Ml(i,oD(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Ip(a,n,r.length-1),Nl(i,p),i[n.index]=p}function z1(n,e,t,r){for(let i of n)e.mergedAttrs=$p(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(bp(e,e.mergedAttrs,!0),t!==null&&ZE(r,t,e))}function G1(n,e,t,r,i,o){let s=hn(),a=i[pe],u=xn(s,i);cD(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=_a(i,a,p,s);yi(m,i)}uD(a,i,s),u&&yi(u,i);let l=_a(i,a,s.directiveStart+s.componentOffset,s);if(n[br]=i[br]=l,o!==null)for(let h of o)h(l,e);return nD(a,s,i),l}function W1(n,e,t,r){if(r)np(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=YM(e.selectors[0]);i&&np(n,t,i),o&&o.length>0&&QE(n,t,o.join(" "))}}function K1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function Q1(){let n=hn();Yp(Ge()[pe],n)}var xa=(()=>{class n{static{this.__NG_ELEMENT_ID__=Z1}}return n})();function Z1(){let n=hn();return J1(n,Ge())}var Y1=xa,ED=class extends Y1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return bl(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jp(this._hostTNode,this._hostLView);if(yE(e)){let t=tl(e,this._hostLView),r=el(e),i=t[pe].data[r+8];return new fi(i,t)}else return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=dI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Zt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=uI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,cI(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!pR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new Po(Tr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(jt,null);R&&(o=R)}let h=Tr(u.componentType??{}),p=uI(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,o);return this.insertImpl(v.hostView,a,cI(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(IR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ct],l=new ED(u,u[dn],u[Ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return _1(s,i,o,r),e.attachToViewContainerRef(),xI(Jf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=dI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=wp(this._lContainer,t);r&&(Wu(Jf(this._lContainer),t),zE(r[pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=wp(this._lContainer,t);return r&&Wu(Jf(this._lContainer),t)!=null?new vi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function dI(n){return n[Zu]}function Jf(n){return n[Zu]||(n[Zu]=[])}function J1(n,e){let t,r=e[n.index];return Yn(r)?t=r:(t=lD(r,e,null,n),e[n.index]=t,Nl(e,t)),eP(t,e,n,r),new ED(t,n,e)}function X1(n,e){let t=n[Tt],r=t.createComment(""),i=xn(e,n),o=WE(t,i);return sl(t,o,r,UN(t,i),!1),r}var eP=rP,tP=()=>!1;function nP(n,e,t){return tP(n,e,t)}function rP(n,e,t,r){if(n[pi])return;let i;t.type&8?i=Kn(r):i=X1(e,t),n[pi]=i}var hI=new Set;function yg(n){hI.has(n)||(hI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function iP(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(cP))}return o}return ll.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>uP(o));e.push(u)}),sP(),Promise.all(e).then(()=>{})}var ll=new Map,oP=new Set;function sP(){let n=ll;return ll=new Map,n}function aP(){return ll.size===0}function cP(n){return typeof n=="string"?n:n.text()}function uP(n){oP.delete(n)}var Ar=class{},Ia=class{};var dl=class extends Ar{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ul(this);let o=LI(e);this._bootstrapComponents=BE(o.bootstrap),this._r3Injector=SE(e,t,[{provide:Ar,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver},...r],Ut(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},hl=class extends Ia{constructor(e){super(),this.moduleType=e}create(e){return new dl(this.moduleType,e,[])}};function lP(n,e,t){return new dl(n,e,t,!1)}var Ap=class extends Ar{constructor(e){super(),this.componentFactoryResolver=new ul(this),this.instance=null;let t=new ya([...e.providers,{provide:Ar,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],e.parent||zp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function kl(n,e,t=null){return new Ap({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function DD(n){return vg(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function dP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function vg(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function hP(n,e,t){return n[e]=t}function Ea(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function fP(n,e,t,r){let i=Ea(n,e,t);return Ea(n,e+1,r)||i}function pP(n){return(n.flags&32)===32}function gP(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Rl(e,n,4,s||null,a||null);aD(e,t,h,Xu(l,u)),Yp(e,h);let p=h.tView=hg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function mP(n,e,t,r,i,o,s,a,u,l){let h=t+Sr,p=e.firstCreatePass?gP(h,e,n,r,i,o,s,a,u):e.data[h];Sa(p,!1);let m=yP(e,n,p,t);Qp()&&lg(e,n,m,p),yi(m,n);let v=lD(m,n,m,p);return n[h]=v,Nl(n,v),nP(v,p,n),WI(p)&&rD(e,n,p),u!=null&&iD(n,p,l),p}function fn(n,e,t,r,i,o,s,a){let u=Ge(),l=Ii(),h=Xu(l.consts,o);return mP(u,l,n,e,t,r,i,h,s,a),fn}var yP=vP;function vP(n,e,t,r){return Zp(!0),e[Tt].createComment("")}var Eo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Eo||{}),CD=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),xp=class n{constructor(){this.ngZone=U(ge),this.scheduler=U(Mo),this.errorHandler=U(Qn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Eo.EarlyRead,Eo.Write,Eo.MixedReadWrite,Eo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},Mp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function wg(n,e){!e?.injector&&hR(wg);let t=e?.injector??U(Yt);return SN(t)?(yg("NgAfterNextRender"),_P(n,t,e,!0)):IP}function wP(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function _P(n,e,t,r){let i=e.get(CD);i.impl??=e.get(xp);let o=t?.phase??Eo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(eg):null,a=new Mp(i.impl,wP(n,o),r,s);return i.impl.register(a),a}var IP={destroy(){}};function TD(n,e,t,r){return Ea(n,aE(),t)?e+pa(t)+r:Rr}function EP(n,e,t,r,i,o){let s=NR(),a=fP(n,s,t,i);return kR(2),a?e+pa(t)+r+pa(i)+o:Rr}function Jt(n,e,t){let r=Ge(),i=aE();if(Ea(r,i,e)){let o=Ii(),s=pE();sD(o,s,r,n,e,r[Tt],t,!1)}return Jt}function fI(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";fg(n,t,o[s],s,r)}function DP(n,e,t,r,i,o){let s=e.consts,a=Xu(s,i),u=Rl(e,n,2,r,a);return aD(e,t,u,Xu(s,o)),u.attrs!==null&&bp(u,u.attrs,!1),u.mergedAttrs!==null&&bp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ie(n,e,t,r){let i=Ge(),o=Ii(),s=Sr+n,a=i[Tt],u=o.firstCreatePass?DP(s,o,i,e,t,r):o.data[s],l=CP(o,i,u,a,e,n);i[s]=l;let h=WI(u);return Sa(u,!0),ZE(a,l,u),!pP(u)&&Qp()&&lg(o,i,l,u),DR()===0&&yi(l,i),CR(),h&&(rD(o,i,u),nD(o,u,i)),r!==null&&iD(i,u),ie}function te(){let n=hn();oE()?MR():(n=n.parent,Sa(n,!1));let e=n;SR(e)&&AR(),TR();let t=Ii();return t.firstCreatePass&&(Yp(t,n),GI(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&HR(e)&&fI(t,e,Ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&qR(e)&&fI(t,e,Ge(),e.stylesWithoutHost,!1),te}function de(n,e,t,r){return ie(n,e,t,r),te(),de}var CP=(n,e,t,r,i,o)=>(Zp(!0),$E(r,i,UR()));var fl="en-US";var TP=fl;function bP(n){typeof n=="string"&&(TP=n.toLowerCase().replace(/_/g,"-"))}function _g(n,e,t){return bD(n,"",e,"",t),_g}function bD(n,e,t,r,i){let o=Ge(),s=TD(o,e,t,r);if(s!==Rr){let a=Ii(),u=pE();sD(a,u,o,n,s,o[Tt],i,!1)}return bD}function _e(n,e=""){let t=Ge(),r=Ii(),i=n+Sr,o=r.firstCreatePass?Rl(r,i,1,e,null):r.data[i],s=SP(r,t,o,e,n);t[i]=s,Qp()&&lg(r,t,s,o),Sa(o,!1)}var SP=(n,e,t,r,i)=>(Zp(!0),xN(e[Tt],r));function Xt(n){return st("",n,""),Xt}function st(n,e,t){let r=Ge(),i=TD(r,n,e,t);return i!==Rr&&hD(r,Tl(),i),st}function Ig(n,e,t,r,i){let o=Ge(),s=EP(o,n,e,t,r,i);return s!==Rr&&hD(o,Tl(),s),Ig}var AP=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=jI(!1,t.type),i=r.length>0?kl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O(jt))})}}return n})();function SD(n){yg("NgStandalone"),n.getStandaloneInjector=e=>e.get(AP).getOrCreateStandaloneInjector(n)}function AD(n,e,t,r){return MP(Ge(),RR(),n,e,t,r)}function xP(n,e){let t=n[e];return t===Rr?void 0:t}function MP(n,e,t,r,i,o){let s=e+t;return Ea(n,s,i)?hP(n,s+1,o?r.call(o,i):r(i)):xP(n,s+1)}var Uu=null;function RP(n){Uu!==null&&(n.defaultEncapsulation!==Uu.defaultEncapsulation||n.preserveWhitespaces!==Uu.preserveWhitespaces)||(Uu=n)}var xr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},xD=new xr("18.2.13");var Ol=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Eg=new W(""),Ma=new W(""),Fl=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Dg||(NP(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(ge),O(Ll),O(Ma))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ll=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Dg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function NP(n){Dg=n}var Dg;function Ra(n){return!!n&&typeof n.then=="function"}function MD(n){return!!n&&typeof n.subscribe=="function"}var Vl=new W(""),RD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=U(Vl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ra(o))t.push(o);else if(MD(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cg=new W("");function PP(){u_(()=>{throw new Z(600,!1)})}function kP(n){return n.isBoundToModule}var OP=10;function FP(n,e,t){try{let r=t();return Ra(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function ND(n,e){return Array.isArray(e)?e.reduce(ND,n):V(V({},n),e)}var Nr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(dN),this.afterRenderManager=U(CD),this.zonelessEnabled=U(mg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=U(ko).hasPendingTasks.pipe(G(t=>!t)),this._injector=U(jt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof cl;if(!this._injector.get(RD).done){let m=!i&&FI(t),v=!1;throw new Z(405,v)}let s;i?s=t:s=this._injector.get(Ro).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=kP(s)?void 0:this._injector.get(Ar),u=r||s.selector,l=s.create(Yt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Eg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),qu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Z(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(No,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<OP;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)LP(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Dl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;qu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Cg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function LP(n,e,t,r){if(!t&&!Dl(n))return;gD(n,e,t&&!r?0:1)}var Rp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ul=(()=>{class n{compileModuleSync(t){return new hl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=LI(t),o=BE(i.declarations).reduce((s,a)=>{let u=Tr(a);return u&&s.push(new Po(u)),s},[]);return new Rp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VP=new W("");function UP(n,e,t){let r=new hl(t);return Promise.resolve(r)}function pI(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var jP=(()=>{class n{constructor(){this.zone=U(ge),this.changeDetectionScheduler=U(Mo),this.applicationRef=U(Nr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BP({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ge(Me(V({},PD()),{scheduleInRootZone:t})),[{provide:ge,useFactory:n},{provide:bo,multi:!0,useFactory:()=>{let r=U(jP,{optional:!0});return()=>r.initialize()}},{provide:bo,multi:!0,useFactory:()=>{let r=U($P);return()=>{r.initialize()}}},e===!0?{provide:_D,useValue:!0}:[],{provide:ID,useValue:t??AE}]}function PD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var $P=(()=>{class n{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=U(ge),this.pendingTasks=U(ko)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var HP=(()=>{class n{constructor(){this.appRef=U(Nr),this.taskService=U(ko),this.ngZone=U(ge),this.zonelessEnabled=U(mg),this.disableScheduling=U(_D,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(rl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(ID,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof il||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?eI:xE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(rl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,eI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qP(){return typeof $localize<"u"&&$localize.locale||fl}var Tg=new W("",{providedIn:"root",factory:()=>U(Tg,ue.Optional|ue.SkipSelf)||qP()});var pl=new W("");function ju(n){return!n.moduleRef}function zP(n){let e=ju(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ge);return t.run(()=>{ju(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Qn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),ju(n)){let o=()=>e.destroy(),s=n.platformInjector.get(pl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(pl);s.add(o),n.moduleRef.onDestroy(()=>{qu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return FP(r,t,()=>{let o=e.get(RD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Tg,fl);if(bP(s||fl),ju(n)){let a=e.get(Nr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return GP(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function GP(n,e){let t=n.injector.get(Nr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Z(-403,!1);e.push(n)}var kD=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>lN(r?.ngZone,Me(V({},PD({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[BP({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Mo,useExisting:HP}],u=lP(t.moduleType,this.injector,a);return zP({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=ND({},r);return UP(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(pl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),fa=null,OD=new W("");function WP(n){if(fa&&!fa.get(OD,!1))throw new Z(400,!1);PP(),fa=n;let e=n.get(kD);return ZP(n),e}function bg(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=FD();if(!s||s.injector.get(OD,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):WP(KP(a,r))}return QP(i)}}function KP(n=[],e){return Yt.create({name:e,providers:[{provide:wl,useValue:"platform"},{provide:pl,useValue:new Set([()=>fa=null])},...n]})}function QP(n){let e=FD();if(!e)throw new Z(401,!1);return e}function FD(){return fa?.get(kD)??null}function ZP(n){n.get(rg,null)?.forEach(t=>t())}function Sg(){return!1}var Na=(()=>{class n{static{this.__NG_ELEMENT_ID__=YP}}return n})();function YP(n){return JP(hn(),Ge(),(n&16)===16)}function JP(n,e,t){if(Il(n)&&!t){let r=_i(n.index,e);return new vi(r,r)}else if(n.type&175){let r=e[Sn];return new vi(r,e)}return null}var Np=class{constructor(){}supports(e){return DD(e)}create(e){return new Pp(e)}},XP=(n,e)=>e,Pp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||XP}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<gI(r,i,o)?t:r,a=gI(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!DD(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,dP(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new kp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new gl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new gl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},kp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Op=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},gl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Op,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function gI(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Fp=class{constructor(){}supports(e){return e instanceof Map||vg(e)}create(){return new Lp}},Lp=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||vg(e)))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Vp(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Vp=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function mI(){return new Ag([new Np])}var Ag=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:mI})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||mI()),deps:[[n,new vl,new wi]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();function yI(){return new xg([new Fp])}var xg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:yI})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||yI()),deps:[[n,new vl,new wi]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Z(901,!1)}}return n})();var LD=bg(null,"core",[]),VD=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Nr))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})();function UD(n){let e=Tr(n);if(!e)return null;let t=new Po(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var HD=null;function Ei(){return HD}function qD(n){HD??=n}var jl=class{};var Pt=new W(""),Pg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>U(rk),providedIn:"platform"})}}return n})(),zD=new W(""),rk=(()=>{class n extends Pg{constructor(){super(),this._doc=U(Pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ei().getBaseHref(this._doc)}onPopState(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function kg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function jD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Jn(n){return n&&n[0]!=="?"?"?"+n:n}var Di=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>U(Og),providedIn:"root"})}}return n})(),GD=new W(""),Og=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(Pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return kg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Jn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Pg),O(GD,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WD=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=kg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Pg),O(GD,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Oo=(()=>{class n{constructor(t){this._subject=new Dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=sk(jD(BD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Jn(r))}normalize(t){return n.stripTrailingSlash(ok(this._basePath,BD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Jn}static{this.joinWithSlash=kg}static{this.stripTrailingSlash=jD}static{this.\u0275fac=function(r){return new(r||n)(O(Di))}}static{this.\u0275prov=H({token:n,factory:()=>ik(),providedIn:"root"})}}return n})();function ik(){return new Oo(O(Di))}function ok(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function BD(n){return n.replace(/\/index.html$/,"")}function sk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function KD(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Mg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Mn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Mg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),$D(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);$D(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ve(xa),Ve(gg),Ve(Ag))}}static{this.\u0275dir=Ca({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function $D(n,e){n.context.$implicit=e.item}var QD=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Mr.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Ve(Aa),Ve(xg),Ve(Pl))}}static{this.\u0275dir=Ca({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var ZD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})(),Fg="browser",ak="server";function ck(n){return n===Fg}function Ci(n){return n===ak}var YD=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>ck(U(Nt))?new Rg(U(Pt),window):new Ng})}}return n})(),Rg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=uk(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function uk(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Ng=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Bl=class{};var Ug=class extends jl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},jg=class n extends Ug{static makeCurrent(){qD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=dk();return t==null?null:hk(t)}resetBaseElement(){ka=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return KD(document.cookie,e)}},ka=null;function dk(){return ka=ka||document.querySelector("base"),ka?ka.getAttribute("href"):null}function hk(n){return new URL(n,document.baseURI).pathname}var Bg=class{addToWindow(e){ln.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Z(5103,!1);return o},ln.getAllAngularTestabilities=()=>e.getAllTestabilities(),ln.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=ln.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};ln.frameworkStabilizers||(ln.frameworkStabilizers=[]),ln.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ei().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},fk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),$g=new W(""),tC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O($g),O(ge))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),$l=class{constructor(e){this._doc=e}},Lg="ng-app-id",nC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ci(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Lg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Lg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Lg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Pt),O(Sl),O(ig,8),O(Nt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Vg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},qg=/%COMP%/g,rC="%COMP%",pk=`_nghost-${rC}`,gk=`_ngcontent-${rC}`,mk=!0,yk=new W("",{providedIn:"root",factory:()=>mk});function vk(n){return gk.replace(qg,n)}function wk(n){return pk.replace(qg,n)}function iC(n,e){return e.map(t=>t.replace(qg,n))}var JD=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ci(a),this.defaultRenderer=new Oa(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tn.ShadowDom&&(r=Me(V({},r),{encapsulation:Tn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Hl?i.applyToHost(t):i instanceof Fa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Tn.Emulated:o=new Hl(u,l,r,this.appId,h,s,a,p);break;case Tn.ShadowDom:return new Hg(u,l,t,r,s,a,this.nonce,p);default:o=new Fa(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(tC),O(nC),O(Sl),O(yk),O(Pt),O(Nt),O(ge),O(ig))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Oa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Vg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(XD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(XD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Vg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Vg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Mr.DashCase|Mr.Important)?e.style.setProperty(t,r,i&Mr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Mr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ei().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function XD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Hg=class extends Oa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=iC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fa=class extends Oa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?iC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hl=class extends Fa{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=vk(l),this.hostAttr=wk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},_k=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),eC=["alt","control","meta","shift"],Ik={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ek={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Dk=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ei().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),eC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Ik[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),eC.forEach(s=>{if(s!==i){let a=Ek[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function Ck(){jg.makeCurrent()}function Tk(){return new Qn}function bk(){return FE(document),document}var Sk=[{provide:Nt,useValue:Fg},{provide:rg,useValue:Ck,multi:!0},{provide:Pt,useFactory:bk,deps:[]}],oC=bg(LD,"browser",Sk),Ak=new W(""),xk=[{provide:Ma,useClass:Bg,deps:[]},{provide:Eg,useClass:Fl,deps:[ge,Ll,Ma]},{provide:Fl,useClass:Fl,deps:[ge,Ll,Ma]}],Mk=[{provide:wl,useValue:"root"},{provide:Qn,useFactory:Tk,deps:[]},{provide:$g,useClass:_k,multi:!0,deps:[Pt,ge,Nt]},{provide:$g,useClass:Dk,multi:!0,deps:[Pt]},JD,nC,tC,{provide:No,useExisting:JD},{provide:Bl,useClass:fk,deps:[]},[]],sC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Sl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(Ak,12))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({providers:[...Mk,...xk],imports:[ZD,VD]})}}return n})();var aC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ae="primary",Ya=Symbol("RouteTitle"),Qg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bo(n){return new Qg(n)}function Rk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Nk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rn(n[t],e[t]))return!1;return!0}function Rn(n,e){let t=n?Zg(n):void 0,r=e?Zg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!wC(n[i],e[i]))return!1;return!0}function Zg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function _C(n){return n.length>0?n[n.length-1]:null}function kr(n){return Vf(n)?n:Ra(n)?De(Promise.resolve(n)):X(n)}var Pk={exact:EC,subset:DC},IC={exact:kk,subset:Ok,ignored:()=>!0};function uC(n,e,t){return Pk[t.paths](n.root,e.root,t.matrixParams)&&IC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function kk(n,e){return Rn(n,e)}function EC(n,e,t){if(!bi(n.segments,e.segments)||!Gl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!EC(n.children[r],e.children[r],t))return!1;return!0}function Ok(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wC(n[t],e[t]))}function DC(n,e,t){return CC(n,e,e.segments,t)}function CC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!bi(i,t)||e.hasChildren()||!Gl(i,t,r))}else if(n.segments.length===t.length){if(!bi(n.segments,t)||!Gl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!DC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!bi(n.segments,i)||!Gl(n.segments,i,r)||!n.children[ae]?!1:CC(n.children[ae],e,o,r)}}function Gl(n,e,t){return e.every((r,i)=>IC[t](n[i].parameters,r.parameters))}var er=class{constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){return Vk.serialize(this)}},Ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wl(this)}},Ti=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bo(this.parameters),this._parameterMap}toString(){return bC(this)}};function Fk(n,e){return bi(n,e)&&n.every((t,r)=>Rn(t.parameters,e[r].parameters))}function bi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Lk(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var Ja=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new $o,providedIn:"root"})}}return n})(),$o=class{parse(e){let t=new Jg(e);return new er(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${La(e.root,!0)}`,r=Bk(e.queryParams),i=typeof e.fragment=="string"?`#${Uk(e.fragment)}`:"";return`${t}${r}${i}`}},Vk=new $o;function Wl(n){return n.segments.map(e=>bC(e)).join("/")}function La(n,e){if(!n.hasChildren())return Wl(n);if(e){let t=n.children[ae]?La(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${La(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Lk(n,(r,i)=>i===ae?[La(n.children[ae],!1)]:[`${i}:${La(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${Wl(n)}/${t[0]}`:`${Wl(n)}/(${t.join("//")})`}}function TC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ql(n){return TC(n).replace(/%3B/gi,";")}function Uk(n){return encodeURI(n)}function Yg(n){return TC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kl(n){return decodeURIComponent(n)}function lC(n){return Kl(n.replace(/\+/g,"%20"))}function bC(n){return`${Yg(n.path)}${jk(n.parameters)}`}function jk(n){return Object.entries(n).map(([e,t])=>`;${Yg(e)}=${Yg(t)}`).join("")}function Bk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ql(t)}=${ql(i)}`).join("&"):`${ql(t)}=${ql(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var $k=/^[^\/()?;#]+/;function zg(n){let e=n.match($k);return e?e[0]:""}var Hk=/^[^\/()?;=#]+/;function qk(n){let e=n.match(Hk);return e?e[0]:""}var zk=/^[^=?&#]+/;function Gk(n){let e=n.match(zk);return e?e[0]:""}var Wk=/^[^&#]+/;function Kk(n){let e=n.match(Wk);return e?e[0]:""}var Jg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new Ce(e,t)),r}parseSegment(){let e=zg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new Ti(Kl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=qk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=zg(this.remaining);i&&(r=i,this.capture(r))}e[Kl(t)]=Kl(r)}parseQueryParam(e){let t=Gk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Kk(this.remaining);s&&(r=s,this.capture(r))}let i=lC(t),o=lC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function SC(n){return n.segments.length>0?new Ce([],{[ae]:n}):n}function AC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=AC(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return Qk(t)}function Qk(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new Ce(n.segments.concat(e.segments),e.children)}return n}function Ha(n){return n instanceof er}function Zk(n,e,t=null,r=null){let i=xC(n);return MC(i,e,t,r)}function xC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=SC(r);return e??i}function MC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Gg(i,i,i,t,r);let o=Yk(e);if(o.toRoot())return Gg(i,i,new Ce([],{}),t,r);let s=Jk(o,i,n),a=s.processChildren?ja(s.segmentGroup,s.index,o.commands):NC(s.segmentGroup,s.index,o.commands);return Gg(i,s.segmentGroup,a,t,r)}function Ql(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qa(n){return typeof n=="object"&&n!=null&&n.outlets}function Gg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=RC(n,e,t);let a=SC(AC(s));return new er(a,o,i)}function RC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=RC(o,e,t)}),new Ce(n.segments,r)}var Zl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ql(r[0]))throw new Z(4003,!1);let i=r.find(qa);if(i&&i!==_C(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Yk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Zl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Zl(t,e,r)}var Vo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Jk(n,e,t){if(n.isAbsolute)return new Vo(e,!0,0);if(!t)return new Vo(e,!1,NaN);if(t.parent===null)return new Vo(t,!0,0);let r=Ql(n.commands[0])?0:1,i=t.segments.length-1+r;return Xk(t,i,n.numberOfDoubleDots)}function Xk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Vo(r,!1,i-o)}function eO(n){return qa(n[0])?n[0].outlets:{[ae]:n}}function NC(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return ja(n,e,t);let r=tO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new Ce(n.segments.slice(r.pathIndex),n.children),ja(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?Xg(n,e,t):r.match?ja(n,0,i):Xg(n,e,t)}function ja(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=eO(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=ja(n.children[ae],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=NC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function tO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(qa(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!hC(u,l,s))return o;r+=2}else{if(!hC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Xg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(qa(o)){let u=nO(o.outlets);return new Ce(r,u)}if(i===0&&Ql(t[0])){let u=n.segments[e];r.push(new Ti(u.path,dC(t[0]))),i++;continue}let s=qa(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Ql(a)?(r.push(new Ti(s,dC(a))),i+=2):(r.push(new Ti(s,{})),i++)}return new Ce(r,{})}function nO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Xg(new Ce([],{}),0,r))}),e}function dC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hC(n,e,t){return n==t.path&&Rn(e,t.parameters)}var Ba="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),en=class{constructor(e,t){this.id=e,this.url=t}},Ho=class extends en{constructor(e,t,r="imperative",i=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends en{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}($t||{}),Yl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Yl||{}),Xn=class extends en{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pr=class extends en{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},za=class extends en{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jl=class extends en{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},em=class extends en{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tm=class extends en{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},nm=class extends en{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rm=class extends en{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},im=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},om=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sm=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},am=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cm=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},um=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xl=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=at.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ga=class{},qo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function rO(n,e){return n.providers&&!n._injector&&(n._injector=kl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pn(n){return n.outlet||ae}function iO(n,e){let t=n.filter(r=>pn(r)===e);return t.push(...n.filter(r=>pn(r)!==e)),t}function Xa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var lm=class{get injector(){return Xa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ec(this.rootInjector),this.attachRef=null}},ec=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ed=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=dm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=dm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=hm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hm(e,this._root).map(t=>t.value)}};function dm(n,e){if(n===e.value)return e;for(let t of e.children){let r=dm(n,t);if(r)return r}return null}function hm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=hm(n,t);if(r.length)return r.unshift(e),r}return[]}var Bt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Lo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var td=class extends ed{constructor(e,t){super(e),this.snapshot=t,Im(this,e)}toString(){return this.snapshot.toString()}};function PC(n){let e=oO(n),t=new ut([new Ti("",{})]),r=new ut({}),i=new ut({}),o=new ut({}),s=new ut(""),a=new zo(t,r,o,s,i,ae,n,e.root);return a.snapshot=e.root,new td(new Bt(a,[]),e)}function oO(n){let e={},t={},r={},i="",o=new Uo([],e,r,i,t,ae,n,null,{});return new rd("",new Bt(o,[]))}var zo=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(G(l=>l[Ya]))??X(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Bo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Bo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&OC(i)&&(r.resolve[Ya]=i.title),r}var Uo=class{get title(){return this.data?.[Ya]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},rd=class extends ed{constructor(e,t){super(t),this.url=e,Im(this,t)}toString(){return kC(this._root)}};function Im(n,e){e.value._routerState=n,e.children.forEach(t=>Im(n,t))}function kC(n){let e=n.children.length>0?` { ${n.children.map(kC).join(", ")} } `:"";return`${n.value}${e}`}function Wg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Rn(e.params,t.params)||n.paramsSubject.next(t.params),Nk(e.url,t.url)||n.urlSubject.next(t.url),Rn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function fm(n,e){let t=Rn(n.params,e.params)&&Fk(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||fm(n.parent,e.parent))}function OC(n){return typeof n.title=="string"||n.title===null}var sO=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=U(ec),this.location=U(xa),this.changeDetector=U(Na),this.inputBinder=U(cd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new pm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ca({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[El]})}}return n})(),pm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===zo?this.route:e===ec?this.childContexts:this.parent.get(e,t)}},cd=new W(""),fC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ca([r.queryParams,r.params,r.data]).pipe(He(([o,s,a],u)=>(a=V(V(V({},o),s),a),u===0?X(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=UD(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function aO(n,e,t){let r=Wa(n,e._root,t?t._root:void 0);return new td(r,e)}function Wa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=cO(n,e,t);return new Bt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Wa(n,a)),s}}let r=uO(e.value),i=e.children.map(o=>Wa(n,o));return new Bt(r,i)}}function cO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wa(n,r,i);return Wa(n,r)})}function uO(n){return new zo(new ut(n.url),new ut(n.params),new ut(n.queryParams),new ut(n.fragment),new ut(n.data),n.outlet,n.component,n)}var Ka=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},FC="ngNavigationCancelingError";function id(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ha(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LC(!1,$t.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function LC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[FC]=!0,t.cancellationCode=e,t}function lO(n){return VC(n)&&Ha(n.url)}function VC(n){return!!n&&n[FC]}var dO=(n,e,t,r)=>G(i=>(new gm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),gm=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Wg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Lo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Lo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Lo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Lo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new um(o.value.snapshot))}),e.children.length&&this.forwardEvent(new am(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Wg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Wg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},od=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jo=class{constructor(e,t){this.component=e,this.route=t}};function hO(n,e,t){let r=n._root,i=e?e._root:null;return Va(r,i,t,[r.value])}function fO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Wo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!EI(n)?n:e.get(n):r}function Va(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Lo(e);return n.children.forEach(s=>{pO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$a(a,t.getContext(s),i)),i}function pO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=gO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new od(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Va(n,e,a?a.children:null,r,i):Va(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jo(a.outlet.component,s))}else s&&$a(e,a,i),i.canActivateChecks.push(new od(r)),o.component?Va(n,null,a?a.children:null,r,i):Va(n,null,t,r,i);return i}function gO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!bi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bi(n.url,e.url)||!Rn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fm(n,e)||!Rn(n.queryParams,e.queryParams);case"paramsChange":default:return!fm(n,e)}}function $a(n,e,t){let r=Lo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?$a(s,e.children.getContext(o),t):$a(s,null,t):$a(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new jo(e.outlet.component,i)):t.canDeactivateChecks.push(new jo(null,i)):t.canDeactivateChecks.push(new jo(null,i))}function tc(n){return typeof n=="function"}function mO(n){return typeof n=="boolean"}function yO(n){return n&&tc(n.canLoad)}function vO(n){return n&&tc(n.canActivate)}function wO(n){return n&&tc(n.canActivateChild)}function _O(n){return n&&tc(n.canDeactivate)}function IO(n){return n&&tc(n.canMatch)}function UC(n){return n instanceof Gn||n?.name==="EmptyError"}var zl=Symbol("INITIAL_VALUE");function Go(){return He(n=>ca(n.map(e=>e.pipe(Wn(1),hi(zl)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===zl)return zl;if(t===!1||EO(t))return t}return!0}),lt(e=>e!==zl),Wn(1)))}function EO(n){return Ha(n)||n instanceof Ka}function DO(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?X(Me(V({},t),{guardsResult:!0})):CO(s,r,i,n).pipe(Ye(a=>a&&mO(a)?TO(r,o,n,e):X(a)),G(a=>Me(V({},t),{guardsResult:a})))})}function CO(n,e,t,r){return De(n).pipe(Ye(i=>MO(i.component,i.route,t,e,r)),Gt(i=>i!==!0,!0))}function TO(n,e,t,r){return De(e).pipe(li(i=>yo(SO(i.route.parent,r),bO(i.route,r),xO(n,i.path,t),AO(n,i.route,t))),Gt(i=>i!==!0,!0))}function bO(n,e){return n!==null&&e&&e(new cm(n)),X(!0)}function SO(n,e){return n!==null&&e&&e(new sm(n)),X(!0)}function AO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>Pu(()=>{let s=Xa(e)??t,a=Wo(o,s),u=vO(a)?a.canActivate(e,n):An(s,()=>a(e,n));return kr(u).pipe(Gt())}));return X(i).pipe(Go())}function xO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>fO(s)).filter(s=>s!==null).map(s=>Pu(()=>{let a=s.guards.map(u=>{let l=Xa(s.node)??t,h=Wo(u,l),p=wO(h)?h.canActivateChild(r,n):An(l,()=>h(r,n));return kr(p).pipe(Gt())});return X(a).pipe(Go())}));return X(o).pipe(Go())}function MO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(a=>{let u=Xa(e)??i,l=Wo(a,u),h=_O(l)?l.canDeactivate(n,e,t,r):An(u,()=>l(n,e,t,r));return kr(h).pipe(Gt())});return X(s).pipe(Go())}function RO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let a=Wo(s,n),u=yO(a)?a.canLoad(e,t):An(n,()=>a(e,t));return kr(u)});return X(o).pipe(Go(),jC(r))}function jC(n){return Nf(nt(e=>{if(typeof e!="boolean")throw id(n,e)}),G(e=>e===!0))}function NO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let a=Wo(s,n),u=IO(a)?a.canMatch(e,t):An(n,()=>a(e,t));return kr(u)});return X(o).pipe(Go(),jC(r))}var Qa=class{constructor(e){this.segmentGroup=e||null}},Za=class extends Error{constructor(e){super(),this.urlTree=e}};function Fo(n){return mo(new Qa(n))}function PO(n){return mo(new Z(4e3,!1))}function kO(n){return mo(LC(!1,$t.GuardRejected))}var mm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[ae])return PO(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:R}=i,N=An(o,()=>a({params:v,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(N instanceof er)throw new Za(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Za(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new er(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},ym={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OO(n,e,t,r,i){let o=BC(n,e,t);return o.matched?(r=rO(e,r),NO(r,e,t,i).pipe(G(s=>s===!0?o:V({},ym)))):X(o)}function BC(n,e,t){if(e.path==="**")return FO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},ym):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Rk)(t,n,e);if(!i)return V({},ym);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function FO(n){return{matched:!0,parameters:n.length>0?_C(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function pC(n,e,t,r){return t.length>0&&UO(n,t,r)?{segmentGroup:new Ce(e,VO(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&jO(n,t,r)?{segmentGroup:new Ce(n.segments,LO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function LO(n,e,t,r){let i={};for(let o of t)if(ud(n,e,o)&&!r[pn(o)]){let s=new Ce([],{});i[pn(o)]=s}return V(V({},r),i)}function VO(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&pn(r)!==ae){let i=new Ce([],{});t[pn(r)]=i}return t}function UO(n,e,t){return t.some(r=>ud(n,e,r)&&pn(r)!==ae)}function jO(n,e,t){return t.some(r=>ud(n,e,r))}function ud(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function BO(n,e,t){return e.length===0&&!n.children[t]}var vm=class{};function $O(n,e,t,r,i,o,s="emptyOnly"){return new wm(n,e,t,r,i,s,o).recognize()}var HO=31,wm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new mm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=pC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Bt(r,t),o=new rd("",i),s=Zk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Uo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(G(r=>({children:r,rootSnapshot:t})),vr(r=>{if(r instanceof Za)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qa?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Bt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return De(o).pipe(li(s=>{let a=r.children[s],u=iO(t,s);return this.processSegmentGroup(e,u,a,s,i)}),di((s,a)=>(s.push(...a),s)),wr(null),$f(),Ye(s=>{if(s===null)return Fo(r);let a=$C(s);return qO(a),X(a)}))}processSegment(e,t,r,i,o,s,a){return De(t).pipe(li(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(vr(l=>{if(l instanceof Qa)return X(null);throw l}))),Gt(u=>!!u),vr(u=>{if(UC(u))return BO(r,i,o)?X(new vm):Fo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return pn(r)!==s&&(s===ae||!ud(i,o,r))?Fo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Fo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=BC(t,i,o);if(!u)return Fo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>HO&&(this.allowRedirects=!1));let v=new Uo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,gC(i),pn(i),i.component??i._loadedComponent??null,i,mC(i)),b=nd(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Ye(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=OO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(He(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(He(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,b=new Uo(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,gC(r),pn(r),r.component??r._loadedComponent??null,r,mC(r)),R=nd(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(R.params),b.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:j}=pC(t,m,v,l);if(j.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new Bt(b,F)));if(l.length===0&&j.length===0)return X(new Bt(b,[]));let q=pn(r)===o;return this.processSegment(h,l,N,j,q?ae:o,!0,b).pipe(G(F=>new Bt(b,F instanceof Bt?[F]:[])))}))):Fo(t)))}getChildConfig(e,t,r){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):RO(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):kO(t))):X({routes:[],injector:e})}};function qO(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function zO(n){let e=n.value.routeConfig;return e&&e.path===""}function $C(n){let e=[],t=new Set;for(let r of n){if(!zO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=$C(r.children);e.push(new Bt(r.value,i))}return e.filter(r=>!t.has(r))}function gC(n){return n.data||{}}function mC(n){return n.resolve||{}}function GO(n,e,t,r,i,o){return Ye(s=>$O(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:u})=>Me(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function WO(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return X(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of HC(u))s.add(l);let a=0;return De(s).pipe(li(u=>o.has(u)?KO(u,r,n,e):(u.data=nd(u,u.parent,n).resolve,X(void 0))),nt(()=>a++),vo(1),Ye(u=>a===s.size?X(t):Et))})}function HC(n){let e=n.children.map(t=>HC(t)).flat();return[n,...e]}function KO(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!OC(i)&&(o[Ya]=i.title),QO(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=nd(n,n.parent,t).resolve,null)))}function QO(n,e,t,r){let i=Zg(n);if(i.length===0)return X({});let o={};return De(i).pipe(Ye(s=>ZO(n[s],e,t,r).pipe(Gt(),nt(a=>{if(a instanceof Ka)throw id(new $o,a);o[s]=a}))),vo(1),jf(o),vr(s=>UC(s)?Et:mo(s)))}function ZO(n,e,t,r){let i=Xa(e)??r,o=Wo(n,i),s=o.resolve?o.resolve(e,t):An(i,()=>o(e,t));return kr(s)}function Kg(n){return He(e=>{let t=n(e);return t?De(t).pipe(G(()=>e)):X(e)})}var qC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[Ya]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>U(YO),providedIn:"root"})}}return n})(),YO=(()=>{class n extends qC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(aC))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nc=new W("",{providedIn:"root",factory:()=>({})}),JO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["ng-component"]],standalone:!0,features:[SD],decls:1,vars:0,template:function(r,i){r&1&&de(0,"router-outlet")},dependencies:[sO],encapsulation:2})}}return n})();function Em(n){let e=n.children&&n.children.map(Em),t=e?Me(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=JO),t}var sd=new W(""),Dm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(Ul)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=kr(t.loadComponent()).pipe(G(zC),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ua(()=>{this.componentLoaders.delete(t)})),i=new ho(r,()=>new ze).pipe(lo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=XO(r,this.compiler,t,this.onLoadEndListener).pipe(ua(()=>{this.childrenLoaders.delete(r)})),s=new ho(o,()=>new ze).pipe(lo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function XO(n,e,t,r){return kr(n.loadChildren()).pipe(G(zC),Ye(i=>i instanceof Ia||Array.isArray(i)?X(i):De(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(sd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Em),injector:o}}))}function eF(n){return n&&typeof n=="object"&&"default"in n}function zC(n){return eF(n)?n.default:n}var Cm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>U(tF),providedIn:"root"})}}return n})(),tF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GC=new W(""),WC=new W("");function nF(n,e,t){let r=n.get(WC),i=n.get(Pt);return n.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),rF(n))),{onViewTransitionCreated:u}=r;return u&&An(n,()=>u({transition:a,from:e,to:t})),s})}function rF(n){return new Promise(e=>{wg({read:()=>setTimeout(e)},{injector:n})})}var iF=new W(""),Tm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=U(Dm),this.environmentInjector=U(jt),this.urlSerializer=U(Ja),this.rootContexts=U(ec),this.location=U(Oo),this.inputBindingEnabled=U(cd,{optional:!0})!==null,this.titleStrategy=U(qC),this.options=U(nc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Cm),this.createViewTransition=U(GC,{optional:!0}),this.navigationErrorHandler=U(iF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let t=i=>this.events.next(new im(i)),r=i=>this.events.next(new om(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Me(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ba,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),G(o=>Me(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),He(o=>{let s=!1,a=!1;return X(o).pipe(He(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",$t.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Me(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Pr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Yl.IgnoredSameUrlNavigation)),u.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return X(u).pipe(He(p=>{let m=this.transitions?.getValue();return this.events.next(new Ho(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),GO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Me(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Jl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:R}=u,N=new Ho(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let j=PC(this.rootComponentType).snapshot;return this.currentTransition=o=Me(V({},u),{targetSnapshot:j,urlAfterRedirects:m,extras:Me(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,X(o)}else{let p="";return this.events.next(new Pr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Yl.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Et}}),nt(u=>{let l=new em(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),G(u=>(this.currentTransition=o=Me(V({},u),{guards:hO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),DO(this.environmentInjector,u=>this.events.next(u)),nt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw id(this.urlSerializer,u.guardsResult);let l=new tm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),lt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",$t.GuardRejected),!1)),Kg(u=>{if(u.guards.canActivateChecks.length)return X(u).pipe(nt(l=>{let h=new nm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),He(l=>{let h=!1;return X(l).pipe(WO(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",$t.NoDataFromResolver)}}))}),nt(l=>{let h=new rm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Kg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ca(l(u.targetSnapshot.root)).pipe(wr(null),Wn(1))}),Kg(()=>this.afterPreactivation()),He(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?De(h).pipe(G(()=>o)):X(o)}),G(u=>{let l=aO(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Me(V({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new Ga)}),dO(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Wn(1),nt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),qf(this.transitionAbortSubject.pipe(nt(u=>{throw u}))),ua(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",$t.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),vr(u=>{if(a=!0,VC(u))this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),lO(u)?this.events.next(new qo(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new za(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=An(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ka){let{message:p,cancellationCode:m}=id(this.urlSerializer,h);this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new qo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new Xn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function oF(n){return n!==Ba}var sF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>U(aF),providedIn:"root"})}}return n})(),_m=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},aF=(()=>{class n extends _m{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),KC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>U(cF),providedIn:"root"})}}return n})(),cF=(()=>{class n extends KC{constructor(){super(...arguments),this.location=U(Oo),this.urlSerializer=U(Ja),this.options=U(nc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Cm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new er,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=PC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ho)this.stateMemento=this.createStateMemento();else if(t instanceof Pr)this.rawUrlTree=r.initialUrl;else if(t instanceof Jl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ga?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Xn&&(t.code===$t.GuardRejected||t.code===$t.NoDataFromResolver)?this.restoreHistory(r):t instanceof za?this.restoreHistory(r,!0):t instanceof tr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof er?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ua=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ua||{});function QC(n,e){n.events.pipe(lt(t=>t instanceof tr||t instanceof Xn||t instanceof za||t instanceof Pr),G(t=>t instanceof tr||t instanceof Pr?Ua.COMPLETE:(t instanceof Xn?t.code===$t.Redirect||t.code===$t.SupersededByNewNavigation:!1)?Ua.REDIRECTING:Ua.FAILED),lt(t=>t!==Ua.REDIRECTING),Wn(1)).subscribe(()=>{e()})}function uF(n){throw n}var lF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Si=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(Ol),this.stateManager=U(KC),this.options=U(nc,{optional:!0})||{},this.pendingTasks=U(ko),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(Tm),this.urlSerializer=U(Ja),this.location=U(Oo),this.urlHandlingStrategy=U(Cm),this._events=new ze,this.errorHandler=this.options.errorHandler||uF,this.navigated=!1,this.routeReuseStrategy=U(sF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(sd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(cd,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Xn&&r.code!==$t.Redirect&&r.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof tr)this.navigated=!0;else if(r instanceof qo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||oF(i.source)},s);this.scheduleNavigation(a,Ba,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}fF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ba,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Em),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=xC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return MC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ha(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ba,null,r)}navigate(t,r={skipLocationChange:!1}){return hF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},lF):r===!1?i=V({},dF):i=r,Ha(t))return uC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return uC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return QC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}function fF(n){return!(n instanceof Ga)&&!(n instanceof qo)}var ad=class{};var pF=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof tr),li(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=kl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return De(i).pipe(yr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=X(null);let o=i.pipe(Ye(s=>s===null?X(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return De([o,s]).pipe(yr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Si),O(Ul),O(jt),O(ad),O(Dm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZC=new W(""),gF=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ho?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Pr&&t.code===Yl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){JE()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function mF(n){return n.routerState.root}function rc(n,e){return{\u0275kind:n,\u0275providers:e}}function yF(){let n=U(Yt);return e=>{let t=n.get(Nr);if(e!==t.components[0])return;let r=n.get(Si),i=n.get(YC);n.get(bm)===1&&r.initialNavigation(),n.get(JC,null,ue.Optional)?.setUpPreloading(),n.get(ZC,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YC=new W("",{factory:()=>new ze}),bm=new W("",{providedIn:"root",factory:()=>1});function vF(){return rc(2,[{provide:bm,useValue:0},{provide:Vl,multi:!0,deps:[Yt],useFactory:e=>{let t=e.get(zD,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Si),o=e.get(YC);QC(i,()=>{r(!0)}),e.get(Tm).afterPreactivation=()=>(r(!0),o.closed?X(void 0):o),i.initialNavigation()}))}}])}function wF(){return rc(3,[{provide:Vl,multi:!0,useFactory:()=>{let e=U(Si);return()=>{e.setUpLocationChangeListener()}}},{provide:bm,useValue:2}])}var JC=new W("");function _F(n){return rc(0,[{provide:JC,useExisting:pF},{provide:ad,useExisting:n}])}function IF(){return rc(8,[fC,{provide:cd,useExisting:fC}])}function EF(n){let e=[{provide:GC,useValue:nF},{provide:WC,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return rc(9,e)}var yC=new W("ROUTER_FORROOT_GUARD"),DF=[Oo,{provide:Ja,useClass:$o},Si,ec,{provide:zo,useFactory:mF,deps:[Si]},Dm,[]],Sm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[DF,[],{provide:sd,multi:!0,useValue:t},{provide:yC,useFactory:SF,deps:[[Si,new wi,new vl]]},{provide:nc,useValue:r||{}},r?.useHash?TF():bF(),CF(),r?.preloadingStrategy?_F(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?AF(r):[],r?.bindToComponentInputs?IF().\u0275providers:[],r?.enableViewTransitions?EF().\u0275providers:[],xF()]}}static forChild(t){return{ngModule:n,providers:[{provide:sd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(yC,8))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})();function CF(){return{provide:ZC,useFactory:()=>{let n=U(YD),e=U(ge),t=U(nc),r=U(Tm),i=U(Ja);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gF(i,r,n,e,t)}}}function TF(){return{provide:Di,useClass:WD}}function bF(){return{provide:Di,useClass:Og}}function SF(n){return"guarded"}function AF(n){return[n.initialNavigation==="disabled"?wF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?vF().\u0275providers:[]]}var vC=new W("");function xF(){return[{provide:vC,useFactory:yF},{provide:Cg,multi:!0,useExisting:vC}]}var MF=[],XC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({imports:[Sm.forRoot(MF),Sm]})}}return n})();var ld=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="https://images.unsplash.com/photo-1557040135-9dc2a6b60411?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var RF="firebase",NF="10.14.1";mr(RF,NF,"app");var ic=new xr("ANGULARFIRE2_VERSION");var PF=(n,e)=>{let t=e?[e]:o_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ai=class{constructor(){return PF(kF)}},kF="app-check";function Am(){}var dd=class{zone;delegate;constructor(e,t=Ff){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},xm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Am,{},Am,Am)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},hd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new dd(Zone.current)),this.insideAngular=t.run(()=>new dd(Zone.current,aa)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(ge))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OF(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function kt(n){return FF(OF())(n)}function FF(n){return function(t){return t=t.lift(new xm(n.ngZone)),t.pipe(an(n.outsideAngular),zt(n.insideAngular))}}var UF=new Map,jF={activated:!1,tokenObservers:[]},BF={initialized:!1,enabled:!1};function gn(n){return UF.get(n)||Object.assign({},jF)}function oT(){return BF}var $F="https://content-firebaseappcheck.googleapis.com/v1";var HF="exchangeDebugToken",tT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Cq=24*60*60*1e3;var Rm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new gf,this.pending.promise.catch(t=>{}),yield qF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new gf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function qF(n){return new Promise(e=>{setTimeout(e,n)})}var zF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Or=new r_("appCheck","AppCheck",zF);function sT(n){if(!gn(n).activated)throw Or.create("use-before-activation",{appName:n.name})}function aT(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(v){throw Or.create("fetch-network-error",{originalErrorMessage:v?.message})}if(u.status!==200)throw Or.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(v){throw Or.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Or.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function cT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${$F}/projects/${t}/apps/${r}:${HF}?key=${i}`,body:{debug_token:e}}}var GF="firebase-app-check-database",WF=1,Nm="firebase-app-check-store";var fd=null;function KF(){return fd||(fd=new Promise((n,e)=>{try{let t=indexedDB.open(GF,WF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Or.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Nm,{keyPath:"compositeKey"})}}}catch(t){e(Or.create("storage-open",{originalErrorMessage:t?.message}))}}),fd)}function QF(n,e){return ZF(YF(n),e)}function ZF(n,e){return M(this,null,function*(){let r=(yield KF()).transaction(Nm,"readwrite"),o=r.objectStore(Nm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Or.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function YF(n){return`${n.options.appId}-${n.name}`}var Pm=new fu("@firebase/app-check");function Mm(n,e){return hu()?QF(n,e).catch(t=>{Pm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uT(){return oT().enabled}function lT(){return M(this,null,function*(){let n=oT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var JF={error:"UNKNOWN_ERROR"};function XF(n){return e_.encodeString(JSON.stringify(n),!1)}function km(n,e=!1){return M(this,null,function*(){let t=n.app;sT(t);let r=gn(t),i=r.token,o;if(i&&!oc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(oc(u)?i=u:yield Mm(t,void 0))}if(!e&&i&&oc(i))return{token:i.token};let s=!1;if(uT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=aT(cT(t,yield lT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Mm(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield gn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Pm.warn(u.message):Pm.error(u),o=u}let a;return i?o?oc(i)?a={token:i.token,internalError:o}:a=rT(o):(a={token:i.token},r.token=i,yield Mm(t,i)):a=rT(o),s&&rL(t,a),a})}function eL(n){return M(this,null,function*(){let e=n.app;sT(e);let{provider:t}=gn(e);if(uT()){let r=yield lT(),{token:i}=yield aT(cT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function tL(n,e,t,r){let{app:i}=n,o=gn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&oc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),nT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>nT(n))}function dT(n,e){let t=gn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nT(n){let{app:e}=n,t=gn(e),r=t.tokenRefresher;r||(r=nL(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function nL(n){let{app:e}=n;return new Rm(()=>M(this,null,function*(){let t=gn(e),r;if(t.token?r=yield km(n,!0):r=yield km(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tT.RETRIAL_MIN_WAIT,tT.RETRIAL_MAX_WAIT)}function rL(n,e){let t=gn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function oc(n){return n.expireTimeMillis-Date.now()>0}function rT(n){return{token:XF(JF),error:n}}var Om=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gn(this.app);for(let t of e)dT(this.app,t.next);return Promise.resolve()}};function iL(n,e){return new Om(n,e)}function oL(n){return{getToken:e=>km(n,e),getLimitedUseToken:()=>eL(n),addTokenListener:e=>tL(n,"INTERNAL",e),removeTokenListener:e=>dT(n.app,e)}}var sL="@firebase/app-check",aL="0.8.8";var cL="app-check",iT="app-check-internal";function uL(){ra(new si(cL,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return iL(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iT).initialize()})),ra(new si(iT,n=>{let e=n.getProvider("app-check").getImmediate();return oL(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),mr(sL,aL)}uL();var lL=["localhost","0.0.0.0","127.0.0.1"],Fq=typeof window<"u"&&lL.includes(window.location.hostname);var dL="firebase",hL="10.14.1";Vt.registerVersion(dL,hL,"app-compat");var fL=["ngOnDestroy"],pT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(fL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var pd=class{constructor(e){return e}},Ko=new W("angularfire2.app.options"),Qo=new W("angularfire2.app.name");function sc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Vt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Vt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;pL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new pd(s)}var pL=(n,...e)=>{Sg()&&typeof console<"u"&&console[n](...e)},gL={provide:pd,useFactory:sc,deps:[Ko,ge,[new wi,Qo]]},gT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ko,useValue:t},{provide:Qo,useValue:r}]}}constructor(t){Vt.registerVersion("angularfire",ic.full,"core"),Vt.registerVersion("angularfire",ic.full,"app-compat"),Vt.registerVersion("angular",xD.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Nt))};static \u0275mod=St({type:n});static \u0275inj=bt({providers:[gL]})}return n})();function gd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return mL(i,s)||(fT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${yL?" You may need to reload as Firebase is not HMR aware.":""}`),fT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function mL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var yL=typeof module<"u"&&!!module.hot,fT=(n,...e)=>{Sg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Fm=new W("angularfire2.auth.use-emulator"),Lm=new W("angularfire2.auth.settings"),Vm=new W("angularfire2.auth.tenant-id"),Um=new W("angularfire2.auth.langugage-code"),jm=new W("angularfire2.auth.use-device-language"),Bm=new W("angularfire.auth.persistence"),$m=(n,e,t,r,i,o,s,a)=>gd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),mT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,v){let b=new ze,R=X(void 0).pipe(zt(s.outsideAngular),He(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),G(()=>sc(t,o,r)),G(N=>$m(N,o,a,l,h,p,u,m)),Ou({bufferSize:1,refCount:!1}));if(Ci(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{R.pipe(Gt()).subscribe();let N=R.pipe(He(F=>F.getRedirectResult().then(Y=>Y,()=>null)),kt,Ou({bufferSize:1,refCount:!1})),j=R.pipe(He(F=>new fe(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))})))),q=R.pipe(He(F=>new fe(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))}))));this.authState=N.pipe(Fu(j),an(s.outsideAngular),zt(s.insideAngular)),this.user=N.pipe(Fu(q),an(s.outsideAngular),zt(s.insideAngular)),this.idToken=this.user.pipe(He(F=>F?De(F.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(He(F=>F?De(F.getIdTokenResult()):X(null))),this.credential=Uf(N,b,this.authState.pipe(lt(F=>!F))).pipe(G(F=>F?.user?F:null),an(s.outsideAngular),zt(s.insideAngular))}return pT(this,R,o,{spy:{apply:(N,j,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Ko),O(Qo,8),O(Nt),O(ge),O(hd),O(Fm,8),O(Lm,8),O(Vm,8),O(Um,8),O(jm,8),O(Bm,8),O(Ai,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var yT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vT={};var Fr,Hm;(function(){var n;function e(I,y){function _(){}_.prototype=y.prototype,I.D=y.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,D,T){for(var w=Array(arguments.length-2),$n=2;$n<arguments.length;$n++)w[$n-2]=arguments[$n];return y.prototype[D].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=I.g[0],_=I.g[1],D=I.g[2];var T=I.g[3],w=y+(T^_&(D^T))+E[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=T+(D^y&(_^D))+E[1]+3905402710&4294967295,T=y+(w<<12&4294967295|w>>>20),w=D+(_^T&(y^_))+E[2]+606105819&4294967295,D=T+(w<<17&4294967295|w>>>15),w=_+(y^D&(T^y))+E[3]+3250441966&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(T^_&(D^T))+E[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=T+(D^y&(_^D))+E[5]+1200080426&4294967295,T=y+(w<<12&4294967295|w>>>20),w=D+(_^T&(y^_))+E[6]+2821735955&4294967295,D=T+(w<<17&4294967295|w>>>15),w=_+(y^D&(T^y))+E[7]+4249261313&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(T^_&(D^T))+E[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=T+(D^y&(_^D))+E[9]+2336552879&4294967295,T=y+(w<<12&4294967295|w>>>20),w=D+(_^T&(y^_))+E[10]+4294925233&4294967295,D=T+(w<<17&4294967295|w>>>15),w=_+(y^D&(T^y))+E[11]+2304563134&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(T^_&(D^T))+E[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=T+(D^y&(_^D))+E[13]+4254626195&4294967295,T=y+(w<<12&4294967295|w>>>20),w=D+(_^T&(y^_))+E[14]+2792965006&4294967295,D=T+(w<<17&4294967295|w>>>15),w=_+(y^D&(T^y))+E[15]+1236535329&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(D^T&(_^D))+E[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=T+(_^D&(y^_))+E[6]+3225465664&4294967295,T=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(T^y))+E[11]+643717713&4294967295,D=T+(w<<14&4294967295|w>>>18),w=_+(T^y&(D^T))+E[0]+3921069994&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^T&(_^D))+E[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=T+(_^D&(y^_))+E[10]+38016083&4294967295,T=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(T^y))+E[15]+3634488961&4294967295,D=T+(w<<14&4294967295|w>>>18),w=_+(T^y&(D^T))+E[4]+3889429448&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^T&(_^D))+E[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=T+(_^D&(y^_))+E[14]+3275163606&4294967295,T=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(T^y))+E[3]+4107603335&4294967295,D=T+(w<<14&4294967295|w>>>18),w=_+(T^y&(D^T))+E[8]+1163531501&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^T&(_^D))+E[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=T+(_^D&(y^_))+E[2]+4243563512&4294967295,T=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(T^y))+E[7]+1735328473&4294967295,D=T+(w<<14&4294967295|w>>>18),w=_+(T^y&(D^T))+E[12]+2368359562&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(_^D^T)+E[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=T+(y^_^D)+E[8]+2272392833&4294967295,T=y+(w<<11&4294967295|w>>>21),w=D+(T^y^_)+E[11]+1839030562&4294967295,D=T+(w<<16&4294967295|w>>>16),w=_+(D^T^y)+E[14]+4259657740&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^T)+E[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=T+(y^_^D)+E[4]+1272893353&4294967295,T=y+(w<<11&4294967295|w>>>21),w=D+(T^y^_)+E[7]+4139469664&4294967295,D=T+(w<<16&4294967295|w>>>16),w=_+(D^T^y)+E[10]+3200236656&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^T)+E[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=T+(y^_^D)+E[0]+3936430074&4294967295,T=y+(w<<11&4294967295|w>>>21),w=D+(T^y^_)+E[3]+3572445317&4294967295,D=T+(w<<16&4294967295|w>>>16),w=_+(D^T^y)+E[6]+76029189&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^T)+E[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=T+(y^_^D)+E[12]+3873151461&4294967295,T=y+(w<<11&4294967295|w>>>21),w=D+(T^y^_)+E[15]+530742520&4294967295,D=T+(w<<16&4294967295|w>>>16),w=_+(D^T^y)+E[2]+3299628645&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(D^(_|~T))+E[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=T+(_^(y|~D))+E[7]+1126891415&4294967295,T=y+(w<<10&4294967295|w>>>22),w=D+(y^(T|~_))+E[14]+2878612391&4294967295,D=T+(w<<15&4294967295|w>>>17),w=_+(T^(D|~y))+E[5]+4237533241&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~T))+E[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=T+(_^(y|~D))+E[3]+2399980690&4294967295,T=y+(w<<10&4294967295|w>>>22),w=D+(y^(T|~_))+E[10]+4293915773&4294967295,D=T+(w<<15&4294967295|w>>>17),w=_+(T^(D|~y))+E[1]+2240044497&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~T))+E[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=T+(_^(y|~D))+E[15]+4264355552&4294967295,T=y+(w<<10&4294967295|w>>>22),w=D+(y^(T|~_))+E[6]+2734768916&4294967295,D=T+(w<<15&4294967295|w>>>17),w=_+(T^(D|~y))+E[13]+1309151649&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~T))+E[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=T+(_^(y|~D))+E[11]+3174756917&4294967295,T=y+(w<<10&4294967295|w>>>22),w=D+(y^(T|~_))+E[2]+718787259&4294967295,D=T+(w<<15&4294967295|w>>>17),w=_+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var _=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=_;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var _=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=_&255,_/=256;for(this.u(I),I=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)I[_++]=this.g[y]>>>E&255;return I};function o(I,y){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=y(I)}function s(I,y){this.h=y;for(var _=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(_[D]=T,E=!1)}this.g=_}var a={};function u(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],_=1,E=0;I>=_;E++)y[E]=I/_|0,_*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),w=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=u(0),m=u(1),v=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();for(var I=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(R(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),_=this,E="";;){var D=Y(_,y).g;_=j(_,D.j(y));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=D,b(_))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=j(this,I),R(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,_=[],E=0;E<y;E++)_[E]=~I.g[E];return new s(_,~I.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),w=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=w>>>16,T&=65535,w&=65535,_[D]=w<<16|T}return new s(_,_[_.length-1]&-2147483648?-1:0)};function j(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(R(this))return R(I)?N(this).j(N(I)):N(N(this).j(I));if(R(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,w=this.i(E)&65535,$n=I.i(D)>>>16,Ls=I.i(D)&65535;_[2*E+2*D]+=w*Ls,q(_,2*E+2*D),_[2*E+2*D+1]+=T*Ls,q(_,2*E+2*D+1),_[2*E+2*D+1]+=w*$n,q(_,2*E+2*D+1),_[2*E+2*D+2]+=T*$n,q(_,2*E+2*D+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new s(_,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function Y(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(R(I))return y=Y(N(I),y),new F(N(y.g),N(y.h));if(R(y))return y=Y(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(R(I)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(I);)_=ee(_),E=ee(E);var D=J(_,1),T=J(E,1);for(E=J(E,2),_=J(_,2);!b(E);){var w=T.add(E);0>=w.l(I)&&(D=D.add(_),T=w),E=J(E,1),_=J(_,1)}return y=j(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(_=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(_),w=T.j(y);R(w)||0<w.l(I);)_-=E,T=l(_),w=T.j(y);b(T)&&(T=m),D=D.add(T),I=j(I,w)}return new F(D,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&I.i(E);return new s(_,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|I.i(E);return new s(_,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^I.i(E);return new s(_,this.h^I.h)};function ee(I){for(var y=I.g.length+1,_=[],E=0;E<y;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(_,I.h)}function J(I,y){var _=y>>5;y%=32;for(var E=I.g.length-_,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+_)>>>y|I.i(T+_+1)<<32-y:I.i(T+_);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Hm=vT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Fr=vT.Integer=s}).apply(typeof yT<"u"?yT:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={};var qm,wL,Zo,zm,ac,yd,Gm,Wm,Km;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var L=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)L[Se-2]=arguments[Se];return d.prototype[C].apply(g,L)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let L=0;L<A;L++)c[C+L]=g[L]}else c.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Y(c){return Y[" "](c),c}Y[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function J(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function I(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function w(){var c=$h;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class $n{constructor(){this.h=this.g=null}add(d,f){let g=Ls.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ls=new j(()=>new fx,c=>c.reset());class fx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Vs,Us=!1,$h=new $n,Zw=()=>{let c=a.Promise.resolve(void 0);Vs=()=>{c.then(px)}};var px=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){T(f)}var d=Ls;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Us=!1};function hr(){this.s=this.s,this.C=this.C}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var gx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function js(c,d){if(ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ee){e:{try{Y(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:mx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&js.aa.h.call(this)}}b(js,ft);var mx={2:"touch",3:"pen",4:"mouse"};js.prototype.h=function(){js.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Bs="closure_listenable_"+(1e6*Math.random()|0),yx=0;function vx(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++yx,this.da=this.fa=!1}function Kc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Qc(c){this.src=c,this.g={},this.h=0}Qc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var L=qh(c,d,g,C);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new vx(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Hh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Kc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function qh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var zh="closure_lm_"+(1e6*Math.random()|0),Gh={};function Yw(c,d,f,g,C){if(g&&g.once)return Xw(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Yw(c,d[A],f,g,C);return null}return f=Zh(f),c&&c[Bs]?c.K(d,f,l(g)?!!g.capture:!!g,C):Jw(c,d,f,!1,g,C)}function Jw(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Se=Kh(c);if(Se||(c[zh]=Se=new Qc(c)),f=Se.add(d,f,g,L,A),f.proxy)return f;if(g=wx(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)gx||(C=L),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(t0(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function wx(){function c(f){return d.call(c.src,c.listener,f)}let d=_x;return c}function Xw(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Xw(c,d[A],f,g,C);return null}return f=Zh(f),c&&c[Bs]?c.L(d,f,l(g)?!!g.capture:!!g,C):Jw(c,d,f,!0,g,C)}function e0(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)e0(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Zh(f),c&&c[Bs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=qh(A,f,g,C),-1<f&&(Kc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Kh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=qh(d,f,g,C)),(f=-1<c?d[c]:null)&&Wh(f))}function Wh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Bs])Hh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(t0(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Kh(d))?(Hh(f,c),f.h==0&&(f.src=null,d[zh]=null)):Kc(c)}}}function t0(c){return c in Gh?Gh[c]:Gh[c]="on"+c}function _x(c,d){if(c.da)c=!0;else{d=new js(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Wh(c),c=f.call(g,d)}return c}function Kh(c){return c=c[zh],c instanceof Qc?c:null}var Qh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zh(c){return typeof c=="function"?c:(c[Qh]||(c[Qh]=function(d){return c.handleEvent(d)}),c[Qh])}function pt(){hr.call(this),this.i=new Qc(this),this.M=this,this.F=null}b(pt,hr),pt.prototype[Bs]=!0,pt.prototype.removeEventListener=function(c,d,f,g){e0(this,c,d,f,g)};function wt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ft(d,c);else if(d instanceof ft)d.target=d.target||c;else{var C=d;d=new ft(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Zc(L,g,!0,d)&&C}if(L=d.g=c,C=Zc(L,g,!0,d)&&C,C=Zc(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Zc(L,g,!1,d)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Kc(f[g]);delete c.g[d],c.h--}}this.F=null},pt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},pt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Zc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Se=L.listener,ct=L.ha||L.src;L.fa&&Hh(c.i,L),C=Se.call(ct,g)!==!1&&C}}return C&&!g.defaultPrevented}function n0(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function r0(c){c.g=n0(()=>{c.g=null,c.i&&(c.i=!1,r0(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Ix extends hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:r0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(c){hr.call(this),this.h=c,this.g={}}b($s,hr);var i0=[];function o0(c){J(c.g,function(d,f){this.g.hasOwnProperty(f)&&Wh(d)},c),c.g={}}$s.prototype.N=function(){$s.aa.N.call(this),o0(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yh=a.JSON.stringify,Ex=a.JSON.parse,Dx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Jh(){}Jh.prototype.h=null;function s0(c){return c.h||(c.h=c.i())}function a0(){}var Hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xh(){ft.call(this,"d")}b(Xh,ft);function ef(){ft.call(this,"c")}b(ef,ft);var ni={},c0=null;function Yc(){return c0=c0||new pt}ni.La="serverreachability";function u0(c){ft.call(this,ni.La,c)}b(u0,ft);function qs(c){let d=Yc();wt(d,new u0(d))}ni.STAT_EVENT="statevent";function l0(c,d){ft.call(this,ni.STAT_EVENT,c),this.stat=d}b(l0,ft);function _t(c){let d=Yc();wt(d,new l0(d,c))}ni.Ma="timingevent";function d0(c,d){ft.call(this,ni.Ma,c),this.size=d}b(d0,ft);function zs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Gs(){this.g=!0}Gs.prototype.xa=function(){this.g=!1};function Cx(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var L="",Se=A.split("&"),ct=0;ct<Se.length;ct++){var Ee=Se[ct].split("=");if(1<Ee.length){var gt=Ee[0];Ee=Ee[1];var mt=gt.split("_");L=2<=mt.length&&mt[1]=="type"?L+(gt+"="+Ee+"&"):L+(gt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function Tx(c,d,f,g,C,A,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function no(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Sx(c,f)+(g?" "+g:"")})}function bx(c,d){c.info(function(){return"TIMEOUT: "+d})}Gs.prototype.info=function(){};function Sx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Yh(f)}catch{return d}}var Jc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},h0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tf;function Xc(){}b(Xc,Jh),Xc.prototype.g=function(){return new XMLHttpRequest},Xc.prototype.i=function(){return{}},tf=new Xc;function fr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new $s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new f0}function f0(){this.i=null,this.g="",this.h=!1}var p0={},nf={};function rf(c,d,f){c.L=1,c.v=ru(Hn(d)),c.m=f,c.P=!0,g0(c,null)}function g0(c,d){c.F=Date.now(),eu(c),c.A=Hn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),x0(f.i,"t",g),c.C=0,f=c.j.J,c.h=new f0,c.g=W0(c.j,f?d:null,!c.m),0<c.O&&(c.M=new Ix(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(i0[0]=C.toString()),C=i0);for(var A=0;A<C.length;A++){var L=Yw(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),qs(),Cx(c.i,c.u,c.A,c.l,c.R,c.m)}fr.prototype.ca=function(c){c=c.target;let d=this.M;d&&qn(c)==3?d.j():this.Y(c)},fr.prototype.Y=function(c){try{if(c==this.g)e:{let mt=qn(this.g);var d=this.g.Ba();let oo=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||F0(this.g)))){this.J||mt!=4||d==7||(d==8||0>=oo?qs(3):qs(2)),of(this);var f=this.g.Z();this.X=f;t:if(m0(this)){var g=F0(this.g);c="";var C=g.length,A=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),Ws(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,Tx(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ct=this.g;if((Se=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Se)){var Ee=Se;break t}}Ee=null}if(f=Ee)no(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sf(this,f);else{this.o=!1,this.s=3,_t(12),ri(this),Ws(this);break e}}if(this.P){f=!0;let on;for(;!this.J&&this.C<L.length;)if(on=Ax(this,L),on==nf){mt==4&&(this.s=4,_t(14),f=!1),no(this.i,this.l,null,"[Incomplete Response]");break}else if(on==p0){this.s=4,_t(15),no(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else no(this.i,this.l,on,null),sf(this,on);if(m0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||L.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)no(this.i,this.l,L,"[Invalid Chunked Response]"),ri(this),Ws(this);else if(0<L.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),hf(gt),gt.M=!0,_t(11))}}else no(this.i,this.l,L,null),sf(this,L);mt==4&&ri(this),this.o&&!this.J&&(mt==4?H0(this.j,this):(this.o=!1,eu(this)))}else zx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),ri(this),Ws(this)}}}catch{}finally{}};function m0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ax(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?nf:(f=Number(d.substring(f,g)),isNaN(f)?p0:(g+=1,g+f>d.length?nf:(d=d.slice(g,g+f),c.C=g+f,d)))}fr.prototype.cancel=function(){this.J=!0,ri(this)};function eu(c){c.S=Date.now()+c.I,y0(c,c.I)}function y0(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=zs(m(c.ba,c),d)}function of(c){c.B&&(a.clearTimeout(c.B),c.B=null)}fr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(bx(this.i,this.A),this.L!=2&&(qs(),_t(17)),ri(this),this.s=2,Ws(this)):y0(this,this.S-c)};function Ws(c){c.j.G==0||c.J||H0(c.j,c)}function ri(c){of(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,o0(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function sf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||af(f.h,c))){if(!c.K&&af(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)cu(f),su(f);else break e;df(f),_t(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=zs(m(f.Za,f),6e3));if(1>=_0(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else oi(f,11)}else if((c.K||f.g==c)&&cu(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ee=C[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let gt=Ee[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=Ee[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let oo=Ee[5];oo!=null&&typeof oo=="number"&&0<oo&&(g=1.5*oo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let on=c.g;if(on){let lu=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lu){var A=g.h;A.g||lu.indexOf("spdy")==-1&&lu.indexOf("quic")==-1&&lu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(cf(A,A.h),A.h=null))}if(g.D){let ff=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;ff&&(g.ya=ff,Ne(g.I,g.D,ff))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=G0(g,g.J?g.ia:null,g.W),L.K){I0(g.h,L);var Se=L,ct=g.L;ct&&(Se.I=ct),Se.B&&(of(Se),eu(Se)),g.g=L}else B0(g);0<f.i.length&&au(f)}else Ee[0]!="stop"&&Ee[0]!="close"||oi(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?oi(f,7):lf(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}qs(4)}catch{}}var xx=class{constructor(c,d){this.g=c,this.map=d}};function v0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function w0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _0(c){return c.h?1:c.g?c.g.size:0}function af(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function cf(c,d){c.g?c.g.add(d):c.h=d}function I0(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}v0.prototype.cancel=function(){if(this.i=E0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function E0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function Mx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Rx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function D0(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Rx(c),g=Mx(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var C0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ii(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ii){this.h=c.h,tu(this,c.j),this.o=c.o,this.g=c.g,nu(this,c.s),this.l=c.l;var d=c.i,f=new Zs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),T0(this,f),this.m=c.m}else c&&(d=String(c).match(C0))?(this.h=!1,tu(this,d[1]||"",!0),this.o=Ks(d[2]||""),this.g=Ks(d[3]||"",!0),nu(this,d[4]),this.l=Ks(d[5]||"",!0),T0(this,d[6]||"",!0),this.m=Ks(d[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}ii.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Qs(d,b0,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Qs(d,b0,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Qs(f,f.charAt(0)=="/"?Ox:kx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Qs(f,Lx)),c.join("")};function Hn(c){return new ii(c)}function tu(c,d,f){c.j=f?Ks(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function nu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function T0(c,d,f){d instanceof Zs?(c.i=d,Vx(c.i,c.h)):(f||(d=Qs(d,Fx)),c.i=new Zs(d,c.h))}function Ne(c,d,f){c.i.set(d,f)}function ru(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ks(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Px),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Px(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var b0=/[#\/\?@]/g,kx=/[#\?:]/g,Ox=/[#\?]/g,Fx=/[#\?@]/g,Lx=/#/g;function Zs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function pr(c){c.g||(c.g=new Map,c.h=0,c.i&&Nx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Zs.prototype,n.add=function(c,d){pr(this),this.i=null,c=ro(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function S0(c,d){pr(c),d=ro(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function A0(c,d){return pr(c),d=ro(c,d),c.g.has(d)}n.forEach=function(c,d){pr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){pr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(c){pr(this);let d=[];if(typeof c=="string")A0(this,c)&&(d=d.concat(this.g.get(ro(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return pr(this),this.i=null,c=ro(this,c),A0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function x0(c,d,f){S0(c,d),0<f.length&&(c.i=null,c.g.set(ro(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),c.push(C)}}return this.i=c.join("&")};function ro(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Vx(c,d){d&&!c.j&&(pr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(S0(this,g),x0(this,C,f))},c)),c.j=d}function Ux(c,d){let f=new Gs;if(a.Image){let g=new Image;g.onload=v(gr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(gr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(gr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(gr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function jx(c,d){let f=new Gs,g=new AbortController,C=setTimeout(()=>{g.abort(),gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?gr(f,"TestPingServer: ok",!0,d):gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),gr(f,"TestPingServer: error",!1,d)})}function gr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function Bx(){this.g=new Dx}function $x(c,d,f){let g=f||"";try{D0(c,function(C,A){let L=C;l(C)&&(L=Yh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Ys(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ys,Jh),Ys.prototype.g=function(){return new iu(this.l,this.j)},Ys.prototype.i=function(c){return function(){return c}}({});function iu(c,d){pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(iu,pt),n=iu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Xs(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;M0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function M0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Js(this):Xs(this),this.readyState==3&&M0(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Js(this))},n.Qa=function(c){this.g&&(this.response=c,Js(this))},n.ga=function(){this.g&&Js(this)};function Js(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Xs(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Xs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function R0(c){let d="";return J(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function uf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=R0(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ne(c,d,f))}function Be(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Be,pt);var Hx=/^https?$/i,qx=["POST","PUT"];n=Be.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tf.g(),this.v=this.o?s0(this.o):s0(tf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){N0(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qx,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{O0(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){N0(this,A)}};function N0(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,P0(c),ou(c)}function P0(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),ou(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ou(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?k0(this):this.bb())},n.bb=function(){k0(this)};function k0(c){if(c.h&&typeof s<"u"&&(!c.v[1]||qn(c)!=4||c.Z()!=2)){if(c.u&&qn(c)==4)n0(c.Ea,0,c);else if(wt(c,"readystatechange"),qn(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(c.D).match(C0)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!Hx.test(C?C.toLowerCase():"")}f=g}if(f)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var A=2<qn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",P0(c)}}finally{ou(c)}}}}function ou(c,d){if(c.g){O0(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||wt(c,"ready");try{f.onreadystatechange=g}catch{}}}function O0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function qn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Ex(d)}};function F0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function zx(c){let d={};c=(c.g&&2<=qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function L0(c){this.Aa=0,this.i=[],this.j=new Gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,c),this.cb=ea("retryDelaySeedMs",1e4,c),this.Wa=ea("forwardChannelMaxRetries",2,c),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new v0(c&&c.concurrentRequestLimit),this.Da=new Bx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=L0.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){_t(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=G0(this,null,this.W),au(this)};function lf(c){if(V0(c),c.G==3){var d=c.U++,f=Hn(c.I);if(Ne(f,"SID",c.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),ta(c,f),d=new fr(c,c.j,d),d.L=2,d.v=ru(Hn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=W0(d.j,null),d.g.ea(d.v)),d.F=Date.now(),eu(d)}z0(c)}function su(c){c.g&&(hf(c),c.g.cancel(),c.g=null)}function V0(c){su(c),c.u&&(a.clearTimeout(c.u),c.u=null),cu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function au(c){if(!w0(c.h)&&!c.s){c.s=!0;var d=c.Ga;Vs||Zw(),Us||(Vs(),Us=!0),$h.add(d,c),c.B=0}}function Gx(c,d){return _0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=zs(m(c.Ga,c,d),q0(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new fr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=j0(this,C,d),f=Hn(this.I),Ne(f,"RID",c),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),ta(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(R0(A)))+"&"+d:this.m&&uf(f,this.m,A)),cf(this.h,C),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),C.T=!0,rf(C,f,null)):rf(C,f,d),this.G=2}}else this.G==3&&(c?U0(this,c):this.i.length==0||w0(this.h)||U0(this))};function U0(c,d){var f;d?f=d.l:f=c.U++;let g=Hn(c.I);Ne(g,"SID",c.K),Ne(g,"RID",f),Ne(g,"AID",c.T),ta(c,g),c.m&&c.o&&uf(g,c.m,c.o),f=new fr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=j0(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),cf(c.h,f),rf(f,g,d)}function ta(c,d){c.H&&J(c.H,function(f,g){Ne(d,g,f)}),c.l&&D0({},function(f,g){Ne(d,g,f)})}function j0(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Se=!0;for(let ct=0;ct<f;ct++){let Ee=C[ct].g,gt=C[ct].map;if(Ee-=A,0>Ee)A=Math.max(0,C[ct].g-100),Se=!1;else try{$x(gt,L,"req"+Ee+"_")}catch{g&&g(gt)}}if(Se){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function B0(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Vs||Zw(),Us||(Vs(),Us=!0),$h.add(d,c),c.v=0}}function df(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=zs(m(c.Fa,c),q0(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,$0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=zs(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),su(this),$0(this))};function hf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function $0(c){c.g=new fr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Hn(c.qa);Ne(d,"RID","rpc"),Ne(d,"SID",c.K),Ne(d,"AID",c.T),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(d,"TO",c.ja),Ne(d,"TYPE","xmlhttp"),ta(c,d),c.m&&c.o&&uf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=ru(Hn(d)),f.m=null,f.P=!0,g0(f,c)}n.Za=function(){this.C!=null&&(this.C=null,su(this),df(this),_t(19))};function cu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function H0(c,d){var f=null;if(c.g==d){cu(c),hf(c),c.g=null;var g=2}else if(af(c.h,d))f=d.D,I0(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Yc(),wt(g,new d0(g,f)),au(c)}else B0(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&Gx(c,d)||g==2&&df(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:oi(c,5);break;case 4:oi(c,10);break;case 3:oi(c,6);break;default:oi(c,2)}}}function q0(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function oi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new ii(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tu(g,"https"),ru(g),C?Ux(g.toString(),f):jx(g.toString(),f)}else _t(2);c.G=0,c.l&&c.l.sa(d),z0(c),V0(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function z0(c){if(c.G=0,c.ka=[],c.l){let d=E0(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function G0(c,d,f){var g=f instanceof ii?Hn(f):new ii(f);if(g.g!="")d&&(g.g=d+"."+g.g),nu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ii(null);g&&tu(A,g),d&&(A.g=d),C&&nu(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ne(g,f,d),Ne(g,"VER",c.la),ta(c,g),g}function W0(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Be(new Ys({eb:f})):new Be(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function K0(){}n=K0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function uu(){}uu.prototype.g=function(c,d){return new Lt(c,d)};function Lt(c,d){pt.call(this),this.g=new L0(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new io(this)}b(Lt,pt),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){lf(this.g)},Lt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Yh(c),c=f);d.i.push(new xx(d.Ya++,c)),d.G==3&&au(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,lf(this.g),delete this.g,Lt.aa.N.call(this)};function Q0(c){Xh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(Q0,Xh);function Z0(){ef.call(this),this.status=1}b(Z0,ef);function io(c){this.g=c}b(io,K0),io.prototype.ua=function(){wt(this.g,"a")},io.prototype.ta=function(c){wt(this.g,new Q0(c))},io.prototype.sa=function(c){wt(this.g,new Z0)},io.prototype.ra=function(){wt(this.g,"b")},uu.prototype.createWebChannel=uu.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Km=nr.createWebChannelTransport=function(){return new uu},Wm=nr.getStatEventTarget=function(){return Yc()},Gm=nr.Event=ni,yd=nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jc.NO_ERROR=0,Jc.TIMEOUT=8,Jc.HTTP_ERROR=6,ac=nr.ErrorCode=Jc,h0.COMPLETE="complete",zm=nr.EventType=h0,a0.EventType=Hs,Hs.OPEN="a",Hs.CLOSE="b",Hs.ERROR="c",Hs.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Zo=nr.WebChannel=a0,wL=nr.FetchXmlHttpFactory=Ys,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,qm=nr.XhrIo=Be}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});var wT="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Ss="10.14.0";var Hr=new fu("@firebase/firestore");function ts(){return Hr.logLevel}function Eb(n){Hr.setLogLevel(n)}function k(n,...e){if(Hr.logLevel<=In.DEBUG){let t=e.map(Xv);Hr.debug(`Firestore (${Ss}): ${n}`,...t)}}function We(n,...e){if(Hr.logLevel<=In.ERROR){let t=e.map(Xv);Hr.error(`Firestore (${Ss}): ${n}`,...t)}}function mn(n,...e){if(Hr.logLevel<=In.WARN){let t=e.map(Xv);Hr.warn(`Firestore (${Ss}): ${n}`,...t)}}function Xv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Ss}) INTERNAL ASSERTION FAILED: `+n;throw We(e),new Error(e)}function K(n,e){n||z()}function Db(n,e){n||z()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends n_{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Sd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ey=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},ty=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ny=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>M(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Sd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new et(e)}},ry=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},iy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ry(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},oy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},sy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new oy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function _L(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ad=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=_L(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function ls(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Cb(n){return n+"\0"}var Ue=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ue(0,0))}static max(){return new n(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends xd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},IL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ke=class n extends xd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return IL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var ds=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function ay(n){return n.fields.find(e=>e.kind===2)}function Mi(n){return n.fields.filter(e=>e.kind!==2)}ds.UNKNOWN_ID=-1;var as=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var wc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,nn.min())}};function Tb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Ue(t+1,0):new Ue(t,r));return new nn(i,$.empty(),e)}function bb(n){return new nn(n.readTime,n.key,-1)}var nn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),$.empty(),-1)}static max(){return new n(Q.max(),$.empty(),-1)}};function ew(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var Sb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Md=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xr(n){return M(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==Sb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Rd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Fi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=tw(r.target.error);this.V.reject(new Fi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Fi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new uy(t)}},qr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(na())===12.2&&We("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Ri(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hu())return!1;if(n.v())return!0;let e=na(),t=n.S(e),r=0<t&&t<10,i=Ab(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Fi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Fi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Rd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Ab(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var cy=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ri(this.B.delete())}},Fi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ei(n){return n.name==="IndexedDbTransactionError"}var uy=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ri(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Ri(this.store.add(e))}get(e){return Ri(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Ri(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Ri(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=tw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new cy(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ri(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=tw(r.target.error);t(i)}})}var _T=!1;function tw(n){let e=qr.S(na());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _T||(_T=!0,setTimeout(()=>{throw r},0)),r}}return n}var ly=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ei(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Xr(t)}yield this.X(6e4)}))}},dy=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=bb(o);ew(s,r)>0&&(r=s)}),new nn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Ht=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function jc(n){return n==null}function _c(n){return n===0&&1/n==-1/0}function xb(n){return typeof n=="number"&&Number.isInteger(n)&&!_c(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function At(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IT(e)),e=EL(n.get(t),e);return IT(e)}function EL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function IT(n){return n+""}function Nn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ve(r)}var ET=["userId","batchId"];function Ed(n,e){return[n,At(e)]}function Mb(n,e,t){return[n,At(e),t]}var DL={},CL=["prefixPath","collectionGroup","readTime","documentId"],TL=["prefixPath","collectionGroup","documentId"],bL=["collectionGroup","readTime","prefixPath","documentId"],SL=["canonicalId","targetId"],AL=["targetId","path"],xL=["path","targetId"],ML=["collectionId","parent"],RL=["indexId","uid"],NL=["uid","sequenceNumber"],PL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kL=["indexId","uid","orderedDocumentKey"],OL=["userId","collectionPath","documentId"],FL=["userId","collectionPath","largestBatchId"],LL=["userId","collectionGroup","largestBatchId"],Rb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],VL=[...Rb,"documentOverlays"],Nb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pb=Nb,nw=[...Pb,"indexConfiguration","indexState","indexEntries"],UL=nw,jL=[...nw,"globals"];var Ic=class extends Md{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function it(n,e){let t=B(n);return qr.F(t._e,e)}function DT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ki(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ss(this.root,e,this.comparator,!0)}},ss=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},kn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nd(this.data.getIterator())}getIteratorFrom(e){return new Nd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Nd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Yo(n){return n.hasNext()?n.getNext():void 0}var qt=class n{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new n([])}unionWith(e){let t=new xe(Ke.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ls(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Pd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Ob(){return typeof atob<"u"}var Ze=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var BL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(n){if(K(!!n),typeof n=="string"){let e=0,t=BL.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zr(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}function Ch(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function rw(n){let e=n.mapValue.fields.__previous_value__;return Ch(e)?rw(e):e}function Ec(n){let e=or(n.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}var hy=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Gr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dd={nullValue:"NULL_VALUE"};function Li(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ch(n)?4:Fb(n)?9007199254740991:Th(n)?10:11:z()}function Ln(n,e){if(n===e)return!0;let t=Li(n);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ec(n).isEqual(Ec(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),a=or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return zr(i.bytesValue).isEqual(zr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?_c(s)===_c(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ls(n.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(DT(s)!==DT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Ln(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function Dc(n,e){return(n.values||[]).find(t=>Ln(t,e))!==void 0}function Wr(n,e){if(n===e)return 0;let t=Li(n),r=Li(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),u=Oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return CT(n.timestampValue,e.timestampValue);case 4:return CT(Ec(n),Ec(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=zr(o),u=zr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=oe(a[l],u[l]);if(h!==0)return h}return oe(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(Oe(o.latitude),Oe(s.latitude));return a!==0?a:oe(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return TT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,R=oe(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:TT(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Br.mapValue&&s===Br.mapValue)return 0;if(o===Br.mapValue)return 1;if(s===Br.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=oe(u[p],h[p]);if(m!==0)return m;let v=Wr(a[u[p]],l[h[p]]);if(v!==0)return v}return oe(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function CT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=or(n),r=or(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function TT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Wr(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function hs(n){return fy(n)}function fy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=or(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return zr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=fy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${fy(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Vi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function py(n){return!!n&&"integerValue"in n}function Cc(n){return!!n&&"arrayValue"in n}function bT(n){return!!n&&"nullValue"in n}function ST(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cd(n){return!!n&&"mapValue"in n}function Th(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ki(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Fb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Lb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function $L(n){return"nullValue"in n?Dd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vi(Gr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Th(n)?Lb:{mapValue:{}}:z()}function HL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vi(Gr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Lb:"mapValue"in n?Th(n)?{mapValue:{}}:Br:z()}function AT(n,e){let t=Wr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xT(n,e){let t=Wr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(t)}setAll(e){let t=Ke.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=pc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Cd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Cd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ki(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(pc(this.value))}};function Vb(n){let e=[];return Ki(n.fields,(t,r)=>{let i=new Ke([t]);if(Cd(r)){let o=Vb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new qt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vn=class{constructor(e,t){this.position=e,this.inclusive=t}};function MT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Wr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function RT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ln(n.position[t],e.position[t]))return!1;return!0}var Ui=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function qL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var kd=class{},he=class n extends kd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yy(e,t,r):t==="array-contains"?new _y(e,r):t==="in"?new Od(e,r):t==="not-in"?new Iy(e,r):t==="array-contains-any"?new Ey(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vy(e,r):new wy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Wr(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(Wr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class n extends kd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return fs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function fs(n){return n.op==="and"}function gy(n){return n.op==="or"}function iw(n){return Ub(n)&&fs(n)}function Ub(n){for(let e of n.filters)if(e instanceof be)return!1;return!0}function my(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+hs(n.value);if(iw(n))return n.filters.map(e=>my(e)).join(",");{let e=n.filters.map(t=>my(t)).join(",");return`${n.op}(${e})`}}function jb(n,e){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&Ln(r.value,i.value)}(n,e):n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jb(s,i.filters[a]),!0):!1}(n,e):void z()}function Bb(n,e){let t=n.filters.concat(e);return be.create(t,n.op)}function $b(n){return n instanceof he?function(t){return`${t.field.canonicalString()} ${t.op} ${hs(t.value)}`}(n):n instanceof be?function(t){return t.op.toString()+" {"+t.getFilters().map($b).join(" ,")+"}"}(n):"Filter"}var yy=class extends he{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},vy=class extends he{constructor(e,t){super(e,"in",t),this.keys=Hb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wy=class extends he{constructor(e,t){super(e,"not-in",t),this.keys=Hb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Hb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var _y=class extends he{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Cc(t)&&Dc(t.arrayValue,this.value)}},Od=class extends he{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Dc(this.value.arrayValue,t)}},Iy=class extends he{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Dc(this.value.arrayValue,t)}},Ey=class extends he{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Cc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dc(this.value.arrayValue,r))}};var Dy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Cy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Dy(n,e,t,r,i,o,s)}function ji(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>my(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hs(r)).join(",")),e.ue=t}return e.ue}function Bc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RT(n.startAt,e.startAt)&&RT(n.endAt,e.endAt)}function Fd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ld(n,e){return n.filters.filter(t=>t instanceof he&&t.field.isEqual(e))}function NT(n,e,t){let r=Dd,i=!0;for(let o of Ld(n,e)){let s=Dd,a=!0;switch(o.op){case"<":case"<=":s=$L(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Dd}AT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];AT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function PT(n,e,t){let r=Br,i=!0;for(let o of Ld(n,e)){let s=Br,a=!0;switch(o.op){case">=":case">":s=HL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Br}xT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];xT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var yn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function qb(n,e,t,r,i,o,s,a){return new yn(n,e,t,r,i,o,s,a)}function As(n){return new yn(n)}function kT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ow(n){return n.collectionGroup!==null}function cs(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xe(Ke.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ui(o,r))}),t.has(Ke.keyField().canonicalString())||e.ce.push(new Ui(Ke.keyField(),r))}return e.ce}function xt(n){let e=B(n);return e.le||(e.le=zL(e,cs(n))),e.le}function zL(n,e){if(n.limitType==="F")return Cy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ui(i.field,o)});let t=n.endAt?new Vn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vn(n.startAt.position,n.startAt.inclusive):null;return Cy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ty(n,e){let t=n.filters.concat([e]);return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vd(n,e,t){return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $c(n,e){return Bc(xt(n),xt(e))&&n.limitType===e.limitType}function zb(n){return`${ji(xt(n))}|lt:${n.limitType}`}function ns(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$b(i)).join(", ")}]`),jc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hs(i)).join(",")),`Target(${r})`}(xt(n))}; limitType=${n.limitType})`}function Hc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of cs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=MT(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,cs(r),i)||r.endAt&&!function(s,a,u){let l=MT(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,cs(r),i))}(n,e)}function Gb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Wb(n){return(e,t)=>{let r=!1;for(let i of cs(n)){let o=GL(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function GL(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Wr(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Un=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ki(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return kb(this.inner)}size(){return this.innerSize}};var WL=new Pe($.comparator);function Ot(){return WL}var Kb=new Pe($.comparator);function hc(...n){let e=Kb;for(let t of n)e=e.insert(t.key,t);return e}function Qb(n){let e=Kb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Pn(){return gc()}function Zb(){return gc()}function gc(){return new Un(n=>n.toString(),(n,e)=>n.isEqual(e))}var KL=new Pe($.comparator),QL=new xe($.comparator);function se(...n){let e=QL;for(let t of n)e=e.add(t);return e}var ZL=new xe(oe);function sw(){return ZL}function aw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function Yb(n){return{integerValue:""+n}}function Jb(n,e){return xb(e)?Yb(e):aw(n,e)}var ps=class{constructor(){this._=void 0}};function YL(n,e,t){return n instanceof Kr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ch(o)&&(o=rw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof sr?eS(n,e):n instanceof ar?tS(n,e):function(i,o){let s=Xb(i,o),a=OT(s)+OT(i.Pe);return py(s)&&py(i.Pe)?Yb(a):aw(i.serializer,a)}(n,e)}function JL(n,e,t){return n instanceof sr?eS(n,e):n instanceof ar?tS(n,e):t}function Xb(n,e){return n instanceof Qr?function(r){return py(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Kr=class extends ps{},sr=class extends ps{constructor(e){super(),this.elements=e}};function eS(n,e){let t=nS(e);for(let r of n.elements)t.some(i=>Ln(i,r))||t.push(r);return{arrayValue:{values:t}}}var ar=class extends ps{constructor(e){super(),this.elements=e}};function tS(n,e){let t=nS(e);for(let r of n.elements)t=t.filter(i=>!Ln(i,r));return{arrayValue:{values:t}}}var Qr=class extends ps{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function OT(n){return Oe(n.integerValue||n.doubleValue)}function nS(n){return Cc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Bi=class{constructor(e,t){this.field=e,this.transform=t}};function XL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof sr&&i instanceof sr||r instanceof ar&&i instanceof ar?ls(r.elements,i.elements,Ln):r instanceof Qr&&i instanceof Qr?Ln(r.Pe,i.Pe):r instanceof Kr&&i instanceof Kr}(n.transform,e.transform)}var by=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Td(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var gs=class{};function rS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yr(n.key,qe.none()):new Zr(n.key,n.data,qe.none());{let t=n.data,r=vt.empty(),i=new xe(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vn(n.key,r,new qt(i.toArray()),qe.none())}}function e2(n,e,t){n instanceof Zr?function(i,o,s){let a=i.value.clone(),u=LT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof vn?function(i,o,s){if(!Td(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=LT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(iS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function mc(n,e,t,r){return n instanceof Zr?function(o,s,a,u){if(!Td(o.precondition,s))return a;let l=o.value.clone(),h=VT(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof vn?function(o,s,a,u){if(!Td(o.precondition,s))return a;let l=VT(o.fieldTransforms,u,s),h=s.data;return h.setAll(iS(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Td(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function t2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Xb(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function FT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ls(r,i,(o,s)=>XL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Zr=class extends gs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vn=class extends gs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function LT(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,JL(s,a,t[i]))}return r}function VT(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,YL(o,s,e))}return r}var Yr=class extends gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Tc=class extends gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var bc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&e2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=mc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=mc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Zb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=rS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&ls(this.mutations,e.mutations,(t,r)=>FT(t,r))&&ls(this.baseMutations,e.baseMutations,(t,r)=>FT(t,r))}},Sy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return KL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Sc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ay=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,ye;function oS(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function sS(n){if(n===void 0)return We("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(ye=Je||(Je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var UT=null;function aS(){return new TextEncoder}var n2=new Fr([4294967295,4294967295],0);function jT(n){let e=aS().encode(n),t=new Hm;return t.update(e),new Uint8Array(t.digest())}function BT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fr([t,r],0),new Fr([i,o],0)]}var xy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Oi(`Invalid padding: ${t}`);if(r<0)throw new Oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Oi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Fr.fromNumber(r)));return i.compare(n2)===1&&(i=new Fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=jT(e),[r,i]=BT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=jT(e),[r,i]=BT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Oi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ac=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new Pe(oe),Ot(),se())}},xc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var us=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ud=class{constructor(e,t){this.targetId=e,this.me=t}},jd=class{constructor(e,t,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Bd=class{constructor(){this.fe=0,this.ge=HT(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new xc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=HT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},My=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ot(),this.qe=$T(),this.Qe=new Pe(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Fd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,tt.newNoDocument(s,Q.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}UT?.et(function(h,p,m,v,b){var R,N,j,q,F,Y;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},J=p.unchangedNames;return J&&(ee.bloomFilter={applied:b===0,hashCount:(R=J?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(q=(j=(N=J?.bits)===null||N===void 0?void 0:N.bitmap)===null||j===void 0?void 0:j.length)!==null&&q!==void 0?q:0,padding:(Y=(F=J?.bits)===null||F===void 0?void 0:F.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=zr(r).toUint8Array()}catch(u){if(u instanceof Pd)return mn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new xy(s,i,o)}catch(u){return mn(u instanceof Oi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Fd(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,tt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=se();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ac(e,t,this.Qe,this.ke,r);return this.ke=Ot(),this.qe=$T(),this.Qe=new Pe(oe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Bd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xe(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function $T(){return new Pe($.comparator)}function HT(){return new Pe($.comparator)}var r2={asc:"ASCENDING",desc:"DESCENDING"},i2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o2={and:"AND",or:"OR"},Ry=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ny(n,e){return n.useProto3Json||jc(e)?e:{value:e}}function ms(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function s2(n,e){return ms(n,e.toTimestamp())}function Qe(n){return K(!!n),Q.fromTimestamp(function(t){let r=or(t);return new Ue(r.seconds,r.nanos)}(n))}function cw(n,e){return Py(n,e).canonicalString()}function Py(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function uS(n){let e=ve.fromString(n);return K(wS(e)),e}function Mc(n,e){return cw(n.databaseId,e.path)}function On(n,e){let t=uS(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(hS(t))}function lS(n,e){return cw(n.databaseId,e)}function dS(n){let e=uS(n);return e.length===4?ve.emptyPath():hS(e)}function ky(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hS(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function qT(n,e,t){return{name:Mc(n,e),fields:t.value.mapValue.fields}}function fS(n,e,t){let r=On(n,e.name),i=Qe(e.updateTime),o=e.createTime?Qe(e.createTime):Q.min(),s=new vt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function a2(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=On(r,i.found.name),s=Qe(i.found.updateTime),a=i.found.createTime?Qe(i.found.createTime):Q.min(),u=new vt({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=On(r,i.missing),s=Qe(i.readTime);return tt.newNoDocument(o,s)}(n,e):z()}function c2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Ze.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ze.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:sS(l.code);return new P(h,l.message||"")}(s);t=new jd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=On(n,r.document.name),o=Qe(r.document.updateTime),s=r.document.createTime?Qe(r.document.createTime):Q.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new us(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=On(n,r.document),o=r.readTime?Qe(r.readTime):Q.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new us([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=On(n,r.document),o=r.removedTargetIds||[];t=new us([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Ay(i,o),a=r.targetId;t=new Ud(a,s)}}return t}function Rc(n,e){let t;if(e instanceof Zr)t={update:qT(n,e.key,e.value)};else if(e instanceof Yr)t={delete:Mc(n,e.key)};else if(e instanceof vn)t={update:qT(n,e.key,e.data),updateMask:p2(e.fieldMask)};else{if(!(e instanceof Tc))return z();t={verify:Mc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:s2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function Oy(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(Qe(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),u=new Kr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new sr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new ar(h)}else"increment"in a?u=new Qr(s,a.increment):z();let l=Ke.fromServerFormat(a.fieldPath);return new Bi(l,u)}(n,i)):[];if(e.update){e.update.name;let i=On(n,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new qt(l.map(h=>Ke.fromServerFormat(h)))}(e.updateMask);return new vn(i,o,s,t,r)}return new Zr(i,o,t,r)}if(e.delete){let i=On(n,e.delete);return new Yr(i,t)}if(e.verify){let i=On(n,e.verify);return new Tc(i,t)}return z()}function u2(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Qe(i.updateTime):Qe(o);return s.isEqual(Q.min())&&(s=Qe(o)),new by(s,i.transformResults||[])}(t,e))):[]}function pS(n,e){return{documents:[lS(n,e.path)]}}function gS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lS(n,i);let o=function(l){if(l.length!==0)return vS(be.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:rs(m.field),direction:d2(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Ny(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function mS(n){let e=dS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=yS(p);return m instanceof be&&iw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Ui(is(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,jc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new Vn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Vn(v,m)}(t.endAt)),qb(e,i,s,o,a,"F",u,l)}function l2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=is(t.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=is(t.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=is(t.unaryFilter.field);return he.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=is(t.unaryFilter.field);return he.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return he.create(is(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return be.create(t.compositeFilter.filters.map(r=>yS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function d2(n){return r2[n]}function h2(n){return i2[n]}function f2(n){return o2[n]}function rs(n){return{fieldPath:n.canonicalString()}}function is(n){return Ke.fromServerFormat(n.fieldPath)}function vS(n){return n instanceof he?function(t){if(t.op==="=="){if(ST(t.value))return{unaryFilter:{field:rs(t.field),op:"IS_NAN"}};if(bT(t.value))return{unaryFilter:{field:rs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ST(t.value))return{unaryFilter:{field:rs(t.field),op:"IS_NOT_NAN"}};if(bT(t.value))return{unaryFilter:{field:rs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(t.field),op:h2(t.op),value:t.value}}}(n):n instanceof be?function(t){let r=t.getFilters().map(i=>vS(i));return r.length===1?r[0]:{compositeFilter:{op:f2(t.op),filters:r}}}(n):z()}function p2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ys=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),a=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $d=class{constructor(e){this.ct=e}};function g2(n,e){let t;if(e.document)t=fS(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Hi(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Hi(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ue(i[0],i[1]);return Q.fromTimestamp(o)}(e.readTime)),t}function zT(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Mc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ms(o,s.version.toTimestamp()),createTime:ms(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$i(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:$i(e.version)}}return r}function Hd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $i(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hi(n){let e=new Ue(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Ni(n,e){let t=(e.baseMutations||[]).map(o=>Oy(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Oy(n.ct,o)),i=Ue.fromMillis(e.localWriteTimeMs);return new bc(e.batchId,i,t,r)}function fc(n){let e=Hi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Hi(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),xt(As(dS(o.documents[0])))}(n.query):function(o){return xt(mS(o))}(n.query),new ys(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ze.fromBase64String(n.resumeToken))}function _S(n,e){let t=$i(e.snapshotVersion),r=$i(e.lastLimboFreeSnapshotVersion),i;i=Fd(e.target)?pS(n.ct,e.target):gS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ji(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uw(n){let e=mS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vd(e,e.limit,"L"):e}function Qm(n,e){return new Sc(e.largestBatchId,Oy(n.ct,e.overlayMutation))}function GT(n,e){let t=e.path.lastSegment();return[n,At(e.path.popLast()),t]}function WT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:$i(r.readTime),documentKey:At(r.documentKey.path),largestBatchId:r.largestBatchId}}var Fy=class{getBundleMetadata(e,t){return KT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Hi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return KT(e).put(function(i){return{bundleId:i.id,createTime:$i(Qe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return QT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:uw(o.bundledQuery),readTime:Hi(o.readTime)}}(r)})}saveNamedQuery(e,t){return QT(e).put(function(i){return{name:i.name,readTime:$i(Qe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function KT(n){return it(n,"bundles")}function QT(n){return it(n,"namedQueries")}var qd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return cc(e).get(GT(this.userId,t)).next(r=>r?Qm(this.serializer,r):null)}getOverlays(e,t){let r=Pn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Sc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(At(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(cc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Pn(),o=At(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return cc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Qm(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Pn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Qm(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return cc(e).put(function(i,o,s){let[a,u,l]=GT(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Rc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function cc(n){return it(n,"documentOverlays")}var Ly=class{Pt(e){return it(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ze.fromUint8Array(r):Ze.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var rr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),_c(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=or(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(zr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Fb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Th(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};rr.vt=new rr;function m2(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function ZT(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=m2(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Vy=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=ZT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=ZT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Uy=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},jy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Pi=class{constructor(){this.jt=new Vy,this.Ht=new Uy(this.jt),this.Jt=new jy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ki=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Lr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=YT(n.arrayValue,e.arrayValue),t!==0?t:(t=YT(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function YT(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var zd=class{constructor(e){this.Xt=new xe((t,r)=>Ke.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=ay(e);if(t!==void 0&&!this.sn(t))return!1;let r=Mi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new xe(Ke.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new as(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new as(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new as(r.field,r.dir==="asc"?0:1)));return new ds(ds.UNKNOWN_ID,this.collectionId,t,wc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function IS(n){var e,t;if(K(n instanceof he||n instanceof be),n instanceof he){if(n instanceof Od){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>he.create(n.field,"==",o)))||[];return be.create(i,"or")}return n}let r=n.filters.map(i=>IS(i));return be.create(r,n.op)}function y2(n){if(n.getFilters().length===0)return[];let e=Hy(IS(n));return K(ES(e)),By(e)||$y(e)?[e]:e.getFilters()}function By(n){return n instanceof he}function $y(n){return n instanceof be&&iw(n)}function ES(n){return By(n)||$y(n)||function(t){if(t instanceof be&&gy(t)){for(let r of t.getFilters())if(!By(r)&&!$y(r))return!1;return!0}return!1}(n)}function Hy(n){if(K(n instanceof he||n instanceof be),n instanceof he)return n;if(n.filters.length===1)return Hy(n.filters[0]);let e=n.filters.map(r=>Hy(r)),t=be.create(e,n.op);return t=Gd(t),ES(t)?t:(K(t instanceof be),K(fs(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>lw(r,i)))}function lw(n,e){let t;return K(n instanceof he||n instanceof be),K(e instanceof he||e instanceof be),t=n instanceof he?e instanceof he?function(i,o){return be.create([i,o],"and")}(n,e):JT(n,e):e instanceof he?JT(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),fs(i)&&fs(o))return Bb(i,o.getFilters());let s=gy(i)?i:o,a=gy(i)?o:i,u=s.filters.map(l=>lw(l,a));return be.create(u,"or")}(n,e),Gd(t)}function JT(n,e){if(fs(e))return Bb(e,n.getFilters());{let t=e.filters.map(r=>lw(n,r));return be.create(t,"or")}}function Gd(n){if(K(n instanceof he||n instanceof be),n instanceof he)return n;let e=n.getFilters();if(e.length===1)return Gd(e[0]);if(Ub(n))return n;let t=e.map(i=>Gd(i)),r=[];return t.forEach(i=>{i instanceof he?r.push(i):i instanceof be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,n.op)}var qy=class{constructor(){this.un=new Nc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(nn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(nn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Nc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(ve.comparator)).toArray()}};var vd=new Uint8Array(0),zy=class{constructor(e,t){this.databaseId=t,this.cn=new Nc,this.ln=new Un(r=>ji(r),(r,i)=>Bc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:At(i)};return XT(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[Cb(t),""],!1,!0);return XT(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Nn(s.parent))}return r})}addFieldIndex(e,t){let r=uc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Xo(e);return o.next(a=>{s.put(WT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=uc(e),i=Xo(e),o=Jo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=uc(e),r=Jo(e),i=Xo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new zd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Jo(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=se(),a=[];return S.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(u)} to execute ${ji(t)}`);let h=function(F,Y){let ee=ay(Y);if(ee===void 0)return null;for(let J of Ld(F,ee.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(l,u),p=function(F,Y){let ee=new Map;for(let J of Mi(Y))for(let I of Ld(F,J.fieldPath))switch(I.op){case"==":case"in":ee.set(J.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(J.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,u),m=function(F,Y){let ee=[],J=!0;for(let I of Mi(Y)){let y=I.kind===0?NT(F,I.fieldPath,F.startAt):PT(F,I.fieldPath,F.startAt);ee.push(y.value),J&&(J=y.inclusive)}return new Vn(ee,J)}(l,u),v=function(F,Y){let ee=[],J=!0;for(let I of Mi(Y)){let y=I.kind===0?PT(F,I.fieldPath,F.endAt):NT(F,I.fieldPath,F.endAt);ee.push(y.value),J&&(J=y.inclusive)}return new Vn(ee,J)}(l,u),b=this.In(u,l,m),R=this.In(u,l,v),N=this.Tn(u,l,p),j=this.En(u.indexId,h,b,m.inclusive,R,v.inclusive,N);return S.forEach(j,q=>r.G(q,t.limit).next(F=>{F.forEach(Y=>{let ee=$.fromSegments(Y.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=y2(be.create(e.filters,"and")).map(r=>Cy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):vd,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),R=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,R))}return h}An(e,t,r,i){let o=new ki(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new ki(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new zd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new xe(Ke.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Pi;for(let i of Mi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);rr.vt.It(o,s)}return r.zt()}dn(e){let t=new Pi;return rr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Pi;return rr.vt.It(Vi(this.databaseId,t),r.Yt(function(o){let s=Mi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Pi);let o=0;for(let s of Mi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&Cc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);rr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Pi;u.seed(a.zt()),rr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=uc(e),i=Xo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new wc(p.sequenceNumber,new nn(Hi(p.readTime),new $(Nn(p.documentKey)),p.largestBatchId)):wc.empty(),v=h.fields.map(([b,R])=>new as(Ke.fromServerFormat(b),R));return new ds(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:oe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=uc(e),o=Xo(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(WT(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Jo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Jo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Jo(e),o=new xe(Lr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new ki(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new xe(Lr),i=this.Vn(t,e);if(i==null)return r;let o=ay(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Cc(s))for(let a of s.arrayValue.values||[])r=r.add(new ki(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ki(t.indexId,e.key,vd,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let v=u.getIterator(),b=l.getIterator(),R=Yo(v),N=Yo(b);for(;R||N;){let j=!1,q=!1;if(R&&N){let F=h(R,N);F<0?q=!0:F>0&&(j=!0)}else R!=null?q=!0:j=!0;j?(p(N),N=Yo(b)):q?(m(R),R=Yo(v)):(R=Yo(v),N=Yo(b))}}(i,o,Lr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Xo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Lr(s,a)).filter((s,a,u)=>!a||Lr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Lr(s,e),u=Lr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,vd,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,vd,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Lr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eb)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(eb)}};function XT(n){return it(n,"collectionParents")}function Jo(n){return it(n,"indexEntries")}function uc(n){return it(n,"indexConfiguration")}function Xo(n){return it(n,"indexState")}function eb(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;ew(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new nn(e.readTime,e.documentKey,t)}var tb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function DS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=Mb(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Wd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(41943040,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);var Kd=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=os(e),s=Vr(e);return s.add({}).next(a=>{K(typeof a=="number");let u=new bc(a,t,r,i),l=function(v,b,R){let N=R.baseMutations.map(q=>Rc(v.ct,q)),j=R.mutations.map(q=>Rc(v.ct,q));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:N,mutations:j}}(this.serializer,this.userId,u),h=[],p=new xe((m,v)=>oe(m.canonicalString(),v.canonicalString()));for(let m of i){let v=Mb(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,DL))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Vr(e).get(t).next(r=>r?(K(r.userId===this.userId),Ni(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Ni(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Vr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ni(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Ed(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return os(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Nn(h);if(l===this.userId&&t.path.isEqual(m))return Vr(e).get(p).next(v=>{if(!v)throw z();K(v.userId===this.userId),o.push(Ni(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(oe),i=[];return t.forEach(o=>{let s=Ed(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=os(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,R=Nn(v);m===this.userId&&o.path.isEqual(R)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Ed(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new xe(oe);return os(e).J({range:s},(u,l,h)=>{let[p,m,v]=u,b=Nn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Vr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Ni(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return DS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return os(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Nn(o[1]);i.push(u)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return CS(e,this.userId,t)}Nn(e){return TS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function CS(n,e,t){let r=Ed(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return os(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Vr(n){return it(n,"mutations")}function os(n){return it(n,"documentMutations")}function TS(n){return it(n,"mutationQueues")}var vs=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Gy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new vs(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new Ue(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>es(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return es(e).J((s,a)=>{let u=fc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return es(e).J((r,i)=>{let o=fc(i);t(o)})}qn(e){return nb(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return nb(e).put("targetGlobalKey",t)}Kn(e,t){return es(e).put(_S(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ji(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return es(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=fc(a);Bc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Ur(e);return t.forEach(s=>{let a=At(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Ur(e);return S.forEach(t,o=>{let s=At(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Ur(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ur(e),o=se();return i.J({range:r,H:!0},(s,a,u)=>{let l=Nn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=At(t.path),i=IDBKeyRange.bound([r],[Cb(r)],!1,!0),o=0;return Ur(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return es(e).get(t).next(r=>r?fc(r):null)}};function es(n){return it(n,"targets")}function nb(n){return it(n,"targetGlobal")}function Ur(n){return it(n,"targetDocuments")}function rb([n,e],[t,r]){let i=oe(n,t);return i===0?oe(e,r):i}var Wy=class{constructor(e){this.Un=e,this.buffer=new xe(rb),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();rb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Ky=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ei(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Xr(t)}yield this.Hn(3e5)}))}},Qy=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Ht.oe);let r=new Wy(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(tb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tb):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ts()<=In.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function v2(n,e){return new Qy(n,e)}var Zy=class{constructor(e,t){this.db=e,this.garbageCollector=v2(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return wd(e,r)}removeReference(e,t,r){return wd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wd(e,t)}nr(e,t){return function(i,o){let s=!1;return TS(i).Y(a=>CS(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Q.min()),Ur(e).delete(function(p){return[0,At(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wd(e,t)}tr(e,t){let r=Ur(e),i,o=Ht.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Ht.oe&&t(new $(Nn(i)),o),o=l,i=u):o=Ht.oe}).next(()=>{o!==Ht.oe&&t(new $(Nn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function wd(n,e){return Ur(n).put(function(r,i){return{targetId:0,path:At(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Qd=class{constructor(){this.changes=new Un(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Yy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xi(e).put(r)}removeEntry(e,t,r){return xi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Hd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return xi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return xi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lc(t))},(i,o)=>{r={document:this.ir(t,o),size:Wd(o)}}).next(()=>r)}getEntries(e,t){let r=Ot();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Ot(),i=new Pe($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Wd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new xe(sb);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(lc(i.first()),lc(i.last())),s=i.getIterator(),a=s.getNext();return xi(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&sb(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(lc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Hd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Ot();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Hc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Ot(),s=ob(t,r),a=ob(t,nn.max());return xi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Jy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ib(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return ib(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=g2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return tt.newInvalidDocument(e)}};function bS(n){return new Yy(n)}var Jy=class extends Qd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Un(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new xe((o,s)=>oe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=zT(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Wd(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=zT(this.cr.serializer,s.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function ib(n){return it(n,"remoteDocumentGlobal")}function xi(n){return it(n,"remoteDocumentsV14")}function lc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ob(n,e){let t=e.documentKey.path.toArray();return[n,Hd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sb(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=oe(t[o],r[o]),i)return i;return i=oe(t.length,r.length),i||(i=oe(t[t.length-2],r[r.length-2]),i||oe(t[t.length-1],r[r.length-1]))}var Xy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Zd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&mc(r.mutation,i,qt.empty(),Ue.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Pn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=hc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Pn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ot(),s=gc(),a=function(){return gc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof vn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),mc(h.mutation,l,h.mutation.getFieldMask(),Ue.now())):s.set(l.key,qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Xy(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=gc(),i=new Pe((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||qt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Zb();h.forEach(m=>{if(!o.has(m)){let v=rS(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Pn()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:a,changes:Qb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=hc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=hc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new yn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,tt.newInvalidDocument(h)))});let a=hc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&mc(h.mutation,l,qt.empty(),Ue.now()),Hc(t,l)&&(a=a.insert(u,l))}),a})}};var ev=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qe(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:uw(i.bundledQuery),readTime:Qe(i.readTime)}}(t)),S.resolve()}};var tv=class{constructor(){this.overlays=new Pe($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Pn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Pn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Pn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Pn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Sc(t,r));let o=this.Ir.get(t);o===void 0&&(o=se(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var nv=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Pc=class{constructor(){this.Tr=new xe(Xe.Er),this.dr=new xe(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new Xe(t,e),i=new Xe(t,e+1),o=se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||oe(e.wr,t.wr)}static Ar(e,t){return oe(e.wr,t.wr)||$.comparator(e.key,t.key)}};var rv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xe(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new bc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(oe);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new $(o),0),a=new xe(oe);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var iv=class{constructor(e){this.Mr=e,this.docs=function(){return new Pe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=Ot();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ot(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ew(bb(h),r)<=0||(i.has(h.key)||Hc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ov(this)}getSize(e){return S.resolve(this.size)}},ov=class extends Qd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var sv=class{constructor(e){this.persistence=e,this.Nr=new Un(t=>ji(t),Bc),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pc,this.targetCount=0,this.kr=vs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new vs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Yd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ht(0),this.Kr=!1,this.Kr=!0,this.$r=new nv,this.referenceDelegate=e(this),this.Ur=new sv(this),this.indexManager=new qy,this.remoteDocumentCache=function(i){return new iv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $d(t),this.Gr=new ev(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new rv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new av(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},av=class extends Md{constructor(e){super(),this.currentSequenceNumber=e}},Jd=class n{constructor(e){this.persistence=e,this.Jr=new Pc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var cv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Rd("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ET,{unique:!0}),u.createObjectStore("documentMutations")}(e),ab(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),ab(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ET,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:OL});l.createIndex("collectionPathOverlayIndex",FL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",LL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:CL});l.createIndex("documentKeyIndex",TL),l.createIndex("collectionGroupIndex",bL)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:RL}).createIndex("sequenceNumberIndex",NL,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:PL}).createIndex("documentKeyIndex",kL,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Wd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{K(u.userId===o.userId);let l=Ni(this.serializer,u);return DS(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ve(s),l=function(p){return[0,At(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:At(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:ML});let r=t.store("collectionParents"),i=new Nc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:At(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ve(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Nn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=fc(i),s=_S(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new $(ve.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=bS(this.serializer),o=new Yd(Jd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:se();Ni(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new et(l),p=qd.lt(this.serializer,h),m=o.getIndexManager(h),v=Kd.lt(h,this.serializer,m,o.referenceDelegate);return new Zd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Ic(t,Ht.oe),u).next()})})}};function ab(n){n.createObjectStore("targetDocuments",{keyPath:AL}).createIndex("documentTargetsIndex",xL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SL,{unique:!0}),n.createObjectStore("targetGlobal")}var Zm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uv=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zy(this,i),this.Ai=t+"main",this.serializer=new $d(u),this.Ri=new qr(this.Ai,this.hi,new cv(this.serializer)),this.$r=new Ly,this.Ur=new Gy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bS(this.serializer),this.Gr=new Fy,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&We("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Zm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ht(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>M(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_d(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ei(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return dc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return _d(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=it(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):dc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Zm);return!1}}return!(!this.networkEnabled||!this.inForeground)||_d(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ic(e,Ht.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>_d(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Kd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?jL:u===16?UL:u===15?nw:u===14?Pb:u===13?Nb:u===12?VL:u===11?Rb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Ic(a,this.Qr?this.Qr.next():Ht.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw We(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,Sb);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return dc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Zm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dc(e).put("owner",t)}static D(){return qr.D()}bi(e){let t=dc(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(We(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;mf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return We("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){We("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function dc(n){return it(n,"owner")}function _d(n){return it(n,"clientMetadata")}function dw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var lv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var dv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Xd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mf()?8:Ab(na())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new dv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ts()<=In.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ns(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(ts()<=In.DEBUG&&k("QueryEngine","Query:",ns(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ts()<=In.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ns(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xt(t))):S.resolve())}Yi(e,t){if(kT(t))return S.resolve(null);let r=xt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Vd(t,null,"F"),r=xt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Vd(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return kT(t)||i.isEqual(Q.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(ts()<=In.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ns(t)),this.rs(e,s,t,Tb(i,-1)).next(a=>a))})}ts(e,t){let r=new xe(Wb(e));return t.forEach((i,o)=>{Hc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ts()<=In.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ns(t)),this.Ji.getDocumentsMatchingQuery(e,t,nn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var hv=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Pe(oe),this._s=new Un(o=>ji(o),Bc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function SS(n,e,t,r){return new hv(n,e,t,r)}function AS(n,e){return M(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function w2(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(u,b)).next(R=>{let N=l.docVersions.get(b);K(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xS(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function _2(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ze.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(R,N,j){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let u=Ot(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(MS(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function MS(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ot();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function I2(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ws(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ys(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function _s(n,e,t){return M(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ei(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function eh(n,e,t){let r=B(n),i=Q.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=B(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,xt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:se())).next(a=>(PS(r,Gb(e),a),{documents:a,Ts:o})))}function RS(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function NS(n,e){let t=B(n),r=t.us.get(e)||Q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Tb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(PS(t,e,i),i))}function PS(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function E2(n,e,t,r){return M(this,null,function*(){let i=B(n),o=se(),s=Ot();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield ws(i,function(h){return xt(As(ve.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>MS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function D2(r,i){return M(this,arguments,function*(n,e,t=se()){let o=yield ws(n,xt(uw(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Qe(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ze.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function cb(n,e){return`firestore_clients_${n}_${e}`}function ub(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ym(n,e){return`firestore_targets_${n}_${e}`}var th=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(We("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},yc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(We("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=sw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=xb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(We("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},fv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(We("SharedClientState",`Failed to parse online state: ${e}`),null)}},kc=class{constructor(){this.activeTargetIds=sw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},vc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pe(oe),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=cb(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new kc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(cb(this.persistenceKey,r));if(i){let o=nh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Ym(this.persistenceKey,e));if(i){let o=yc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ym(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void We("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Ht.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){We("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Ht.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new th(this.currentUser,e,t,r),o=ub(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=ub(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Ym(this.persistenceKey,e),o=new yc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return nh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return th.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return yc.Rs(i,t)}Ls(e){return fv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=sw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},rh=class{constructor(){this.so=new kc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var pv=class{_o(e){}shutdown(){}};var ih=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Id=null;function Jm(){return Id===null?Id=function(){return 268435456+Math.round(2147483648*Math.random())}():Id++,"0x"+Id.toString(16)}var C2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var gv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",mv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Jm(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw mn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ss}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=C2[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Jm();return new Promise((s,a)=>{let u=new qm;u.setWithCredentials(!0),u.listenOnce(zm.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ac.NO_ERROR:let h=u.getResponseJson();k(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case ac.TIMEOUT:k(yt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:let p=u.getStatus();if(k(yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let j=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(j)>=0?j:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(yt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Jm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Km(),a=Wm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,v=!1,b=new gv({Io:N=>{v?k(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(yt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,j,q)=>{N.listen(j,F=>{try{q(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return R(p,Zo.EventType.OPEN,()=>{v||(k(yt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),R(p,Zo.EventType.CLOSE,()=>{v||(v=!0,k(yt,`RPC '${e}' stream ${i} transport closed`),b.So())}),R(p,Zo.EventType.ERROR,N=>{v||(v=!0,mn(yt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),R(p,Zo.EventType.MESSAGE,N=>{var j;if(!v){let q=N.data[0];K(!!q);let F=q,Y=F.error||((j=F[0])===null||j===void 0?void 0:j.error);if(Y){k(yt,`RPC '${e}' stream ${i} received error:`,Y);let ee=Y.status,J=function(_){let E=Je[_];if(E!==void 0)return sS(E)}(ee),I=Y.message;J===void 0&&(J=x.INTERNAL,I="Unknown error status: "+ee+" with message "+Y.message),v=!0,b.So(new P(J,I)),p.close()}else k(yt,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),R(a,Gm.STAT_EVENT,N=>{N.stat===yd.PROXY?k(yt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===yd.NOPROXY&&k(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function kS(){return typeof window<"u"?window:null}function bd(){return typeof document<"u"?document:null}function qc(n){return new Ry(n,!0)}var Oc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var oh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Oc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(We(t.toString()),We("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yv=class extends oh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=c2(this.serializer,e),r=function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?Qe(s.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=ky(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Fd(u)?{documents:pS(o,u)}:{query:gS(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cS(o,s.resumeToken);let l=Ny(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){a.readTime=ms(o,s.snapshotVersion.toTimestamp());let l=Ny(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=l2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=ky(this.serializer),t.removeTarget=e,this.a_(t)}},vv=class extends oh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=u2(e.writeResults,e.commitTime),r=Qe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=ky(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Rc(this.serializer,r))};this.a_(t)}};var wv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Py(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Py(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},_v=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(We(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Iv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){ti(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return M(this,null,function*(){let l=B(u);l.L_.add(4),yield xs(l),l.q_.set("Unknown"),l.L_.delete(4),yield zc(l)})}(this))}))}),this.q_=new _v(r,i)}};function zc(n){return M(this,null,function*(){if(ti(n))for(let e of n.B_)yield e(!0)})}function xs(n){return M(this,null,function*(){for(let e of n.B_)yield e(!1)})}function bh(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),pw(t)?fw(t):Rs(t).r_()&&hw(t,e))}function Is(n,e){let t=B(n),r=Rs(t);t.N_.delete(e),r.r_()&&OS(t,e),t.N_.size===0&&(r.r_()?r.o_():ti(t)&&t.q_.set("Unknown"))}function hw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rs(n).A_(e)}function OS(n,e){n.Q_.xe(e),Rs(n).R_(e)}function fw(n){n.Q_=new My({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Rs(n).start(),n.q_.v_()}function pw(n){return ti(n)&&!Rs(n).n_()&&n.N_.size>0}function ti(n){return B(n).L_.size===0}function FS(n){n.Q_=void 0}function T2(n){return M(this,null,function*(){n.q_.set("Online")})}function b2(n){return M(this,null,function*(){n.N_.forEach((e,t)=>{hw(n,e)})})}function S2(n,e){return M(this,null,function*(){FS(n),pw(n)?(n.q_.M_(e),fw(n)):n.q_.set("Unknown")})}function A2(n,e,t){return M(this,null,function*(){if(n.q_.set("Online"),e instanceof jd&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield sh(n,r)}else if(e instanceof us?n.Q_.Ke(e):e instanceof Ud?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield xS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),OS(o,u);let p=new ys(h.target,u,l,h.sequenceNumber);hw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield sh(n,r)}})}function sh(n,e,t){return M(this,null,function*(){if(!ei(e))throw e;n.L_.add(1),yield xs(n),n.q_.set("Offline"),t||(t=()=>xS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield zc(n)}))})}function LS(n,e){return e().catch(t=>sh(n,t,e))}function Ms(n){return M(this,null,function*(){let e=B(n),t=Jr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;x2(e);)try{let i=yield I2(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,M2(e,i)}catch(i){yield sh(e,i)}VS(e)&&US(e)})}function x2(n){return ti(n)&&n.O_.length<10}function M2(n,e){n.O_.push(e);let t=Jr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function VS(n){return ti(n)&&!Jr(n).n_()&&n.O_.length>0}function US(n){Jr(n).start()}function R2(n){return M(this,null,function*(){Jr(n).p_()})}function N2(n){return M(this,null,function*(){let e=Jr(n);for(let t of n.O_)e.m_(t.mutations)})}function P2(n,e,t){return M(this,null,function*(){let r=n.O_.shift(),i=Sy.from(r,e,t);yield LS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ms(n)})}function k2(n,e){return M(this,null,function*(){e&&Jr(n).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return oS(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Jr(r).s_(),yield LS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ms(r)}})}(n,e)),VS(n)&&US(n)})}function lb(n,e){return M(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ti(t);t.L_.add(3),yield xs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield zc(t)})}function Ev(n,e){return M(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield zc(t)):e||(t.L_.add(2),yield xs(t),t.q_.set("Unknown"))})}function Rs(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new yv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:T2.bind(null,n),Ro:b2.bind(null,n),mo:S2.bind(null,n),d_:A2.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.K_.s_(),pw(n)?fw(n):n.q_.set("Unknown")):(yield n.K_.stop(),FS(n))}))),n.K_}function Jr(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new vv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:R2.bind(null,n),mo:k2.bind(null,n),f_:N2.bind(null,n),g_:P2.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.U_.s_(),yield Ms(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Dv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ns(n,e){if(We("AsyncQueue",`${e}: ${n}`),ei(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var ah=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=hc(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ch=class{constructor(){this.W_=new Pe($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Es=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ah.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Cv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Tv=class{constructor(){this.queries=db(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=db(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function db(){return new Un(n=>zb(n),$c)}function gw(n,e){return M(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Cv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ns(s,`Initialization of query '${ns(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&yw(t)})}function mw(n,e){return M(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function O2(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&yw(t)}function F2(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function yw(n){n.Y_.forEach(e=>{e.next()})}var bv,hb;(hb=bv||(bv={})).ea="default",hb.Cache="cache";var Fc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Es(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Es.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bv.Cache}};var Sv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var uh=class{constructor(e){this.serializer=e}Es(e){return On(this.serializer,e)}ds(e){return e.metadata.exists?fS(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Qe(e)}},Av=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new uh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||se()).add(o);t.set(s,a)}}return t}complete(){return M(this,null,function*(){let e=yield E2(this.localStore,new uh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield D2(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function jS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var lh=class{constructor(e){this.key=e}},dh=class{constructor(e){this.key=e}},hh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=Wb(e),this.Ra=new ah(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new ch,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Hc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==R&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(v?(s=s.add(v),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return R(v)-R(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Es(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ch,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new dh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new lh(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Es.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},xv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Mv=class{constructor(e){this.key=e,this.va=!1}},Rv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Un(a=>zb(a),$c),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe($.comparator),this.Na=new Map,this.La=new Pc,this.Ba={},this.ka=new Map,this.qa=vs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function L2(n,e,t=!0){return M(this,null,function*(){let r=Sh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield BS(r,e,t,!0),i})}function V2(n,e){return M(this,null,function*(){let t=Sh(n);yield BS(t,e,!0,!1)})}function BS(n,e,t,r){return M(this,null,function*(){let i=yield ws(n.localStore,xt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield vw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&bh(n.remoteStore,i),a})}function vw(n,e,t,r,i){return M(this,null,function*(){n.Ka=(p,m,v)=>function(R,N,j,q){return M(this,null,function*(){let F=N.view.ma(j);F.ns&&(F=yield eh(R.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let Y=q&&q.targetChanges.get(N.targetId),ee=q&&q.targetMismatches.get(N.targetId)!=null,J=N.view.applyChanges(F,R.isPrimaryClient,Y,ee);return Nv(R,N.targetId,J.wa),J.snapshot})}(n,p,m,v);let o=yield eh(n.localStore,e,!0),s=new hh(e,o.Ts),a=s.ma(o.documents),u=xc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Nv(n,t,l.wa);let h=new xv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function U2(n,e,t){return M(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!$c(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield _s(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Is(r.remoteStore,i.targetId),Ds(r,i.targetId)}).catch(Xr))):(Ds(r,i.targetId),yield _s(r.localStore,i.targetId,!0))})}function j2(n,e){return M(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Is(t.remoteStore,r.targetId))})}function B2(n,e,t){return M(this,null,function*(){let r=Ew(n);try{let i=yield function(s,a){let u=B(s),l=Ue.now(),h=a.reduce((v,b)=>v.add(b.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Ot(),R=se();return u.cs.getEntries(v,h).next(N=>{b=N,b.forEach((j,q)=>{q.isValidDocument()||(R=R.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let j=[];for(let q of a){let F=t2(q,p.get(q.key).overlayedDocument);F!=null&&j.push(new vn(q.key,F,Vb(F.value.mapValue),qe.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,j,a)}).next(N=>{m=N;let j=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(v,N.batchId,j)})}).then(()=>({batchId:m.batchId,changes:Qb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Pe(oe)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield lr(r,i.changes),yield Ms(r.remoteStore)}catch(i){let o=Ns(i,"Failed to persist write");t.reject(o)}})}function $S(n,e){return M(this,null,function*(){let t=B(n);try{let r=yield _2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield lr(t,r,e)}catch(r){yield Xr(r)}})}function fb(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&yw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $2(n,e,t){return M(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,tt.newNoDocument(o,Q.min()));let a=se().add(o),u=new Ac(Q.min(),new Map,new Pe(oe),s,a);yield $S(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Iw(r)}else yield _s(r.localStore,e,!1).then(()=>Ds(r,e,t)).catch(Xr)})}function H2(n,e){return M(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield w2(t.localStore,e);_w(t,r,null),ww(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lr(t,i)}catch(i){yield Xr(i)}})}function q2(n,e,t){return M(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);_w(r,e,t),ww(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lr(r,i)}catch(i){yield Xr(i)}})}function z2(n,e){return M(this,null,function*(){let t=B(n);ti(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ns(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function ww(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function _w(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ds(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||HS(n,r)})}function HS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Is(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Iw(n))}function Nv(n,e,t){for(let r of t)r instanceof lh?(n.La.addReference(r.key,e),G2(n,r)):r instanceof dh?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||HS(n,r.key)):z()}function G2(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),Iw(n))}function Iw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new Mv(t)),n.Oa=n.Oa.insert(t,r),bh(n.remoteStore,new ys(xt(As(t.path)),r,"TargetPurposeLimboResolution",Ht.oe))}}function lr(n,e,t){return M(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=lv.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return M(this,null,function*(){let h=B(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ei(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,R)}}})}(r.localStore,o))})}function W2(n,e){return M(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield AS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lr(t,r.hs)}})}function K2(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Q2(n,e){return M(this,null,function*(){let t=B(n),r=yield eh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Nv(t,e.targetId,i.wa),i})}function Z2(n,e){return M(this,null,function*(){let t=B(n);return NS(t.localStore,e).then(r=>lr(t,r))})}function Y2(n,e,t,r){return M(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ms(i.remoteStore):t==="acknowledged"||t==="rejected"?(_w(i,e,r||null),ww(i,e),function(a,u){B(B(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield lr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function J2(n,e){return M(this,null,function*(){let t=B(n);if(Sh(t),Ew(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield pb(t,r.toArray());t.Qa=!0,yield Ev(t.remoteStore,!0);for(let o of i)bh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ds(t,s),_s(t.localStore,s,!0))),Is(t.remoteStore,s)}),yield i,yield pb(t,r),function(s){let a=B(s);a.Na.forEach((u,l)=>{Is(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Pe($.comparator)}(t),t.Qa=!1,yield Ev(t.remoteStore,!1)}})}function pb(n,e,t){return M(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield ws(r.localStore,xt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield Q2(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield RS(r.localStore,s);a=yield ws(r.localStore,l),yield vw(r,qS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function qS(n){return qb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function X2(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function eV(n,e,t,r){return M(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield NS(i.localStore,Gb(o[0])),a=Ac.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ze.EMPTY_BYTE_STRING);yield lr(i,s,a);break}case"rejected":yield _s(i.localStore,e,!0),Ds(i,e,r);break;default:z()}})}function tV(n,e,t){return M(this,null,function*(){let r=Sh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield RS(r.localStore,i),s=yield ws(r.localStore,o);yield vw(r,qS(o),s.targetId,!1,s.resumeToken),bh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield _s(r.localStore,i,!1).then(()=>{Is(r.remoteStore,i),Ds(r,i)}).catch(Xr))}})}function Sh(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$2.bind(null,e),e.Ca.d_=O2.bind(null,e.eventManager),e.Ca.$a=F2.bind(null,e.eventManager),e}function Ew(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q2.bind(null,e),e}function nV(n,e,t){let r=B(n);(function(o,s,a){return M(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(v,b){let R=B(v),N=Qe(b.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",j=>R.Gr.getBundleMetadata(j,b.id)).then(j=>!!j&&j.createTime.compareTo(N)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(jS(u));let l=new Av(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield lr(o,p.Ia,void 0),yield function(v,b){let R=B(v);return R.persistence.runTransaction("Save bundle","readwrite",N=>R.Gr.saveBundleMetadata(N,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return mn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Pv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=qc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return SS(this.persistence,new Xd,t.initialUser,this.serializer)}Ga(t){return new Yd(Jd.Zr,this.serializer)}Wa(t){return new rh}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var fh=class n extends Pv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield pf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Ew(this.Ja.syncEngine),yield Ms(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return SS(this.persistence,new Xd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Ky(r,e.asyncQueue,t)}Ha(e,t){let r=new dy(t,this.persistence);return new ly(e.asyncQueue,r)}Ga(e){let t=dw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new uv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kS(),bd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new rh}},kv=class n extends fh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield pf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof vc&&(this.sharedClientState.syncEngine={no:Y2.bind(null,t),ro:eV.bind(null,t),io:tV.bind(null,t),Qi:X2.bind(null,t),eo:Z2.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield J2(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=kS();if(!vc.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=dw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Dw=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=W2.bind(null,this.syncEngine),yield Ev(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Tv}()}createDatastore(t){let r=qc(t.databaseInfo.databaseId),i=function(s){return new mv(s)}(t.databaseInfo);return function(s,a,u,l){return new wv(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Iv(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>fb(this.syncEngine,r,0),function(){return ih.D()?new ih:new pv}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new Rv(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield function(o){return M(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield xs(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function gb(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Cs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):We("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ov=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Sv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Fv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return M(this,null,function*(){let s=B(i),a={documents:o.map(p=>Mc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=a2(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new Tc(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=B(r),s={writes:i.map(a=>Rc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Q.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Q.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Lv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Oc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new Fv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!jc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!oS(t)}return!1}};var Vv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Ad.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ns(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Xm(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield AS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function mb(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Cw(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>lb(e.remoteStore,i)),n._onlineComponents=e})}function Cw(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Xm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;mn("Error using user provided cache. Falling back to memory cache: "+t),yield Xm(n,new Pv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Xm(n,new Pv);return n._offlineComponents})}function Ah(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield mb(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield mb(n,new Dw))),n._onlineComponents})}function zS(n){return Cw(n).then(e=>e.persistence)}function Tw(n){return Cw(n).then(e=>e.localStore)}function GS(n){return Ah(n).then(e=>e.remoteStore)}function bw(n){return Ah(n).then(e=>e.syncEngine)}function rV(n){return Ah(n).then(e=>e.datastore)}function Ts(n){return M(this,null,function*(){let e=yield Ah(n),t=e.eventManager;return t.onListen=L2.bind(null,e.syncEngine),t.onUnlisten=U2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=V2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j2.bind(null,e.syncEngine),t})}function iV(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield zS(n),t=yield GS(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),zc(o)}(t)}))}function oV(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield zS(n),t=yield GS(n);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=B(i);o.L_.add(0),yield xs(o),o.q_.set("Offline")})}(t)}))}function sV(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,h){let p=B(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ns(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield Tw(n),e,t)})),t.promise}function WS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new Cs({next:m=>{h.Za(),s.enqueueAndForget(()=>mw(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Fc(As(a.path),h,{includeMetadataChanges:!0,_a:!0});return gw(o,p)}(yield Ts(n),n.asyncQueue,e,t,r)})),r.promise}function aV(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield eh(i,o,!0),u=new hh(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Ns(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield Tw(n),e,t)})),t.promise}function KS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new Cs({next:m=>{h.Za(),s.enqueueAndForget(()=>mw(o,p)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Fc(a,h,{includeMetadataChanges:!0,_a:!0});return gw(o,p)}(yield Ts(n),n.asyncQueue,e,t,r)})),r.promise}function cV(n,e){let t=new Cs(e);return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield Ts(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield Ts(n),t)}))}}function uV(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?aS().encode(s):s,function(h,p){return new Ov(h,p)}(function(h,p){if(h instanceof Uint8Array)return gb(h,p);if(h instanceof ArrayBuffer)return gb(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,qc(e));n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){nV(yield bw(n),i,r)}))}function lV(n,e){return n.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Tw(n),e)}))}function QS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var yb=new Map;function Sw(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Aw(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vb(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wb(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function Ie(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ZS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var ph=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Aw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ph({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ph(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ey;switch(r.type){case"firstParty":return new iy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=yb.get(t);r&&(k("ComponentProvider","Removing Datastore"),yb.delete(t),r.terminate())}(this),Promise.resolve()}};function YS(n,e,t,r={}){var i;let o=(n=Ie(n,qi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=et.MOCK_USER;else{a=t_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new et(l)}n._authCredentials=new ty(new Sd(a,u))}}var dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Re=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Fn=class n extends dt{constructor(e,t,r){super(e,t,As(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function xw(n,e,...t){if(n=Fe(n),Sw("collection","path",e),n instanceof qi){let r=ve.fromString(e,...t);return wb(r),new Fn(n,null,r)}{if(!(n instanceof Re||n instanceof Fn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return wb(r),new Fn(n.firestore,null,r)}}function JS(n,e){if(n=Ie(n,qi),Sw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dt(n,null,function(r){return new yn(ve.emptyPath(),r)}(e))}function Gc(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=Ad.newId()),Sw("doc","path",e),n instanceof qi){let r=ve.fromString(e,...t);return vb(r),new Re(n,null,new $(r))}{if(!(n instanceof Re||n instanceof Fn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return vb(r),new Re(n.firestore,n instanceof Fn?n.converter:null,new $(r))}}function Mw(n,e){return n=Fe(n),e=Fe(e),(n instanceof Re||n instanceof Fn)&&(e instanceof Re||e instanceof Fn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Rw(n,e){return n=Fe(n),e=Fe(e),n instanceof dt&&e instanceof dt&&n.firestore===e.firestore&&$c(n._query,e._query)&&n.converter===e.converter}var gh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Oc(this,"async_queue_retry"),this.Vu=()=>{let r=bd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=bd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=bd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ei(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw We("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Dv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Uv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var jv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var XS=-1,je=class extends qi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new gh(e),this._firestoreClient=void 0,yield e}})}};function ht(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eA(n),n._firestoreClient}function eA(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new hy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,QS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Vv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function tA(n,e){mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return rA(n,Dw.provider,{build:r=>new fh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function nA(n){return M(this,null,function*(){mn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();rA(n,Dw.provider,{build:t=>new kv(t,e.cacheSizeBytes)})})}function rA(n,e,t){if((n=Ie(n,je))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},eA(n)}function iA(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!qr.D())return Promise.resolve();let i=r+"main";yield qr.delete(i)})}(dw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function oA(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return z2(yield bw(t),r)})),r.promise}(ht(n=Ie(n,je)))}function sA(n){return iV(ht(n=Ie(n,je)))}function aA(n){return oV(ht(n=Ie(n,je)))}function cA(n,e){let t=ht(n=Ie(n,je)),r=new jv;return uV(t,n._databaseId,e,r),r}function uA(n,e){return lV(ht(n=Ie(n,je)),e).then(t=>t?new dt(n,null,t.query):null)}var jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ze.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var wn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cr=class{constructor(e){this._methodName=e}};var zi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var Lc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var dV=/^__.*__$/,Bv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zr(e,this.data,t,this.fieldTransforms)}},mh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var yh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lA(this.Cu)&&dV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},$v=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qc(e)}Qu(e,t,r,i=!1){return new yh({Cu:e,methodName:t,qu:r,path:Ke.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Qi(n){let e=n._freezeSettings(),t=qc(n._databaseId);return new $v(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);kw("Data must be an object, but it was:",s,r);let a=fA(r,s),u,l;if(o.merge)u=new qt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Wv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);gA(h,m)||h.push(m)}u=new qt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Bv(new vt(a),u,l)}var Vc=class n extends cr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function dA(n,e,t){return new yh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Hv=class n extends cr{_toFieldTransform(e){return new Bi(e.path,new Kr)}isEqual(e){return e instanceof n}},qv=class n extends cr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=dA(this,e,!0),r=this.Ku.map(o=>Zi(o,t)),i=new sr(r);return new Bi(e.path,i)}isEqual(e){return e instanceof n&&yf(this.Ku,e.Ku)}},zv=class n extends cr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=dA(this,e,!0),r=this.Ku.map(o=>Zi(o,t)),i=new ar(r);return new Bi(e.path,i)}isEqual(e){return e instanceof n&&yf(this.Ku,e.Ku)}},Gv=class n extends cr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Qr(e.serializer,Jb(e.serializer,this.$u));return new Bi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function Nw(n,e,t,r){let i=n.Qu(1,e,t);kw("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();Ki(r,(u,l)=>{let h=Ow(e,u,t);l=Fe(l);let p=i.Nu(h);if(l instanceof Vc)o.push(h);else{let m=Zi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new qt(o);return new mh(s,a,i.fieldTransforms)}function Pw(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Wv(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Wv(e,o[m])),u.push(o[m+1]);let l=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!gA(l,a[m])){let v=a[m],b=u[m];b=Fe(b);let R=s.Nu(v);if(b instanceof Vc)l.push(v);else{let N=Zi(b,R);N!=null&&(l.push(v),h.set(v,N))}}let p=new qt(l);return new mh(h,p,s.fieldTransforms)}function hA(n,e,t,r=!1){return Zi(t,n.Qu(r?4:3,e))}function Zi(n,e){if(pA(n=Fe(n)))return kw("Unsupported field value:",e,n),fA(n,e);if(n instanceof cr)return function(r,i){if(!lA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Zi(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Jb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:ms(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ms(i.serializer,o)}}if(r instanceof zi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:cS(i.serializer,r._byteString)};if(r instanceof Re){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Lc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return aw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${xh(r)}`)}(n,e)}function fA(n,e){let t={};return kb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ki(n,(r,i)=>{let o=Zi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function pA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ue||n instanceof zi||n instanceof jn||n instanceof Re||n instanceof cr||n instanceof Lc)}function kw(n,e,t){if(!pA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=xh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Wv(n,e,t){if((e=Fe(e))instanceof wn)return e._internalPath;if(typeof e=="string")return Ow(n,e);throw vh("Field path arguments must be of type string or ",n,!1,void 0,t)}var hV=new RegExp("[~\\*/\\[\\]]");function Ow(n,e,t){if(e.search(hV)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wn(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function gA(n,e){return n.some(t=>t.isEqual(e))}var Gi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Rh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kv=class extends Gi{data(){return super.data()}};function Rh(n,e){return typeof e=="string"?Ow(n,e):e instanceof wn?e._internalPath:e._delegate._internalPath}function mA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uc=class{},Wi=class extends Uc{};function dr(n,e,...t){let r=[];e instanceof Uc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Qv).length,a=o.filter(u=>u instanceof wh).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var wh=class n extends Wi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bA(e._query,t),new dt(e.firestore,e.converter,Ty(e._query,t))}_parse(e){let t=Qi(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ib(p,h);let v=[];for(let b of p)v.push(_b(u,o,b));m={arrayValue:{values:v}}}else m=_b(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ib(p,h),m=hA(a,s,p,h==="in"||h==="not-in");return he.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function yA(n,e,t){let r=e,i=Rh("where",n);return wh._create(i,r,t)}var Qv=class n extends Uc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:be.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)bA(s,u),s=Ty(s,u)}(e._query,t),new dt(e.firestore,e.converter,Ty(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Zv=class n extends Wi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ui(o,s)}(e._query,this._field,this._direction);return new dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new yn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function vA(n,e="asc"){let t=e,r=Rh("orderBy",n);return Zv._create(r,t)}var _h=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new dt(e.firestore,e.converter,Vd(e._query,this._limit,this._limitType))}};function wA(n){return ZS("limit",n),_h._create("limit",n,"F")}function _A(n){return ZS("limitToLast",n),_h._create("limitToLast",n,"L")}var Ih=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=TA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function IA(...n){return Ih._create("startAt",n,!0)}function EA(...n){return Ih._create("startAfter",n,!1)}var Eh=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=TA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function DA(...n){return Eh._create("endBefore",n,!1)}function CA(...n){return Eh._create("endAt",n,!0)}function TA(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof Gi)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of cs(o))if(p.field.isKeyField())h.push(Vi(s,u.key));else{let m=u.data.field(p.field);if(Ch(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Vn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Qi(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let R=h[b];if(m[b].field.isKeyField()){if(typeof R!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!ow(s)&&R.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let N=s.path.child(ve.fromString(R));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let j=new $(N);v.push(Vi(a,j))}else{let N=hA(u,l,R);v.push(N)}}return new Vn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _b(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ow(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vi(n,new $(r))}if(t instanceof Re)return Vi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(t)}.`)}function Ib(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var bs=class{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ki(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new Lc(o)}convertGeoPoint(e){return new zi(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=rw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){let t=or(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);K(wS(r));let i=new Gr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||We(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Nh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Yv=class extends bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};var ir=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},rn=class extends Gi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $r(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Rh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},$r=class extends rn{data(e={}){return super.data(e)}},_n=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ir(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $r(this._firestore,this._userDataWriter,r.key,r,new ir(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new $r(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new $r(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:fV(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function fV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function Fw(n,e){return n instanceof rn&&e instanceof rn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _n&&e instanceof _n&&n._firestore===e._firestore&&Rw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function SA(n){n=Ie(n,Re);let e=Ie(n.firestore,je);return WS(ht(e),n._key).then(t=>jw(e,n,t))}var ur=class extends bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};function AA(n){n=Ie(n,Re);let e=Ie(n.firestore,je),t=ht(e),r=new ur(e);return sV(t,n._key).then(i=>new rn(e,r,n._key,i,new ir(i!==null&&i.hasLocalMutations,!0),n.converter))}function xA(n){n=Ie(n,Re);let e=Ie(n.firestore,je);return WS(ht(e),n._key,{source:"server"}).then(t=>jw(e,n,t))}function MA(n){n=Ie(n,dt);let e=Ie(n.firestore,je),t=ht(e),r=new ur(e);return mA(n._query),KS(t,n._query).then(i=>new _n(e,r,n,i))}function RA(n){n=Ie(n,dt);let e=Ie(n.firestore,je),t=ht(e),r=new ur(e);return aV(t,n._query).then(i=>new _n(e,r,n,i))}function NA(n){n=Ie(n,dt);let e=Ie(n.firestore,je),t=ht(e),r=new ur(e);return KS(t,n._query,{source:"server"}).then(i=>new _n(e,r,n,i))}function Lw(n,e,t){n=Ie(n,Re);let r=Ie(n.firestore,je),i=Nh(n.converter,e,t);return Ps(r,[Mh(Qi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function Vw(n,e,t,...r){n=Ie(n,Re);let i=Ie(n.firestore,je),o=Qi(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof wn?Pw(o,"updateDoc",n._key,e,t,r):Nw(o,"updateDoc",n._key,e),Ps(i,[s.toMutation(n._key,qe.exists(!0))])}function PA(n){return Ps(Ie(n.firestore,je),[new Yr(n._key,qe.none())])}function kA(n,e){let t=Ie(n.firestore,je),r=Gc(n),i=Nh(n.converter,e);return Ps(t,[Mh(Qi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function Uw(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Uv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Uv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Re)l=Ie(n.firestore,je),h=As(n._key.path),u={next:p=>{e[s]&&e[s](jw(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Ie(n,dt);l=Ie(p.firestore,je),h=p._query;let m=new ur(l);u={next:v=>{e[s]&&e[s](new _n(l,m,p,v))},error:e[s+1],complete:e[s+2]},mA(n._query)}return function(m,v,b,R){let N=new Cs(R),j=new Fc(v,N,b);return m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return gw(yield Ts(m),j)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return mw(yield Ts(m),j)}))}}(ht(l),h,a,u)}function OA(n,e){return cV(ht(n=Ie(n,je)),Uv(e)?e:{next:e})}function Ps(n,e){return function(r,i){let o=new rt;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return B2(yield bw(r),i,o)})),o.promise}(ht(n),e)}function jw(n,e,t){let r=t.docs.get(e._key),i=new ur(n);return new rn(n,i,e._key,r,new ir(t.hasPendingWrites,t.fromCache),e.converter)}var pV={maxAttempts:5};var Dh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qi(e)}set(e,t,r){this._verifyNotCommitted();let i=jr(e,this._firestore),o=Nh(i.converter,t,r),s=Mh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=jr(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof wn?Pw(this._dataReader,"WriteBatch.update",o._key,t,r,i):Nw(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=jr(e,this._firestore);return this._mutations=this._mutations.concat(new Yr(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jr(n,e){if((n=Fe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Jv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Qi(t)}get(t){let r=jr(t,this._firestore),i=new Yv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new Gi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Gi(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=jr(t,this._firestore),s=Nh(o.converter,r,i),a=Mh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=jr(t,this._firestore),a;return a=typeof(r=Fe(r))=="string"||r instanceof wn?Pw(this._dataReader,"Transaction.update",s._key,r,i,o):Nw(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=jr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=jr(e,this._firestore),r=new ur(this._firestore);return super.get(e).then(i=>new rn(this._firestore,r,t._key,i._document,new ir(!1,!1),t.converter))}};function FA(n,e,t){n=Ie(n,je);let r=Object.assign(Object.assign({},pV),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new rt;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield rV(o);new Lv(o.asyncQueue,l,a,s,u).au()})),u.promise}(ht(n),i=>e(new Jv(n,i)),r)}function LA(){return new Vc("deleteField")}function VA(){return new Hv("serverTimestamp")}function UA(...n){return new qv("arrayUnion",n)}function jA(...n){return new zv("arrayRemove",n)}function BA(n){return new Gv("increment",n)}(function(e,t=!0){(function(i){Ss=i})(i_),ra(new si("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new je(new ny(r.getProvider("auth-internal")),new sy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),mr(wT,"4.7.3",e),mr(wT,"4.7.3","esm2017")})();var gV="@firebase/firestore-compat",mV="0.3.38";function Gw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $A(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function HA(){if(!Ob())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ph=class n{constructor(e){this._delegate=e}static fromBase64String(e){return HA(),new n(jn.fromBase64String(e))}static fromUint8Array(e){return $A(),new n(jn.fromUint8Array(e))}toBase64(){return HA(),this._delegate.toBase64()}toUint8Array(){return $A(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Bw(n){return yV(n,["next","error","complete"])}function yV(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var $w=class{enableIndexedDbPersistence(e,t){return tA(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return nA(e._delegate)}clearIndexedDbPersistence(e){return iA(e._delegate)}},kh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){YS(this._delegate,e,t,r)}enableNetwork(){return sA(this._delegate)}disableNetwork(){return aA(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Aw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return oA(this._delegate)}onSnapshotsInSync(e){return OA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fs(this,xw(this._delegate,e))}catch(t){throw Mt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,Gc(this._delegate,e))}catch(t){throw Mt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,JS(this._delegate,e))}catch(t){throw Mt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return FA(this._delegate,t=>e(new Oh(this,t)))}batch(){return ht(this._delegate),new Fh(new Dh(this._delegate,e=>Ps(this._delegate,e)))}loadBundle(e){return cA(this._delegate,e)}namedQuery(e){return uA(this._delegate,e).then(t=>t?new eo(this,t):null)}},ks=class extends bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ph(new jn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(t,this.firestore,null)}};function vV(n){Eb(n)}var Oh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ks(e)}get(e){let t=Yi(e);return this._delegate.get(t).then(r=>new Ji(this._firestore,new rn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Yi(e);return r?(Gw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Yi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Yi(e);return this._delegate.delete(t),this}},Fh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Yi(e);return r?(Gw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Yi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Yi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Os=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new $r(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ks(e),t),i.set(t,o)),o}};Os.INSTANCES=new WeakMap;var Bn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ks(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Re(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Re(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Fs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fs(this.firestore,xw(this._delegate,e))}catch(t){throw Mt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof Re?Mw(this._delegate,e):!1}set(e,t){t=Gw("DocumentReference.set",t);try{return t?Lw(this._delegate,e,t):Lw(this._delegate,e)}catch(r){throw Mt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Vw(this._delegate,e):Vw(this._delegate,e,t,...r)}catch(i){throw Mt(i,"updateDoc()","DocumentReference.update()")}}delete(){return PA(this._delegate)}onSnapshot(...e){let t=qA(e),r=zA(e,i=>new Ji(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Uw(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=AA(this._delegate):e?.source==="server"?t=xA(this._delegate):t=SA(this._delegate),t.then(r=>new Ji(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Os.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Mt(n,e,t){return n.message=n.message.replace(e,t),n}function qA(n){for(let e of n)if(typeof e=="object"&&!Bw(e))return e;return{}}function zA(n,e){var t,r;let i;return Bw(n[0])?i=n[0]:Bw(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ji=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Fw(this._delegate,e._delegate)}},Xi=class extends Ji{data(e){let t=this._delegate.data(e);return this._delegate._converter||Db(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},eo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ks(e)}where(e,t,r){try{return new n(this.firestore,dr(this._delegate,yA(e,t,r)))}catch(i){throw Mt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,dr(this._delegate,vA(e,t)))}catch(r){throw Mt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,dr(this._delegate,wA(e)))}catch(t){throw Mt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,dr(this._delegate,_A(e)))}catch(t){throw Mt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,dr(this._delegate,IA(...e)))}catch(t){throw Mt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,dr(this._delegate,EA(...e)))}catch(t){throw Mt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,dr(this._delegate,DA(...e)))}catch(t){throw Mt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,dr(this._delegate,CA(...e)))}catch(t){throw Mt(t,"endAt()","Query.endAt()")}}isEqual(e){return Rw(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=RA(this._delegate):e?.source==="server"?t=NA(this._delegate):t=MA(this._delegate),t.then(r=>new Wc(this.firestore,new _n(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=qA(e),r=zA(e,i=>new Wc(this.firestore,new _n(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Uw(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Os.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Hw=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Wc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Hw(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xi(this._firestore,r))})}isEqual(e){return Fw(this._delegate,e._delegate)}},Fs=class n extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,Gc(this._delegate)):new Bn(this.firestore,Gc(this._delegate,e))}catch(t){throw Mt(t,"doc()","CollectionReference.doc()")}}add(e){return kA(this._delegate,e).then(t=>new Bn(this.firestore,t))}isEqual(e){return Mw(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Os.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Yi(n){return Ie(n,Re)}var qw=class n{constructor(...e){this._delegate=new wn(...e)}static documentId(){return new n(Ke.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof wn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var zw=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=VA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=LA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=UA(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=jA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=BA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var wV={Firestore:kh,GeoPoint:zi,Timestamp:Ue,Blob:Ph,Transaction:Oh,WriteBatch:Fh,DocumentReference:Bn,DocumentSnapshot:Ji,Query:eo,QueryDocumentSnapshot:Xi,QuerySnapshot:Wc,CollectionReference:Fs,FieldPath:qw,FieldValue:zw,setLogLevel:vV,CACHE_SIZE_UNLIMITED:XS};function _V(n,e){n.INTERNAL.registerComponent(new si("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},wV)))}function IV(n){_V(n,(e,t)=>new kh(e,t,new $w)),n.registerVersion(gV,mV)}IV(Vt);function EV(n,e=aa){return new fe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function GA(n,e){return EV(n,e)}function DV(n,e){return GA(n,e).pipe(hi(void 0),la(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Qw(n,e){return GA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var Lh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=QA(r,t);return new Uh(i,o,this.afs)}snapshotChanges(){return DV(this.ref,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?Me(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return De(this.ref.get(e)).pipe(kt)}};function Vh(n,e){return Qw(n,e).pipe(hi(void 0),la(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function WA(n,e,t){return Vh(n,t).pipe(di((r,i)=>CV(r,i.map(o=>o.payload),e),[]),Bf(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function CV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=TV(n,r))}),n}function Ww(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function TV(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Ww(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Ww(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ww(n,e.oldIndex,1);break}return n}function KA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Uh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Vh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(hi(void 0),la(),lt(([r,i])=>i.length>0||!r),G(([,r])=>r),kt)}auditTrail(e){return this.stateChanges(e).pipe(di((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=KA(e);return WA(this.query,t,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return Qw(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?Me(V({},r.data()),{[e.idField]:r.id}):r.data())),kt)}get(e){return De(this.query.get(e)).pipe(kt)}add(e){return this.ref.add(e)}doc(e){return new Lh(this.ref.doc(e),this.afs)}},Kw=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Vh(this.query,this.afs.schedulers.outsideAngular).pipe(kt):Vh(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),kt)}auditTrail(e){return this.stateChanges(e).pipe(di((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=KA(e);return WA(this.query,t,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return Qw(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),kt)}get(e){return De(this.query.get(e)).pipe(kt)}},bV=new W("angularfire2.enableFirestorePersistence"),SV=new W("angularfire2.firestore.persistenceSettings"),AV=new W("angularfire2.firestore.settings"),xV=new W("angularfire2.firestore.use-emulator");function QA(n,e=t=>t){return{query:e(n),ref:n}}var Ft=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,v,b,R,N,j,q){this.schedulers=u;let F=sc(t,a,r),Y=h;p&&$m(F,a,m,b,R,N,v,j),[this.firestore,this.persistenceEnabled$]=gd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),Y&&ee.useEmulator(...Y),i&&!Ci(s)){let J=()=>{try{return De(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),X(!1)}};return[ee,a.runOutsideAngular(J)]}else return[ee,X(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=QA(i,r),a=this.schedulers.ngZone.run(()=>o);return new Uh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Kw(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Lh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Ko),O(Qo,8),O(bV,8),O(AV,8),O(Nt),O(ge),O(hd),O(SV,8),O(xV,8),O(mT,8),O(Fm,8),O(Lm,8),O(Vm,8),O(Um,8),O(jm,8),O(Bm,8),O(Ai,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var ZA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YA=(()=>{class n{constructor(t){this.headerService=t,this.header=new ld,this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)(Ve(ZA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-header"]],decls:22,vars:7,consts:[[1,"header-container"],[1,"info-section"],[1,"name","boldonse-regular"],[1,"merriweather-auto"],[1,"image-section"],["alt","Profile Image",3,"src"],[1,"contact-section"],["src","sobre.png",1,"icon"],["src","llamada-telefonica.png",1,"icon"],["src","marcador.png",1,"icon"],["src","clip-vertical.png",1,"icon"]],template:function(r,i){r&1&&(ie(0,"div",0)(1,"div",1)(2,"div",2),_e(3),te(),de(4,"br"),ie(5,"p",3),_e(6),te()(),ie(7,"div",4),de(8,"img",5),te(),ie(9,"div",6)(10,"p",3),de(11,"img",7),_e(12),te(),ie(13,"p"),de(14,"img",8),_e(15),te(),ie(16,"p"),de(17,"img",9),_e(18),te(),ie(19,"p"),de(20,"img",10),_e(21),te()()()),r&2&&(me(3),Xt(i.header.name),me(3),Xt(i.header.goalLife),me(2),_g("src",i.header.photoUrl,jE),me(4),st(" ",i.header.email," "),me(3),Xt(i.header.phoneNumber),me(3),st("",i.header.location," "),me(3),st(" ",i.header.socialNetwork," "))},styles:['@import"https://cdn-uicons.flaticon.com/2.6.0/uicons-solid-rounded/css/uicons-solid-rounded.css";.header-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;background-color:#f7f7f7;padding:20px;border-radius:8px;box-shadow:0 5px 20px #0000001a;height:100%}.boldonse-regular[_ngcontent-%COMP%]{font-family:Boldonse,system-ui;font-optical-sizing:auto;font-size:22px;font-weight:550;font-style:normal}.merriweather-auto[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-optical-sizing:auto;font-weight:500;font-size:16px;font-style:normal;font-variation-settings:"wdth" 100}.info-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.icon-section[_ngcontent-%COMP%]{display:flex;justify-content:center}.icon[_ngcontent-%COMP%]{width:24px;height:24px;vertical-align:middle;margin-right:8px}.image-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:155px;height:155px;border-radius:50%;object-fit:cover}.contact-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}']})}}return n})();var JA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Education",this.eduRef=t.collection(this.dbPath)}getEducation(){return this.eduRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PV(n,e){if(n&1&&(ie(0,"ul",3)(1,"li",4),de(2,"div",5),ie(3,"div"),_e(4),de(5,"br"),_e(6),de(7,"br"),_e(8),de(9,"br"),te()()()),n&2){let t=e.$implicit;me(4),st(" ",t.grade," "),me(2),st(" ",t.educativeInstitute," "),me(2),st(" ",t.date," ")}}var XA=(()=>{class n{constructor(t){this.educationService=t,this.education=[],this.educationService.getEducation().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}static{this.\u0275fac=function(r){return new(r||n)(Ve(JA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-education"]],decls:4,vars:1,consts:[[1,"container"],[1,"title-montserrat"],["class","education-container",4,"ngFor","ngForOf"],[1,"education-container"],[1,"merriweather-auto"],[1,"skill-box"]],template:function(r,i){r&1&&(ie(0,"table",0)(1,"h3",1),_e(2,"Education"),te(),fn(3,PV,10,3,"ul",2),te()),r&2&&(me(3),Jt("ngForOf",i.education))},dependencies:[Mn],styles:['.title-montserrat[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-size:22px;font-weight:650;font-style:normal}.merriweather-auto[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-optical-sizing:auto;font-weight:500;font-size:16px;font-style:normal;font-variation-settings:"wdth" 100}.container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#f1f1f1;padding-right:20px;padding-top:20px;padding-bottom:20px;border-radius:8px;gap:10px;text-align:left}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-left:20px}.education-container[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;width:100%;height:max-content;display:flex;flex-direction:column;gap:20px}.education-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;width:100%;gap:10px;padding-top:20px;justify-content:flex-start;flex-direction:row;align-items:center;font-family:Merriweather,serif;font-size:16px}.skill-box[_ngcontent-%COMP%]{width:60px;height:90px;margin-right:20px;background-color:#3dd5b0;box-shadow:0 2px 5px #0000001a}.skill-name[_ngcontent-%COMP%]{flex:1;text-align:left;color:#333}']})}}return n})();var jh=class{constructor(){this.languagues="value1, value2, value3 ...",this.Areas="value1, value2, value3 ..."}};var ex=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FV(n,e){if(n&1&&(ie(0,"div",3),_e(1),te()),n&2){let t=e.$implicit;me(),st(" ",t," ")}}var tx=(()=>{class n{constructor(t){this.skillsService=t,this.allSkills=[],this.skills=new jh,this.skillsService.getSkills().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r[0],this.allSkills=(this.skills.languagues??"").split(",").concat((this.skills.Areas??"").split(",")),console.log(this.skills),console.log(this.allSkills)})}static{this.\u0275fac=function(r){return new(r||n)(Ve(ex))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-skills"]],decls:4,vars:1,consts:[[1,"title-montserrat"],[1,"skills-container"],["class","skill-box",4,"ngFor","ngForOf"],[1,"skill-box"]],template:function(r,i){r&1&&(ie(0,"h3",0),_e(1,"Skills, Languages and Technologies"),te(),ie(2,"div",1),fn(3,FV,2,1,"div",2),te()),r&2&&(me(3),Jt("ngForOf",i.allSkills))},dependencies:[Mn],styles:[".skills-container[_ngcontent-%COMP%]{display:flex;width:fit-content;height:fit-content;flex-wrap:wrap;gap:10px;margin-top:10px}.title-montserrat[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-size:22px;font-weight:650;font-style:normal}.skill-box[_ngcontent-%COMP%]{background-color:#3dd5b0;color:#fff;padding:8px 14px;border-radius:20px;font-weight:500;font-size:14px;box-shadow:0 2px 5px #00000026}"]})}}return n})();var nx=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function UV(n,e){if(n&1&&(ie(0,"ul",3)(1,"li",4)(2,"p",5),de(3,"i",6),_e(4),te(),ie(5,"p",5),de(6,"i",7),_e(7),te(),ie(8,"p",8),de(9,"i",9),_e(10),te()()()),n&2){let t=e.$implicit;me(4),Xt(t.title),me(3),Xt(t.Institute),me(3),Xt(t.date)}}var rx=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[],console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(Ve(nx))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-certificates"]],decls:4,vars:1,consts:[[1,"container"],[1,"title-montserrat"],["class","work-container",4,"ngFor","ngForOf"],[1,"work-container"],[1,"merriweather-auto"],[1,"text"],[1,"fa-solid","fa-certificate","icon"],[1,"fa-solid","fa-building-columns","icon"],[1,"white-text"],[1,"fa-solid","fa-calendar-days","icon"]],template:function(r,i){r&1&&(ie(0,"div",0)(1,"h3",1),_e(2,"Certificates"),te(),fn(3,UV,11,3,"ul",2),te()),r&2&&(me(3),Jt("ngForOf",i.certificates))},dependencies:[Mn],styles:['.title-montserrat[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-size:22px;font-weight:650;font-style:normal}.merriweather-auto[_ngcontent-%COMP%]{padding:20px;gap:7px}.text[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-optical-sizing:auto;font-weight:500;font-size:16px;font-style:normal;font-variation-settings:"wdth" 100}.white-text[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-optical-sizing:auto;font-weight:350;font-size:16px;font-style:inherit;font-variation-settings:"wdth" 100;color:#b3adad}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;width:100%;height:100%;background-color:#f1f1f1}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-left:20px;padding-top:20px}.work-container[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;width:100%;height:max-content;display:flex;flex-direction:column;gap:20px}.work-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;width:100%;padding-top:20px;justify-content:flex-start;flex-direction:column;align-items:start;font-size:16px}.merriweather-auto[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.skill-box[_ngcontent-%COMP%]{width:60px;height:90px;margin-right:20px;background-color:#3dd5b0;box-shadow:0 2px 5px #0000001a}.skill-name[_ngcontent-%COMP%]{flex:1;text-align:left;color:#333}.certificate-item[_ngcontent-%COMP%]{display:flex;align-items:start;gap:12px}.date[_ngcontent-%COMP%]{color:#c0392b}.fa-certificate[_ngcontent-%COMP%]{color:#3dd5b0;font-size:20px;margin-right:8px}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;background-color:#3dd5b0;color:#fff;border-radius:15px;font-size:12px;margin-top:5px}.certificate-box[_ngcontent-%COMP%]{width:20px;height:60px;background-color:#3dd5b0;margin-right:10px}.icon[_ngcontent-%COMP%]{margin-right:8px;color:#3dd5b0}']})}}return n})();var ix=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Languages",this.languageRef=t.collection(this.dbPath)}getLanguage(){return this.languageRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $V=n=>({width:n});function HV(n,e){if(n&1&&(ie(0,"ul",3)(1,"p"),_e(2),te(),ie(3,"div",4),de(4,"div",5),te(),ie(5,"p",6),_e(6),te()()),n&2){let t=e.$implicit;me(2),Xt(t.language),me(2),Jt("ngStyle",AD(3,$V,t.percentage)),me(2),Xt(t.percentage)}}var ox=(()=>{class n{constructor(t){this.languaguesService=t,this.language=[],this.languaguesService.getLanguage().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.language=r,console.log(this.language)})}static{this.\u0275fac=function(r){return new(r||n)(Ve(ix))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-languages"]],decls:4,vars:1,consts:[[1,"language-container"],[1,"title-montserrat"],["class","language-bar",4,"ngFor","ngForOf"],[1,"language-bar"],[1,"progress-bar"],[1,"progress-fill",3,"ngStyle"],[1,"percentage"]],template:function(r,i){r&1&&(ie(0,"table",0)(1,"h3",1),_e(2,"Languages"),te(),fn(3,HV,7,5,"ul",2),te()),r&2&&(me(3),Jt("ngForOf",i.language))},dependencies:[Mn,QD],styles:['@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRxC7mw9c.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRzS7mw9c.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRxi7mw9c.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRxy7mw9c.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRyS7m.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.language-container[_ngcontent-%COMP%]{display:flex;width:100;flex-direction:column;align-items:flex-start;gap:5px;margin-bottom:5px}.language-bar[_ngcontent-%COMP%]{display:flex;list-style:none;padding:0;margin:0;width:80%;flex-direction:column;justify-content:space-between;align-items:flex-start;overflow:hidden}.title-montserrat[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-size:22px;font-weight:650;font-style:normal}.progress-bar[_ngcontent-%COMP%]{width:100%;height:15px;background-color:#ddd;border-radius:8px;overflow:hidden;margin:5px 0}.progress-fill[_ngcontent-%COMP%]{height:100%;background-color:#3dd5b0;transition:width .5s ease-in-out}.percentage[_ngcontent-%COMP%]{width:100%;font-size:14px;font-weight:700;text-align:center;margin-top:2px}']})}}return n})();var Bh=class{constructor(){this.interest="history"}};var sx=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ax=(()=>{class n{constructor(t){this.interestsService=t,this.interests=new Bh,this.interestsService.getInterests().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r[0],console.log(this.interests)})}static{this.\u0275fac=function(r){return new(r||n)(Ve(sx))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-insterests"]],decls:5,vars:1,consts:[[1,"title-montserrat"]],template:function(r,i){r&1&&(ie(0,"div")(1,"h3",0),_e(2,"Interests"),te(),ie(3,"p"),_e(4),te()()),r&2&&(me(4),st(" ",i.interests.interest," "))},styles:[".title-montserrat[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-size:22px;font-weight:650;font-style:normal}"]})}}return n})();var cx=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Work-experience",this.workRef=t.collection(this.dbPath)}getWorkExperience(){return this.workRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KV(n,e){if(n&1&&(ie(0,"ul",3)(1,"li",4),de(2,"div",5),ie(3,"div"),_e(4),ie(5,"i"),_e(6),te(),de(7,"br"),_e(8),de(9,"br"),_e(10),de(11,"br"),te()()()),n&2){let t=e.$implicit;me(4),Ig(" ",t.startDate," - ",t.endDate," "),me(2),st(" ",t.location," "),me(2),st(" ",t.position," "),me(2),st(" ",t.accomplishment," ")}}var ux=(()=>{class n{constructor(t){this.workService=t,this.workExperience=[],console.log(this.workService),this.workService.getWorkExperience().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}static{this.\u0275fac=function(r){return new(r||n)(Ve(cx))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-work-experience"]],decls:4,vars:1,consts:[[1,"container"],[1,"title-montserrat"],["class","work-container",4,"ngFor","ngForOf"],[1,"work-container"],[1,"merriweather-auto"],[1,"skill-box"]],template:function(r,i){r&1&&(ie(0,"table",0)(1,"h3",1),_e(2,"Work-Experience"),te(),fn(3,KV,12,5,"ul",2),te()),r&2&&(me(3),Jt("ngForOf",i.workExperience))},dependencies:[Mn],styles:['.title-montserrat[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-size:22px;font-weight:650;font-style:normal}.merriweather-auto[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-optical-sizing:auto;font-weight:500;font-size:16px;font-style:normal;font-variation-settings:"wdth" 100}.container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#f1f1f1;padding-right:20px;padding-top:20px;padding-bottom:20px;border-radius:8px;gap:10px;text-align:left}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-left:20px}.work-container[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;width:100%;height:max-content;display:flex;flex-direction:column;gap:20px}.work-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;width:100%;gap:10px;padding-top:20px;justify-content:flex-start;flex-direction:row;align-items:center;font-family:Merriweather,serif;font-size:16px}.skill-box[_ngcontent-%COMP%]{width:60px;height:90px;margin-right:20px;background-color:#3dd5b0;box-shadow:0 2px 5px #0000001a}.skill-name[_ngcontent-%COMP%]{flex:1;text-align:left;color:#333}']})}}return n})();var lx=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["app-root"]],decls:19,vars:0,consts:[["rel","preconnect","href",Al`https://fonts.googleapis.com`],["rel","preconnect","href",Al`https://fonts.gstatic.com`,"crossorigin",""],["href",Al`https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&display=swap`,"rel","stylesheet"],[1,"main-container"],[1,"app-header"],[1,"line"],[1,"app-work-experience"],[1,"app-education"],[1,"app-languages"],[1,"app-skills"],[1,"app-certificates"],[1,"app-insterests"]],template:function(r,i){r&1&&(de(0,"link",0)(1,"link",1)(2,"link",2),ie(3,"div",3)(4,"header",4),de(5,"app-header"),te(),de(6,"div",5),ie(7,"div",6),de(8,"app-work-experience"),te(),ie(9,"div",7),de(10,"app-education"),te(),ie(11,"div",8),de(12,"app-languages"),te(),ie(13,"div",9),de(14,"app-skills"),te(),ie(15,"div",10),de(16,"app-certificates"),te(),ie(17,"div",11),de(18,"app-insterests"),te()())},dependencies:[YA,XA,tx,rx,ox,ax,ux],styles:['@font-face{font-family:Boldonse;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/boldonse/v1/ZgNQjPxGPbbJUZemjB31jGDWNg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Boldonse;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/boldonse/v1/ZgNQjPxGPbbJUZemjB37jGA.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Libre Baskerville;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKhZrc3Hgbbcjq75U4uslyuy4kn0qNcWx8QDP2V.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Libre Baskerville;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKhZrc3Hgbbcjq75U4uslyuy4kn0qNcWxEQDA.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Libre Baskerville;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKnZrc3Hgbbcjq75U4uslyuy4kn0qNXaxMICA.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Libre Baskerville;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKnZrc3Hgbbcjq75U4uslyuy4kn0qNZaxM.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Libre Baskerville;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKiZrc3Hgbbcjq75U4uslyuy4kn0qviTgY5KcCsww.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Libre Baskerville;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKiZrc3Hgbbcjq75U4uslyuy4kn0qviTgY3KcA.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Merriweather;font-style:italic;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4r0qyriQwlOrhSvowK_l5-eTxCVw8XP0LuKH2Gy9thm7XCN7A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Merriweather;font-style:italic;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4r0qyriQwlOrhSvowK_l5-eTxCVw8XP0LuKH2Gy9thkrXCN7A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Merriweather;font-style:italic;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4r0qyriQwlOrhSvowK_l5-eTxCVw8XP0LuKH2Gy9thmbXCN7A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Merriweather;font-style:italic;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4r0qyriQwlOrhSvowK_l5-eTxCVw8XP0LuKH2Gy9thmLXCN7A.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Merriweather;font-style:italic;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4r0qyriQwlOrhSvowK_l5-eTxCVw8XP0LuKH2Gy9thlrXC.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Merriweather;font-style:normal;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4t0qyriQwlOrhSvowK_l5UcA6ht3ZEqezpPbXEE5NRlK3G.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Merriweather;font-style:normal;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4t0qyriQwlOrhSvowK_l5UcA6ht3ZEqezpPbXEE5pRlK3G.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Merriweather;font-style:normal;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4t0qyriQwlOrhSvowK_l5UcA6ht3ZEqezpPbXEE5FRlK3G.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Merriweather;font-style:normal;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4t0qyriQwlOrhSvowK_l5UcA6ht3ZEqezpPbXEE5BRlK3G.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Merriweather;font-style:normal;font-weight:300 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v31/u-4t0qyriQwlOrhSvowK_l5UcA6ht3ZEqezpPbXEE55RlA.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufA5qW54A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufJ5qW54A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufB5qW54A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufO5qW54A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufC5qW54A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufD5qW54A.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufN5qU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}.main-container[_ngcontent-%COMP%]{gap:20px;width:95%;height:500px;max-height:550px;max-width:1200px;margin:0 auto;padding:20px;border-radius:8px;display:grid;grid-template:"header  header" 200px "line    line" auto "work-experience skills" auto "education certificates" auto "languages interests" auto/ 1fr 1fr}.main-container[_ngcontent-%COMP%]   .app-header[_ngcontent-%COMP%]{grid-area:header}.main-container[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{grid-area:line;border-bottom:2px solid #989898;padding:25px}.main-container[_ngcontent-%COMP%]   .app-work-experience[_ngcontent-%COMP%]{grid-area:work-experience}.main-container[_ngcontent-%COMP%]   .app-skills[_ngcontent-%COMP%]{grid-area:skills}.main-container[_ngcontent-%COMP%]   .app-education[_ngcontent-%COMP%]{grid-area:education}.main-container[_ngcontent-%COMP%]   .app-certificates[_ngcontent-%COMP%]{grid-area:certificates}.main-container[_ngcontent-%COMP%]   .app-languages[_ngcontent-%COMP%]{grid-area:languages}.main-container[_ngcontent-%COMP%]   .app-interests[_ngcontent-%COMP%]{grid-area:interests}.app-skills[_ngcontent-%COMP%], .app-languages[_ngcontent-%COMP%], .app-insterests[_ngcontent-%COMP%]{width:100%;background-color:#f1f1f1;padding:20px;border-radius:8px;text-align:left}.roboto-slab-title-font[_ngcontent-%COMP%]{font-family:Roboto Slab,serif;font-optical-sizing:auto;font-weight:400;font-style:normal}']})}}return n})();var dx={production:!1,firebase:{apiKey:"AIzaSyAiicR9-3ZEOhGAVL5jxkaxthn4nOkT3aY",authDomain:"mycv-matador1081.firebaseapp.com",projectId:"mycv-matador1081",storageBucket:"mycv-matador1081.firebasestorage.app",messagingSenderId:"113584989289",appId:"1:113584989289:web:93642746b2962f55156ef8"}};var hx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n,bootstrap:[lx]})}static{this.\u0275inj=bt({imports:[sC,XC,gT.initializeApp(dx.firebase)]})}}return n})();oC().bootstrapModule(hx,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
