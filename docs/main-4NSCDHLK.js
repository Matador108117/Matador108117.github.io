import{a as V,b as Re,c as lf,d as R,e as qw,f as sc,g as zw,h as Gw,i as Ww,j as df,k as Kw,l as ta,m as hf,n as ac,o as Qw,p as Yw,q as ff,r as Le,s as Xr,t as mn,u as uc,v as na,w as Zw,x as Jw,y as hr,z as Vt}from"./chunk-4ZHOUZTK.js";var gf=null;var pf=1,Xw=Symbol("SIGNAL");function Te(n){let e=gf;return gf=n,e}function eI(){return gf}var mf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vx(n){if(!(If(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pf)){if(!n.producerMustRecompute(n)&&!vf(n)){n.dirty=!1,n.lastCleanEpoch=pf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=pf}}function yf(n){return n&&(n.nextProducerIndex=0),Te(n)}function tI(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(If(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)wf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vf(n){Ef(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Vx(t),r!==t.version))return!0}return!1}function _f(n){if(Ef(n),If(n))for(let e=0;e<n.producerNode.length;e++)wf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function wf(n,e){if(jx(n),n.liveConsumerNode.length===1&&Bx(n))for(let r=0;r<n.producerNode.length;r++)wf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ef(i),i.producerIndexOfThis[r]=e}}function If(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ef(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function jx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Bx(n){return n.producerNode!==void 0}function Ux(){throw new Error}var $x=Ux;function nI(n){$x=n}function te(n){return typeof n=="function"}function no(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var cc=no(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ei(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof cc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{rI(o)}catch(s){e=e??[],s instanceof cc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new cc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ei(t,e)}remove(e){let{_finalizers:t}=this;t&&ei(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var Df=$e.EMPTY;function lc(n){return n instanceof $e||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function rI(n){te(n)?n():n.unsubscribe()}var rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ro={setTimeout(n,e,...t){let{delegate:r}=ro;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ro;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function dc(n){ro.setTimeout(()=>{let{onUnhandledError:e}=rn;if(e)e(n);else throw n})}function ra(){}var iI=Cf("C",void 0,void 0);function oI(n){return Cf("E",void 0,n)}function sI(n){return Cf("N",n,void 0)}function Cf(n,e,t){return{kind:n,value:e,error:t}}var ti=null;function io(n){if(rn.useDeprecatedSynchronousErrorHandling){let e=!ti;if(e&&(ti={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ti;if(ti=null,t)throw r}}else n()}function aI(n){rn.useDeprecatedSynchronousErrorHandling&&ti&&(ti.errorThrown=!0,ti.error=n)}var ni=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lc(e)&&e.add(this)):this.destination=zx}static create(e,t,r){return new Bn(e,t,r)}next(e){this.isStopped?bf(sI(e),this):this._next(e)}error(e){this.isStopped?bf(oI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bf(iI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Hx=Function.prototype.bind;function Tf(n,e){return Hx.call(n,e)}var Sf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){hc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){hc(r)}else hc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){hc(t)}}},Bn=class extends ni{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&rn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tf(e.next,o),error:e.error&&Tf(e.error,o),complete:e.complete&&Tf(e.complete,o)}):i=e}this.destination=new Sf(i)}};function hc(n){rn.useDeprecatedSynchronousErrorHandling?aI(n):dc(n)}function qx(n){throw n}function bf(n,e){let{onStoppedNotification:t}=rn;t&&ro.setTimeout(()=>t(n,e))}var zx={closed:!0,next:ra,error:qx,complete:ra};var oo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function Af(...n){return xf(n)}function xf(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Wx(t)?t:new Bn(t,r,i);return io(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=uI(r),new r((i,o)=>{let s=new Bn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[oo](){return this}pipe(...t){return xf(t)(this)}toPromise(t){return t=uI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function uI(n){var e;return(e=n??rn.Promise)!==null&&e!==void 0?e:Promise}function Gx(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function Wx(n){return n&&n instanceof ni||Gx(n)&&lc(n)}function Rf(n){return te(n?.lift)}function se(n){return e=>{if(Rf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,r,i){return new Mf(n,e,t,r,i)}var Mf=class extends ni{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function so(){return se((n,e)=>{let t=null;n._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ao=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Rf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return so()(this)}};var cI=no(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new fc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new cI}next(t){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Df:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,ei(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new fc(e,t),n})(),fc=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Df}};var ct=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ia={now(){return(ia.delegate||Date).now()},delegate:void 0};var pc=class extends ze{constructor(e=1/0,t=1/0,r=ia){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var gc=class extends $e{constructor(e,t){super()}schedule(e,t=0){return this}};var oa={setInterval(n,e,...t){let{delegate:r}=oa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=oa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var uo=class extends gc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return oa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&oa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ei(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var co=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};co.now=ia.now;var lo=class extends co{constructor(e,t=co.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var sa=new lo(uo);var mc=class extends uo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var yc=class extends lo{};var Nf=new yc(mc);var Et=new he(n=>n.complete());function lI(n){return n&&te(n.schedule)}function Pf(n){return n[n.length-1]}function dI(n){return te(Pf(n))?n.pop():void 0}function yn(n){return lI(Pf(n))?n.pop():void 0}function hI(n,e){return typeof Pf(n)=="number"?n.pop():e}var vc=n=>n&&typeof n.length=="number"&&typeof n!="function";function _c(n){return te(n?.then)}function wc(n){return te(n[oo])}function Ic(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Ec(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Kx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Dc=Kx();function Cc(n){return te(n?.[Dc])}function Tc(n){return zw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield sc(t.read());if(i)return yield sc(void 0);yield yield sc(r)}}finally{t.releaseLock()}})}function bc(n){return te(n?.getReader)}function Ve(n){if(n instanceof he)return n;if(n!=null){if(wc(n))return Qx(n);if(vc(n))return Yx(n);if(_c(n))return Zx(n);if(Ic(n))return fI(n);if(Cc(n))return Jx(n);if(bc(n))return Xx(n)}throw Ec(n)}function Qx(n){return new he(e=>{let t=n[oo]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Yx(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Zx(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,dc)})}function Jx(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function fI(n){return new he(e=>{eR(n,e).catch(t=>e.error(t))})}function Xx(n){return fI(Tc(n))}function eR(n,e){var t,r,i,o;return qw(this,void 0,void 0,function*(){try{for(t=Gw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Rt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function zt(n,e=0){return se((t,r)=>{t.subscribe(ce(r,i=>Rt(r,n,()=>r.next(i),e),()=>Rt(r,n,()=>r.complete(),e),i=>Rt(r,n,()=>r.error(i),e)))})}function on(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function pI(n,e){return Ve(n).pipe(on(e),zt(e))}function gI(n,e){return Ve(n).pipe(on(e),zt(e))}function mI(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function yI(n,e){return new he(t=>{let r;return Rt(t,e,()=>{r=n[Dc](),Rt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Sc(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{Rt(t,e,()=>{let r=n[Symbol.asyncIterator]();Rt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function vI(n,e){return Sc(Tc(n),e)}function _I(n,e){if(n!=null){if(wc(n))return pI(n,e);if(vc(n))return mI(n,e);if(_c(n))return gI(n,e);if(Ic(n))return Sc(n,e);if(Cc(n))return yI(n,e);if(bc(n))return vI(n,e)}throw Ec(n)}function Ie(n,e){return e?_I(n,e):Ve(n)}function J(...n){let e=yn(n);return Ie(n,e)}function ho(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function kf(n){return!!n&&(n instanceof he||te(n.lift)&&te(n.subscribe))}var Un=no(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return se((t,r)=>{let i=0;t.subscribe(ce(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:tR}=Array;function nR(n,e){return tR(e)?n(...e):n(e)}function wI(n){return G(e=>nR(n,e))}var{isArray:rR}=Array,{getPrototypeOf:iR,prototype:oR,keys:sR}=Object;function II(n){if(n.length===1){let e=n[0];if(rR(e))return{args:e,keys:null};if(aR(e)){let t=sR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function aR(n){return n&&typeof n=="object"&&iR(n)===oR}function EI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function aa(...n){let e=yn(n),t=dI(n),{args:r,keys:i}=II(n);if(r.length===0)return Ie([],e);let o=new he(uR(r,e,i?s=>EI(i,s):It));return t?o.pipe(wI(t)):o}function uR(n,e,t=It){return r=>{DI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)DI(e,()=>{let l=Ie(n[c],e),h=!1;l.subscribe(ce(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function DI(n,e,t){n?Rt(t,n,e):e()}function CI(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?b(M):c.push(M),b=M=>{o&&e.next(M),l++;let N=!1;Ve(t(M,h++)).subscribe(ce(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let B=c.shift();s?Rt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(ce(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ye(n,e,t=1/0){return te(e)?Ye((r,i)=>G((o,s)=>e(r,o,i,s))(Ve(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>CI(r,i,n,t)))}function fr(n=1/0){return Ye(It,n)}function TI(){return fr(1)}function fo(...n){return TI()(Ie(n,yn(n)))}function Ac(n){return new he(e=>{Ve(n()).subscribe(e)})}function Of(...n){let e=yn(n),t=hI(n,1/0),r=n;return r.length?r.length===1?Ve(r[0]):fr(t)(Ie(r,e)):Et}function lt(n,e){return se((t,r)=>{let i=0;t.subscribe(ce(r,o=>n.call(e,o,i++)&&r.next(o)))})}function pr(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ce(t,void 0,void 0,s=>{o=Ve(n(s,pr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function bI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ce(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ri(n,e){return te(e)?Ye(n,e,1):Ye(n,1)}function gr(n){return se((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $n(n){return n<=0?()=>Et:se((e,t)=>{let r=0;e.subscribe(ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ff(n){return G(()=>n)}function Lf(n,e=It){return n=n??cR,se((t,r)=>{let i,o=!0;t.subscribe(ce(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function cR(n,e){return n===e}function xc(n=lR){return se((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lR(){return new Un}function ua(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):It,$n(1),t?gr(e):xc(()=>new Un))}function po(n){return n<=0?()=>Et:se((e,t)=>{let r=[];e.subscribe(ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):It,po(1),t?gr(e):xc(()=>new Un))}function ca(){return se((n,e)=>{let t,r=!1;n.subscribe(ce(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ii(n,e){return se(bI(n,e,arguments.length>=2,!0))}function SI(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},b=()=>{let M=s;v(),M?.unsubscribe()};return se((M,N)=>{l++,!p&&!h&&m();let B=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=jf(b,i))}),B.subscribe(N),!s&&l>0&&(s=new Bn({next:q=>B.next(q),error:q=>{p=!0,m(),a=jf(v,t,q),B.error(q)},complete:()=>{h=!0,m(),a=jf(v,r),B.complete()}}),Ve(M).subscribe(s))})(o)}}function jf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Bn({next:()=>{r.unsubscribe(),n()}});return Ve(e(...t)).subscribe(r)}function Rc(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,SI({connector:()=>new pc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function oi(...n){let e=yn(n);return se((t,r)=>{(e?fo(n,t,e):fo(n,t)).subscribe(r)})}function He(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ce(r,c=>{i?.unsubscribe();let l=0,h=o++;Ve(n(c,h)).subscribe(i=ce(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Mc(n,e){return te(e)?He(()=>n,e):He(()=>n)}function Bf(n){return se((e,t)=>{Ve(n).subscribe(ce(t,()=>t.complete(),ra)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ce(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var lE="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(Np(e,t)),this.code=e}};function Np(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ia(n){return{toString:n}.toString()}var Nc="__parameters__";function dR(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function dE(n,e,t){return Ia(()=>{let r=dR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Nc)?c[Nc]:Object.defineProperty(c,Nc,{value:[]})[Nc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var zn=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function jt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(jt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function AI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var hR=Ae({__forward_ref__:Ae});function hE(n){return n.__forward_ref__=hE,n.toString=function(){return jt(this())},n}function Kt(n){return fE(n)?n():n}function fE(n){return typeof n=="function"&&n.hasOwnProperty(hR)&&n.__forward_ref__===hE}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function dl(n){return xI(n,gE)||xI(n,mE)}function pE(n){return dl(n)!==null}function xI(n,e){return n.hasOwnProperty(e)?n[e]:null}function fR(n){let e=n&&(n[gE]||n[mE]);return e||null}function RI(n){return n&&(n.hasOwnProperty(MI)||n.hasOwnProperty(pR))?n[MI]:null}var gE=Ae({\u0275prov:Ae}),MI=Ae({\u0275inj:Ae}),mE=Ae({ngInjectableDef:Ae}),pR=Ae({ngInjectorDef:Ae}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function yE(n){return n&&!!n.\u0275providers}var gR=Ae({\u0275cmp:Ae}),mR=Ae({\u0275dir:Ae}),yR=Ae({\u0275pipe:Ae}),vR=Ae({\u0275mod:Ae}),jc=Ae({\u0275fac:Ae}),da=Ae({__NG_ELEMENT_ID__:Ae}),NI=Ae({__NG_ENV_ID__:Ae});function fa(n){return typeof n=="string"?n:n==null?"":String(n)}function _R(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():fa(n)}function wR(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function Pp(n,e){throw new X(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Qf;function vE(){return Qf}function Wt(n){let e=Qf;return Qf=n,e}function _E(n,e,t){let r=dl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;Pp(n,"Injector")}var IR={},pa=IR,Yf="__NG_DI_FLAG__",Bc="ngTempTokenPath",ER="ngTokenPath",DR=/\n/gm,CR="\u0275",PI="__source",_o;function TR(){return _o}function mr(n){let e=_o;return _o=n,e}function bR(n,e=ae.Default){if(_o===void 0)throw new X(-203,!1);return _o===null?_E(n,void 0,e):_o.get(n,e&ae.Optional?null:void 0,e)}function O(n,e=ae.Default){return(vE()||bR)(Kt(n),e)}function j(n,e=ae.Default){return O(n,hl(e))}function hl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Zf(n){let e=[];for(let t=0;t<n.length;t++){let r=Kt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],c=SR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function wE(n,e){return n[Yf]=e,n.prototype[Yf]=e,n}function SR(n){return n[Yf]}function AR(n,e,t,r){let i=n[Bc];throw e[PI]&&i.unshift(e[PI]),n.message=xR(`
`+n.message,i,t,r),n[ER]=i,n[Bc]=null,n}function xR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==CR?n.slice(2):n;let i=jt(e);if(Array.isArray(e))i=e.map(jt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):jt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(DR,`
  `)}`}var Ro=wE(dE("Optional"),8);var kp=wE(dE("SkipSelf"),4);function Io(n,e){let t=n.hasOwnProperty(jc);return t?n[jc]:null}function Op(n,e){n.forEach(t=>Array.isArray(t)?Op(t,e):e(t))}function IE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Uc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var ga={},vn=[],Eo=new W(""),EE=new W("",-1),DE=new W(""),$c=class{get(e,t=pa){if(t===pa){let r=new Error(`NullInjectorError: No provider for ${jt(e)}!`);throw r.name="NullInjectorError",r}return t}},CE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(CE||{}),wn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(wn||{}),_r=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(_r||{});function RR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Jf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];NR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function MR(n){return n===3||n===4||n===6}function NR(n){return n.charCodeAt(0)===64}function Fp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?kI(n,t,i,null,e[++r]):kI(n,t,i,null,null))}}return n}function kI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var TE="ng-template";function PR(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Lp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Lp(n){return n.type===4&&n.value!==TE}function kR(n,e,t){let r=n.type===4&&!t?TE:n.value;return e===r}function OR(n,e,t){let r=4,i=n.attrs,o=i!==null?VR(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!sn(r)&&!sn(c))return!1;if(s&&sn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!kR(n,c,t)||c===""&&e.length===1){if(sn(r))return!1;s=!0}}else if(r&8){if(i===null||!PR(n,i,c,t)){if(sn(r))return!1;s=!0}}else{let l=e[++a],h=FR(c,i,Lp(n),t);if(h===-1){if(sn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(sn(r))return!1;s=!0}}}}return sn(r)||s}function sn(n){return(n&1)===0}function FR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return jR(e,n)}function LR(n,e,t=!1){for(let r=0;r<e.length;r++)if(OR(n,e[r],t))return!0;return!1}function VR(n){for(let e=0;e<n.length;e++){let t=n[e];if(MR(t))return e}return n.length}function jR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function OI(n,e){return n?":not("+e.trim()+")":e}function BR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!sn(s)&&(e+=OI(o,i),i=""),r=s,o=o||!sn(r);t++}return i!==""&&(e+=OI(o,i)),e}function UR(n){return n.map(BR).join(",")}function $R(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!sn(i))break;i=o}r++}return{attrs:e,classes:t}}function st(n){return Ia(()=>{let e=RE(n),t=Re(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===CE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||wn.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});ME(t);let r=n.dependencies;return t.directiveDefs=LI(r,!1),t.pipeDefs=LI(r,!0),t.id=zR(t),t})}function HR(n){return wr(n)||bE(n)}function qR(n){return n!==null}function bt(n){return Ia(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function FI(n,e){if(n==null)return ga;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=_r.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==_r.None?[r,a]:r,e[o]=s):t[o]=r}return t}function fl(n){return Ia(()=>{let e=RE(n);return ME(e),e})}function wr(n){return n[gR]||null}function bE(n){return n[mR]||null}function SE(n){return n[yR]||null}function AE(n){let e=wr(n)||bE(n)||SE(n);return e!==null?e.standalone:!1}function xE(n,e){let t=n[vR]||null;if(!t&&e===!0)throw new Error(`Type ${jt(n)} does not have '\u0275mod' property.`);return t}function RE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ga,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:FI(n.inputs,e),outputs:FI(n.outputs),debugInfo:null}}function ME(n){n.features?.forEach(e=>e(n))}function LI(n,e){if(!n)return null;let t=e?SE:HR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(qR)}function zR(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function GR(...n){return{\u0275providers:NE(!0,n),\u0275fromNgModule:!0}}function NE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Op(e,s=>{let a=s;Xf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&PE(i,o),t}function PE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Vp(i,o=>{e(o,r)})}}function Xf(n,e,t,r){if(n=Kt(n),!n)return!1;let i=null,o=RI(n),s=!o&&wr(n);if(!o&&!s){let c=n.ngModule;if(o=RI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Xf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Op(o.imports,h=>{Xf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&PE(l,e)}if(!a){let l=Io(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:DE,useValue:i,multi:!0},i),e({provide:Eo,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Vp(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Vp(n,e){for(let t of n)yE(t)&&(t=t.\u0275providers),Array.isArray(t)?Vp(t,e):e(t)}var WR=Ae({provide:String,useValue:Ae});function kE(n){return n!==null&&typeof n=="object"&&WR in n}function KR(n){return!!(n&&n.useExisting)}function QR(n){return!!(n&&n.useFactory)}function ep(n){return typeof n=="function"}var pl=new W(""),Oc={},YR={},Uf;function jp(){return Uf===void 0&&(Uf=new $c),Uf}var Bt=class{},ma=class extends Bt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,np(e,s=>this.processProvider(s)),this.records.set(EE,go(void 0,this)),i.has("environment")&&this.records.set(Bt,go(void 0,this));let o=this.records.get(pl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(DE,vn,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=mr(this),r=Wt(void 0),i;try{return e()}finally{mr(t),Wt(r)}}get(e,t=pa,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(NI))return e[NI](this);r=hl(r);let i,o=mr(this),s=Wt(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=nM(e)&&dl(e);l&&this.injectableDefInScope(l)?c=go(tp(e),Oc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?jp():this.parent;return t=r&ae.Optional&&t===pa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Bc]=a[Bc]||[]).unshift(jt(e)),o)throw a;return AR(a,e,"R3InjectorError",this.source)}else throw a}finally{Wt(s),mr(o)}}resolveInjectorInitializers(){let e=Te(null),t=mr(this),r=Wt(void 0),i;try{let o=this.get(Eo,vn,ae.Self);for(let s of o)s()}finally{mr(t),Wt(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(jt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Kt(e);let t=ep(e)?e:Kt(e&&e.provide),r=JR(e);if(!ep(e)&&e.multi===!0){let i=this.records.get(t);i||(i=go(void 0,Oc,!0),i.factory=()=>Zf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===Oc&&(t.value=YR,t.value=t.factory()),typeof t.value=="object"&&t.value&&tM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Kt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function tp(n){let e=dl(n),t=e!==null?e.factory:Io(n);if(t!==null)return t;if(n instanceof W)throw new X(204,!1);if(n instanceof Function)return ZR(n);throw new X(204,!1)}function ZR(n){if(n.length>0)throw new X(204,!1);let t=fR(n);return t!==null?()=>t.factory(n):()=>new n}function JR(n){if(kE(n))return go(void 0,n.useValue);{let e=XR(n);return go(e,Oc)}}function XR(n,e,t){let r;if(ep(n)){let i=Kt(n);return Io(i)||tp(i)}else if(kE(n))r=()=>Kt(n.useValue);else if(QR(n))r=()=>n.useFactory(...Zf(n.deps||[]));else if(KR(n))r=()=>O(Kt(n.useExisting));else{let i=Kt(n&&(n.useClass||n.provide));if(eM(n))r=()=>new i(...Zf(n.deps));else return Io(i)||tp(i)}return r}function go(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function eM(n){return!!n.deps}function tM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function nM(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function np(n,e){for(let t of n)Array.isArray(t)?np(t,e):t&&yE(t)?np(t.\u0275providers,e):e(t)}function Dn(n,e){n instanceof ma&&n.assertNotDestroyed();let t,r=mr(n),i=Wt(void 0);try{return e()}finally{mr(r),Wt(i)}}function OE(){return vE()!==void 0||TR()!=null}function rM(n){if(!OE())throw new X(-203,!1)}function iM(n){let e=zn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function oM(n){return typeof n=="function"}var Gn=0,fe=1,ne=2,Ct=3,an=4,un=5,Hc=6,VI=7,Ir=8,Do=9,In=10,Mt=11,ya=12,jI=13,Ea=14,En=15,Co=16,mo=17,To=18,gl=19,FE=20,vr=21,$f=22,Qt=23,Er=25,LE=1;var ui=7,qc=8,zc=9,Yt=10,Gc=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Gc||{});function si(n){return Array.isArray(n)&&typeof n[LE]=="object"}function Wn(n){return Array.isArray(n)&&n[LE]===!0}function VE(n){return(n.flags&4)!==0}function ml(n){return n.componentOffset>-1}function jE(n){return(n.flags&1)===1}function Da(n){return!!n.template}function rp(n){return(n[ne]&512)!==0}var ip=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function BE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function yl(){return UE}function UE(n){return n.type.prototype.ngOnChanges&&(n.setInput=aM),sM}yl.ngInherit=!0;function sM(){let n=HE(this),e=n?.current;if(e){let t=n.previous;if(t===ga)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function aM(n,e,t,r,i){let o=this.declaredInputs[r],s=HE(n)||uM(n,{previous:ga,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new ip(l&&l.currentValue,t,c===ga),BE(n,e,i,t)}var $E="__ngSimpleChanges__";function HE(n){return n[$E]||null}function uM(n,e){return n[$E]=e}var BI=null;var yr=function(n,e,t){BI?.(n,e,t)},cM="svg",lM="math";function Hn(n){for(;Array.isArray(n);)n=n[Gn];return n}function dM(n,e){return Hn(e[n])}function Cn(n,e){return Hn(e[n.index])}function qE(n,e){return n.data[e]}function Mo(n,e){let t=e[n];return si(t)?t:t[Gn]}function Bp(n){return(n[ne]&128)===128}function hM(n){return Wn(n[Ct])}function Wc(n,e){return e==null?null:n[e]}function zE(n){n[mo]=0}function GE(n){n[ne]&1024||(n[ne]|=1024,Bp(n)&&_l(n))}function vl(n){return!!(n[ne]&9216||n[Qt]?.dirty)}function op(n){n[In].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),vl(n)&&_l(n)}function _l(n){n[In].changeDetectionScheduler?.notify(0);let e=ci(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Bp(e)));)e=ci(e)}function WE(n,e){if((n[ne]&256)===256)throw new X(911,!1);n[vr]===null&&(n[vr]=[]),n[vr].push(e)}function fM(n,e){if(n[vr]===null)return;let t=n[vr].indexOf(e);t!==-1&&n[vr].splice(t,1)}function ci(n){let e=n[Ct];return Wn(e)?e[Ct]:e}var we={lFrame:rD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var KE=!1;function pM(){return we.lFrame.elementDepthCount}function gM(){we.lFrame.elementDepthCount++}function mM(){we.lFrame.elementDepthCount--}function QE(){return we.bindingsEnabled}function yM(){return we.skipHydrationRootTNode!==null}function vM(n){return we.skipHydrationRootTNode===n}function _M(){we.skipHydrationRootTNode=null}function rt(){return we.lFrame.lView}function fi(){return we.lFrame.tView}function Tn(){let n=YE();for(;n!==null&&n.type===64;)n=n.parent;return n}function YE(){return we.lFrame.currentTNode}function wM(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ca(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function ZE(){return we.lFrame.isParent}function IM(){we.lFrame.isParent=!1}function JE(){return KE}function UI(n){KE=n}function EM(){return we.lFrame.bindingIndex}function DM(n){return we.lFrame.bindingIndex=n}function XE(){return we.lFrame.bindingIndex++}function CM(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function TM(){return we.lFrame.inI18n}function bM(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,sp(e)}function SM(){return we.lFrame.currentDirectiveIndex}function sp(n){we.lFrame.currentDirectiveIndex=n}function eD(n){we.lFrame.currentQueryIndex=n}function AM(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[un]:null}function tD(n,e,t){if(t&ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=AM(o),i===null||(o=o[Ea],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=we.lFrame=nD();return r.currentTNode=e,r.lView=n,!0}function Up(n){let e=nD(),t=n[fe];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nD(){let n=we.lFrame,e=n===null?null:n.child;return e===null?rD(n):e}function rD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function iD(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var oD=iD;function $p(){let n=iD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wl(){return we.lFrame.selectedIndex}function li(n){we.lFrame.selectedIndex=n}function sD(){let n=we.lFrame;return qE(n.tView,n.selectedIndex)}function xM(){return we.lFrame.currentNamespace}var aD=!0;function Hp(){return aD}function qp(n){aD=n}function RM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=UE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function zp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Fc(n,e,t){uD(n,e,3,t)}function Lc(n,e,t,r){(n[ne]&3)===t&&uD(n,e,t,r)}function Hf(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function uD(n,e,t,r){let i=r!==void 0?n[mo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[mo]+=65536),(a<o||o==-1)&&(MM(n,t,e,c),n[mo]=(n[mo]&4294901760)+c+2),c++}function $I(n,e){yr(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),yr(5,n,e)}}function MM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[mo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,$I(a,o)):$I(a,o)}var wo=-1,va=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function NM(n){return n instanceof va}function PM(n){return(n.flags&8)!==0}function kM(n){return(n.flags&16)!==0}var qf={},ap=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=hl(r);let i=this.injector.get(e,qf,r);return i!==qf||t===qf?i:this.parentInjector.get(e,t,r)}};function cD(n){return n!==wo}function Kc(n){return n&32767}function OM(n){return n>>16}function Qc(n,e){let t=OM(n),r=e;for(;t>0;)r=r[Ea],t--;return r}var up=!0;function HI(n){let e=up;return up=n,e}var FM=256,lD=FM-1,dD=5,LM=0,_n={};function VM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(da)&&(r=t[da]),r==null&&(r=t[da]=LM++);let i=r&lD,o=1<<i;e.data[n+(i>>dD)]|=o}function hD(n,e){let t=fD(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,zf(r.data,n),zf(e,null),zf(r.blueprint,null));let i=Gp(n,e),o=n.injectorIndex;if(cD(i)){let s=Kc(i),a=Qc(i,e),c=a[fe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function zf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Gp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=vD(i),r===null)return wo;if(t++,i=i[Ea],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return wo}function jM(n,e,t){VM(n,e,t)}function pD(n,e,t){if(t&ae.Optional||n!==void 0)return n;Pp(e,"NodeInjector")}function gD(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[Do],o=Wt(void 0);try{return i?i.get(e,r,t&ae.Optional):_E(e,r,t&ae.Optional)}finally{Wt(o)}}return pD(r,e,t)}function mD(n,e,t,r=ae.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ae.Self)){let s=qM(n,e,t,r,_n);if(s!==_n)return s}let o=yD(n,e,t,r,_n);if(o!==_n)return o}return gD(e,t,r,i)}function yD(n,e,t,r,i){let o=$M(t);if(typeof o=="function"){if(!tD(e,n,r))return r&ae.Host?pD(i,t,r):gD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))Pp(t);else return s}finally{oD()}}else if(typeof o=="number"){let s=null,a=fD(n,e),c=wo,l=r&ae.Host?e[En][un]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?Gp(n,e):e[a+8],c===wo||!zI(r,!1)?a=-1:(s=e[fe],a=Kc(c),e=Qc(c,e)));a!==-1;){let h=e[fe];if(qI(o,a,h.data)){let p=BM(a,e,t,s,r,l);if(p!==_n)return p}c=e[a+8],c!==wo&&zI(r,e[fe].data[a+8]===l)&&qI(o,a,e)?(s=h,a=Kc(c),e=Qc(c,e)):a=-1}}return i}function BM(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],c=r==null?ml(a)&&up:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,h=UM(a,s,t,c,l);return h!==null?_a(e,s,h,a):_n}function UM(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<c&&t===b||v>=c&&b.type===t)return v}if(i){let v=s[c];if(v&&Da(v)&&v.type===t)return c}return null}function _a(n,e,t,r){let i=n[t],o=e.data;if(NM(i)){let s=i;s.resolving&&wR(_R(o[t]));let a=HI(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Wt(s.injectImpl):null,h=tD(n,r,ae.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&RM(t,o[t],e)}finally{l!==null&&Wt(l),HI(a),s.resolving=!1,oD()}}return i}function $M(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(da)?n[da]:void 0;return typeof e=="number"?e>=0?e&lD:HM:e}function qI(n,e,t){let r=1<<n;return!!(t[e+(n>>dD)]&r)}function zI(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var ai=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mD(this._tNode,this._lView,e,hl(r),t)}};function HM(){return new ai(Tn(),rt())}function Wp(n){return Ia(()=>{let e=n.prototype.constructor,t=e[jc]||cp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[jc]||cp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function cp(n){return fE(n)?()=>{let e=cp(Kt(n));return e&&e()}:Io(n)}function qM(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=yD(o,s,t,r|ae.Self,_n);if(a!==_n)return a;let c=o.parent;if(!c){let l=s[FE];if(l){let h=l.get(t,_n,r);if(h!==_n)return h}c=vD(s),s=s[Ea]}o=c}return i}function vD(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[un]:null}function GI(n,e=null,t=null,r){let i=_D(n,e,t,r);return i.resolveInjectorInitializers(),i}function _D(n,e=null,t=null,r,i=new Set){let o=[t||vn,GR(n)];return r=r||(typeof n=="object"?void 0:jt(n)),new ma(o,e||jp(),r||null,i)}var Zt=class n{static{this.THROW_IF_NOT_FOUND=pa}static{this.NULL=new $c}static create(e,t){if(Array.isArray(e))return GI({name:""},t,e,"");{let r=e.name??"";return GI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(EE)})}static{this.__NG_ELEMENT_ID__=-1}};var zM=new W("");zM.__NG_ELEMENT_ID__=n=>{let e=Tn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new X(204,!1)};var GM="ngOriginalError";function Gf(n){return n[GM]}var wD=!0,Kp=(()=>{class n{static{this.__NG_ELEMENT_ID__=WM}static{this.__NG_ENV_ID__=t=>t}}return n})(),lp=class extends Kp{constructor(e){super(),this._lView=e}onDestroy(e){return WE(this._lView,e),()=>fM(this._lView,e)}};function WM(){return new lp(rt())}var No=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var dp=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,OE()&&(this.destroyRef=j(Kp,{optional:!0})??void 0,this.pendingTasks=j(No,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Dt=dp;function Yc(...n){}function ID(n){let e,t;function r(){n=Yc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function WI(n){return queueMicrotask(()=>n()),()=>{n=Yc}}var Qp="isAngularZone",Zc=Qp+"_ID",KM=0,ge=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=wD}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ZM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,QM,Yc,Yc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},QM={};function Yp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function YM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ID(()=>{n.callbackScheduled=!1,hp(n),n.isCheckStableRunning=!0,Yp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),hp(n)}function ZM(n){let e=()=>{YM(n)},t=KM++;n._inner=n._inner.fork({name:"angular",properties:{[Qp]:!0,[Zc]:t,[Zc+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(JM(c))return r.invokeTask(o,s,a,c);try{return KI(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),QI(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return KI(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!XM(c)&&e(),QI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,hp(n),Yp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function hp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function KI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function QI(n){n._nesting--,Yp(n)}var Jc=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dt,this.onMicrotaskEmpty=new Dt,this.onStable=new Dt,this.onError=new Dt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function JM(n){return ED(n,"__ignore_ng_zone__")}function XM(n){return ED(n,"__scheduler_tick__")}function ED(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function eN(n="zone.js",e){return n==="noop"?new Jc:n==="zone.js"?new ge(e):n}var qn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Gf(e);for(;t&&Gf(t);)t=Gf(t);return t||null}},tN=new W("",{providedIn:"root",factory:()=>{let n=j(ge),e=j(qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function nN(){return Il(Tn(),rt())}function Il(n,e){return new El(Cn(n,e))}var El=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=nN}}return n})();function DD(n){return(n.flags&128)===128}var CD=new Map,rN=0;function iN(){return rN++}function oN(n){CD.set(n[gl],n)}function fp(n){CD.delete(n[gl])}var YI="__ngContext__";function di(n,e){si(e)?(n[YI]=e[gl],oN(e)):n[YI]=e}function TD(n){return SD(n[ya])}function bD(n){return SD(n[an])}function SD(n){for(;n!==null&&!Wn(n);)n=n[an];return n}var pp;function AD(n){pp=n}function sN(){if(pp!==void 0)return pp;if(typeof document<"u")return document;throw new X(210,!1)}var Dl=new W("",{providedIn:"root",factory:()=>aN}),aN="ng",Zp=new W(""),Nt=new W("",{providedIn:"platform",factory:()=>"unknown"});var Jp=new W("",{providedIn:"root",factory:()=>sN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uN="h",cN="b";var lN=()=>null;function Xp(n,e,t=!1){return lN(n,e,t)}var xD=!1,dN=new W("",{providedIn:"root",factory:()=>xD});var Xc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lE})`}};function eg(n){return n instanceof Xc?n.changingThisBreaksApplicationSecurity:n}function RD(n,e){let t=hN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${lE})`)}return t===e}function hN(n){return n instanceof Xc&&n.getTypeName()||null}var fN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function MD(n){return n=String(n),n.match(fN)?n:"unsafe:"+n}var tg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(tg||{});function ND(n){let e=pN();return e?e.sanitize(tg.URL,n)||"":RD(n,"URL")?eg(n):MD(fa(n))}function pN(){let n=rt();return n&&n[In].sanitizer}function PD(n){return n instanceof Function?n():n}function gN(n){return(n??j(Zt)).get(Nt)==="browser"}var pi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(pi||{}),mN;function ng(n,e){return mN(n,e)}function yo(n,e,t,r,i){if(r!=null){let o,s=!1;Wn(r)?o=r:si(r)&&(s=!0,r=r[Gn]);let a=Hn(r);n===0&&t!==null?i==null?VD(e,t,a):el(e,t,a,i||null,!0):n===1&&t!==null?el(e,t,a,i||null,!0):n===2?MN(e,a,s):n===3&&e.destroyNode(a),o!=null&&PN(e,n,o,t,i)}}function yN(n,e){return n.createText(e)}function vN(n,e,t){n.setValue(e,t)}function kD(n,e,t){return n.createElement(e,t)}function _N(n,e){OD(n,e),e[Gn]=null,e[un]=null}function wN(n,e,t,r,i,o){r[Gn]=i,r[un]=e,Cl(n,r,t,1,i,o)}function OD(n,e){e[In].changeDetectionScheduler?.notify(9),Cl(n,e,e[Mt],2,null,null)}function IN(n){let e=n[ya];if(!e)return Wf(n[fe],n);for(;e;){let t=null;if(si(e))t=e[ya];else{let r=e[Yt];r&&(t=r)}if(!t){for(;e&&!e[an]&&e!==n;)si(e)&&Wf(e[fe],e),e=e[Ct];e===null&&(e=n),si(e)&&Wf(e[fe],e),t=e&&e[an]}e=t}}function EN(n,e,t,r){let i=Yt+r,o=t.length;r>0&&(t[i-1][an]=e),r<o-Yt?(e[an]=t[i],IE(t,Yt+r,e)):(t.push(e),e[an]=null),e[Ct]=t;let s=e[Co];s!==null&&t!==s&&FD(s,e);let a=e[To];a!==null&&a.insertView(n),op(e),e[ne]|=128}function FD(n,e){let t=n[zc],r=e[Ct];if(si(r))n[ne]|=Gc.HasTransplantedViews;else{let i=r[Ct][En];e[En]!==i&&(n[ne]|=Gc.HasTransplantedViews)}t===null?n[zc]=[e]:t.push(e)}function rg(n,e){let t=n[zc],r=t.indexOf(e);t.splice(r,1)}function gp(n,e){if(n.length<=Yt)return;let t=Yt+e,r=n[t];if(r){let i=r[Co];i!==null&&i!==n&&rg(i,r),e>0&&(n[t-1][an]=r[an]);let o=Uc(n,Yt+e);_N(r[fe],r);let s=o[To];s!==null&&s.detachView(o[fe]),r[Ct]=null,r[an]=null,r[ne]&=-129}return r}function LD(n,e){if(!(e[ne]&256)){let t=e[Mt];t.destroyNode&&Cl(n,e,t,3,null,null),IN(e)}}function Wf(n,e){if(e[ne]&256)return;let t=Te(null);try{e[ne]&=-129,e[ne]|=256,e[Qt]&&_f(e[Qt]),CN(n,e),DN(n,e),e[fe].type===1&&e[Mt].destroy();let r=e[Co];if(r!==null&&Wn(e[Ct])){r!==e[Ct]&&rg(r,e);let i=e[To];i!==null&&i.detachView(n)}fp(e)}finally{Te(t)}}function DN(n,e){let t=n.cleanup,r=e[VI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[VI]=null);let i=e[vr];if(i!==null){e[vr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function CN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof va)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];yr(4,a,c);try{c.call(a)}finally{yr(5,a,c)}}else{yr(4,i,o);try{o.call(i)}finally{yr(5,i,o)}}}}}function TN(n,e,t){return bN(n,e.parent,t)}function bN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Gn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===wn.None||o===wn.Emulated)return null}return Cn(r,t)}}function el(n,e,t,r,i){n.insertBefore(e,t,r,i)}function VD(n,e,t){n.appendChild(e,t)}function ZI(n,e,t,r,i){r!==null?el(n,e,t,r,i):VD(n,e,t)}function jD(n,e){return n.parentNode(e)}function SN(n,e){return n.nextSibling(e)}function AN(n,e,t){return RN(n,e,t)}function xN(n,e,t){return n.type&40?Cn(n,t):null}var RN=xN,JI;function ig(n,e,t,r){let i=TN(n,r,e),o=e[Mt],s=r.parent||e[un],a=AN(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)ZI(o,i,t[c],a,!1);else ZI(o,i,t,a,!1);JI!==void 0&&JI(o,r,e,t,i)}function la(n,e){if(e!==null){let t=e.type;if(t&3)return Cn(e,n);if(t&4)return mp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return la(n,r);{let i=n[e.index];return Wn(i)?mp(-1,i):Hn(i)}}else{if(t&128)return la(n,e.next);if(t&32)return ng(e,n)()||Hn(n[e.index]);{let r=BD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ci(n[En]);return la(i,r)}else return la(n,e.next)}}}return null}function BD(n,e){if(e!==null){let r=n[En][un],i=e.projection;return r.projection[i]}return null}function mp(n,e){let t=Yt+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return la(r,i)}return e[ui]}function MN(n,e,t){n.removeChild(null,e,t)}function og(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&di(Hn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)og(n,e,t.child,r,i,o,!1),yo(e,n,i,a,o);else if(c&32){let l=ng(t,r),h;for(;h=l();)yo(e,n,i,h,o);yo(e,n,i,a,o)}else c&16?NN(n,e,r,t,i,o):yo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Cl(n,e,t,r,i,o){og(t,r,n.firstChild,e,i,o,!1)}function NN(n,e,t,r,i,o){let s=t[En],c=s[un].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];yo(e,n,i,h,o)}else{let l=c,h=s[Ct];DD(r)&&(l.flags|=128),og(n,e,l,h,i,o,!0)}}function PN(n,e,t,r,i){let o=t[ui],s=Hn(t);o!==s&&yo(e,n,r,o,i);for(let a=Yt;a<t.length;a++){let c=t[a];Cl(c[fe],c,n,e,r,o)}}function kN(n,e,t){n.setAttribute(e,"style",t)}function UD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $D(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Jf(n,e,r),i!==null&&UD(n,e,i),o!==null&&kN(n,e,o)}var gi={};function Ee(n=1){HD(fi(),rt(),wl()+n,!1)}function HD(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Lc(e,o,0,t)}li(t)}function Ze(n,e=ae.Default){let t=rt();if(t===null)return O(n,e);let r=Tn();return mD(r,t,Kt(n),e)}function qD(){let n="invalid";throw new Error(n)}function zD(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&_r.SignalBased&&(a=e[r][Xw]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&_r.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):BE(e,a,r,o)}finally{Te(s)}}function ON(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)li(~i);else{let o=i,s=t[++r],a=t[++r];bM(s,o);let c=e[o];a(2,c)}}}finally{li(-1)}}function Tl(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Gn]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),zE(p),p[Ct]=p[Ea]=n,p[Ir]=t,p[In]=s||n&&n[In],p[Mt]=a||n&&n[Mt],p[Do]=c||n&&n[Do]||null,p[un]=o,p[gl]=iN(),p[Hc]=h,p[FE]=l,p[En]=e.type==2?n[En]:p,p}function bl(n,e,t,r,i){let o=n.data[e];if(o===null)o=FN(n,e,t,r,i),TM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=wM();o.injectorIndex=s===null?-1:s.injectorIndex}return Ca(o,!0),o}function FN(n,e,t,r,i){let o=YE(),s=ZE(),a=s?o:o&&o.parent,c=n.data[e]=UN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function GD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function WD(n,e,t,r,i){let o=wl(),s=r&2;try{li(-1),s&&e.length>Er&&HD(n,e,Er,!1),yr(s?2:0,i),t(r,i)}finally{li(o),yr(s?3:1,i)}}function KD(n,e,t){if(VE(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Te(r)}}}function QD(n,e,t){QE()&&(WN(n,e,t,Cn(t,e)),(t.flags&64)===64&&tC(n,e,t))}function YD(n,e,t=Cn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function ZD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sg(n,e,t,r,i,o,s,a,c,l,h){let p=Er+r,m=p+i,v=LN(p,m),b=typeof l=="function"?l():l;return v[fe]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:h}}function LN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:gi);return t}function VN(n,e,t,r){let o=r.get(dN,xD)||t===wn.ShadowDom,s=n.selectRootElement(e,o);return jN(s),s}function jN(n){BN(n)}var BN=()=>null;function UN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function XI(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=_r.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?eE(r,t,l,a,c):eE(r,t,l,a)}return r}function eE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function $N(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;c=XI(0,p.inputs,h,c,v),l=XI(1,p.outputs,h,l,b);let M=c!==null&&s!==null&&!Lp(e)?nP(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function HN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function JD(n,e,t,r,i,o,s,a){let c=Cn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ag(n,t,h,r,i),ml(e)&&qN(t,e.index)):e.type&3?(r=HN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function qN(n,e){let t=Mo(e,n);t[ne]&16||(t[ne]|=64)}function XD(n,e,t,r){if(QE()){let i=r===null?null:{"":-1},o=QN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&eC(n,e,t,s,i,a),i&&YN(t,r,i)}t.mergedAttrs=Fp(t.mergedAttrs,t.attrs)}function eC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)jM(hD(t,e),n,r[l].type);JN(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=GD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Fp(t.mergedAttrs,h.hostAttrs),XN(n,t,e,c,h),ZN(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}$N(n,t,o)}function zN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;GN(s)!=a&&s.push(a),s.push(t,r,o)}}function GN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function WN(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;ml(t)&&eP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||hD(t,e),di(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=_a(e,n,a,t);if(di(l,e),s!==null&&tP(e,a-i,l,c,t,s),Da(c)){let h=Mo(t.index,e);h[Ir]=_a(e,n,a,t)}}}function tC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=SM();try{li(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];sp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&KN(c,l)}}finally{li(-1),sp(s)}}function KN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function QN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(LR(e,s.selectors,!1))if(r||(r=[]),Da(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;yp(n,e,c)}else r.unshift(s),yp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function yp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function YN(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function ZN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Da(e)&&(t[""]=n)}}function JN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function XN(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Io(i.type,!0)),s=new va(o,Da(i),Ze);n.blueprint[r]=s,t[r]=s,zN(n,e,r,GD(n,t,i.hostVars,gi),i)}function eP(n,e,t){let r=Cn(e,n),i=ZD(t),o=n[In].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Sl(n,Tl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function tP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];zD(r,t,c,l,h,p)}}function nP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function nC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function rC(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];eD(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Sl(n,e){return n[ya]?n[jI][an]=e:n[ya]=e,n[jI]=e,e}function vp(n,e,t){eD(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function rP(n,e){let t=n[Do],r=t?t.get(qn,null):null;r&&r.handleError(e)}function ag(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];zD(h,l,r,a,c,i)}}function iC(n,e,t){let r=dM(e,n);vN(n[Mt],r,t)}function iP(n,e){let t=Mo(e,n),r=t[fe];oP(r,t);let i=t[Gn];i!==null&&t[Hc]===null&&(t[Hc]=Xp(i,t[Do])),ug(r,t,t[Ir])}function oP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ug(n,e,t){Up(e);try{let r=n.viewQuery;r!==null&&vp(1,r,t);let i=n.template;i!==null&&WD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[To]?.finishViewCreation(n),n.staticContentQueries&&rC(n,e),n.staticViewQueries&&vp(2,n.viewQuery,t);let o=n.components;o!==null&&sP(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,$p()}}function sP(n,e){for(let t=0;t<e.length;t++)iP(n,e[t])}function aP(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[ne]&4096?4096:16,c=Tl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Co]=l;let h=n[To];return h!==null&&(c[To]=h.createEmbeddedView(o)),ug(o,c,t),c}finally{Te(i)}}function tE(n,e){return!e||e.firstChild===null||DD(n)}function uP(n,e,t,r=!0){let i=e[fe];if(EN(i,e,n,t),r){let s=mp(t,n),a=e[Mt],c=jD(a,n[ui]);c!==null&&wN(i,n[un],a,e,c,s)}let o=e[Hc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function tl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Hn(o)),Wn(o)&&cP(o,r);let s=t.type;if(s&8)tl(n,e,t.child,r);else if(s&32){let a=ng(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=BD(e,t);if(Array.isArray(a))r.push(...a);else{let c=ci(e[En]);tl(c[fe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function cP(n,e){for(let t=Yt;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&tl(r[fe],r,i,e)}n[ui]!==n[Gn]&&e.push(n[ui])}var oC=[];function lP(n){return n[Qt]??dP(n)}function dP(n){let e=oC.pop()??Object.create(fP);return e.lView=n,e}function hP(n){n.lView[Qt]!==n&&(n.lView=null,oC.push(n))}var fP=Re(V({},mf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{_l(n.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function pP(n){let e=n[Qt]??Object.create(gP);return e.lView=n,e}var gP=Re(V({},mf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ci(n.lView);for(;e&&!sC(e[fe]);)e=ci(e);e&&GE(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function sC(n){return n.type!==2}var mP=100;function aC(n,e=!0,t=0){let r=n[In],i=r.rendererFactory,o=!1;o||i.begin?.();try{yP(n,t)}catch(s){throw e&&rP(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function yP(n,e){let t=JE();try{UI(!0),_p(n,e);let r=0;for(;vl(n);){if(r===mP)throw new X(103,!1);r++,_p(n,1)}}finally{UI(t)}}function vP(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[In].inlineEffectRunner?.flush(),Up(e);let a=!0,c=null,l=null;o||(sC(n)?(l=lP(e),c=yf(l)):eI()===null?(a=!1,l=pP(e),c=yf(l)):e[Qt]&&(_f(e[Qt]),e[Qt]=null));try{zE(e),DM(n.bindingStartIndex),t!==null&&WD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Fc(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Lc(e,v,0,null),Hf(e,0)}if(s||_P(e),uC(e,0),n.contentQueries!==null&&rC(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Fc(e,v)}else{let v=n.contentHooks;v!==null&&Lc(e,v,1),Hf(e,1)}ON(n,e);let p=n.components;p!==null&&lC(e,p,0);let m=n.viewQuery;if(m!==null&&vp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Fc(e,v)}else{let v=n.viewHooks;v!==null&&Lc(e,v,2),Hf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[$f]){for(let v of e[$f])v();e[$f]=null}o||(e[ne]&=-73)}catch(h){throw o||_l(e),h}finally{l!==null&&(tI(l,c),a&&hP(l)),$p()}}function uC(n,e){for(let t=TD(n);t!==null;t=bD(t))for(let r=Yt;r<t.length;r++){let i=t[r];cC(i,e)}}function _P(n){for(let e=TD(n);e!==null;e=bD(e)){if(!(e[ne]&Gc.HasTransplantedViews))continue;let t=e[zc];for(let r=0;r<t.length;r++){let i=t[r];GE(i)}}}function wP(n,e,t){let r=Mo(e,n);cC(r,t)}function cC(n,e){Bp(n)&&_p(n,e)}function _p(n,e){let r=n[fe],i=n[ne],o=n[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vf(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)vP(r,n,r.template,n[Ir]);else if(i&8192){uC(n,1);let a=r.components;a!==null&&lC(n,a,1)}}function lC(n,e,t){for(let r=0;r<e.length;r++)wP(n,e[r],t)}function dC(n,e){let t=JE()?64:1088;for(n[In].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=ci(n);if(rp(n)&&!r)return n;n=r}return null}var hi=class{get rootNodes(){let e=this._lView,t=e[fe];return tl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ir]}set context(e){this._lView[Ir]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Wn(e)){let t=e[qc],r=t?t.indexOf(this):-1;r>-1&&(gp(e,r),Uc(t,r))}this._attachedToViewContainer=!1}LD(this._lView[fe],this._lView)}onDestroy(e){WE(this._lView,e)}markForCheck(){dC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){op(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,aC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=rp(this._lView),t=this._lView[Co];t!==null&&!e&&rg(t,this._lView),OD(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=rp(this._lView),r=this._lView[Co];r!==null&&!t&&FD(r,this._lView),op(this._lView)}},cg=(()=>{class n{static{this.__NG_ELEMENT_ID__=DP}}return n})(),IP=cg,EP=class extends IP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=aP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new hi(i)}};function DP(){return CP(Tn(),rt())}function CP(n,e){return n.type&4?new EP(e,n,Il(n,e)):null}var Dq=new RegExp(`^(\\d+)*(${cN}|${uN})*(.*)`);var TP=()=>null;function nE(n,e){return TP(n,e)}var bo=class{},lg=new W("",{providedIn:"root",factory:()=>!1});var hC=new W(""),fC=new W(""),wp=class{},nl=class{};function bP(n){let e=Error(`No component factory found for ${jt(n)}.`);return e[SP]=n,e}var SP="ngComponent";var Ip=class{resolveComponentFactory(e){throw bP(e)}},So=class{static{this.NULL=new Ip}},Ao=class{};var AP=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function Ep(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=AI(i,a);else if(o==2){let c=a,l=e[++s];r=AI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var rl=class extends So{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=wr(e);return new xo(t,this.ngModule)}};function rE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:_r.None;e?t.push({propName:s,templateName:r,isSignal:(a&_r.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function xP(n){let e=n.toLowerCase();return e==="svg"?cM:e==="math"?lM:null}var xo=class extends nl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=rE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return rE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=UR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof Bt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ap(e,s):e,c=a.get(Ao,null);if(c===null)throw new X(407,!1);let l=a.get(AP,null),h=a.get(bo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?VN(m,r,this.componentDef.encapsulation,a):kD(m,v,xP(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;b!==null&&(N=Xp(b,a,!0));let B=sg(0,null,null,1,0,null,null,null,null,null,null),q=Tl(null,B,null,M,null,null,p,m,a,null,N);Up(q);let F,Y,ee=null;try{let Z=this.componentDef,I,y=null;Z.findHostDirectiveDefs?(I=[],y=new Map,Z.findHostDirectiveDefs(Z,I,y),I.push(Z)):I=[Z];let w=RP(q,b);ee=MP(w,b,Z,I,q,p,m),Y=qE(B,Er),b&&kP(m,Z,b,r),t!==void 0&&OP(Y,this.ngContentSelectors,t),F=PP(ee,Z,I,y,q,[FP]),ug(B,q,null)}catch(Z){throw ee!==null&&fp(ee),fp(q),Z}finally{$p()}return new Dp(this.componentType,F,Il(Y,q),q,Y)}finally{Te(o)}}},Dp=class extends wp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new hi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;ag(o[fe],o,i,e,t),this.previousInputValues.set(e,t);let s=Mo(this._tNode.index,o);dC(s,1)}}get injector(){return new ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RP(n,e){let t=n[fe],r=Er;return n[r]=e,bl(t,r,2,"#host",null)}function MP(n,e,t,r,i,o,s){let a=i[fe];NP(r,n,e,s);let c=null;e!==null&&(c=Xp(e,i[Do]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Tl(i,ZD(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&yp(a,n,r.length-1),Sl(i,p),i[n.index]=p}function NP(n,e,t,r){for(let i of n)e.mergedAttrs=Fp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ep(e,e.mergedAttrs,!0),t!==null&&$D(r,t,e))}function PP(n,e,t,r,i,o){let s=Tn(),a=i[fe],c=Cn(s,i);eC(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=_a(i,a,p,s);di(m,i)}tC(a,i,s),c&&di(c,i);let l=_a(i,a,s.directiveStart+s.componentOffset,s);if(n[Ir]=i[Ir]=l,o!==null)for(let h of o)h(l,e);return KD(a,s,i),l}function kP(n,e,t,r){if(r)Jf(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=$R(e.selectors[0]);i&&Jf(n,t,i),o&&o.length>0&&UD(n,t,o.join(" "))}}function OP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function FP(){let n=Tn();zp(rt()[fe],n)}var Ta=(()=>{class n{static{this.__NG_ELEMENT_ID__=LP}}return n})();function LP(){let n=Tn();return jP(n,rt())}var VP=Ta,pC=class extends VP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Il(this._hostTNode,this._hostLView)}get injector(){return new ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=Gp(this._hostTNode,this._hostLView);if(cD(e)){let t=Qc(e,this._hostLView),r=Kc(e),i=t[fe].data[r+8];return new ai(i,t)}else return new ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=iE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Yt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,tE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!oM(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let c=s?e:new xo(wr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(Bt,null);M&&(o=M)}let h=wr(c.componentType??{}),p=nE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,tE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(hM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ct],l=new pC(c,c[un],c[Ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return uP(s,i,o,r),e.attachToViewContainerRef(),IE(Kf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=iE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=gp(this._lContainer,t);r&&(Uc(Kf(this._lContainer),t),LD(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=gp(this._lContainer,t);return r&&Uc(Kf(this._lContainer),t)!=null?new hi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function iE(n){return n[qc]}function Kf(n){return n[qc]||(n[qc]=[])}function jP(n,e){let t,r=e[n.index];return Wn(r)?t=r:(t=nC(r,e,null,n),e[n.index]=t,Sl(e,t)),UP(t,e,n,r),new pC(t,n,e)}function BP(n,e){let t=n[Mt],r=t.createComment(""),i=Cn(e,n),o=jD(t,i);return el(t,o,r,SN(t,i),!1),r}var UP=qP,$P=()=>!1;function HP(n,e,t){return $P(n,e,t)}function qP(n,e,t,r){if(n[ui])return;let i;t.type&8?i=Hn(r):i=BP(e,t),n[ui]=i}var oE=new Set;function dg(n){oE.has(n)||(oE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function zP(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(QP))}return o}return il.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>YP(o));e.push(c)}),WP(),Promise.all(e).then(()=>{})}var il=new Map,GP=new Set;function WP(){let n=il;return il=new Map,n}function KP(){return il.size===0}function QP(n){return typeof n=="string"?n:n.text()}function YP(n){GP.delete(n)}var Dr=class{},wa=class{};var ol=class extends Dr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rl(this);let o=xE(e);this._bootstrapComponents=PD(o.bootstrap),this._r3Injector=_D(e,t,[{provide:Dr,useValue:this},{provide:So,useValue:this.componentFactoryResolver},...r],jt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},sl=class extends wa{constructor(e){super(),this.moduleType=e}create(e){return new ol(this.moduleType,e,[])}};function ZP(n,e,t){return new ol(n,e,t,!1)}var Cp=class extends Dr{constructor(e){super(),this.componentFactoryResolver=new rl(this),this.instance=null;let t=new ma([...e.providers,{provide:Dr,useValue:this},{provide:So,useValue:this.componentFactoryResolver}],e.parent||jp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Al(n,e,t=null){return new Cp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function gC(n){return XP(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function JP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function XP(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function al(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function e1(n,e,t,r){let i=al(n,e,t);return al(n,e+1,r)||i}function t1(n){return(n.flags&32)===32}function n1(n,e,t,r,i,o,s,a,c){let l=e.consts,h=bl(e,n,4,s||null,a||null);XD(e,t,h,Wc(l,c)),zp(e,h);let p=h.tView=sg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function r1(n,e,t,r,i,o,s,a,c,l){let h=t+Er,p=e.firstCreatePass?n1(h,e,n,r,i,o,s,a,c):e.data[h];Ca(p,!1);let m=i1(e,n,p,t);Hp()&&ig(e,n,m,p),di(m,n);let v=nC(m,n,m,p);return n[h]=v,Sl(n,v),HP(v,p,n),jE(p)&&QD(e,n,p),c!=null&&YD(n,p,l),p}function mi(n,e,t,r,i,o,s,a){let c=rt(),l=fi(),h=Wc(l.consts,o);return r1(c,l,n,e,t,r,i,h,s,a),mi}var i1=o1;function o1(n,e,t,r){return qp(!0),e[Mt].createComment("")}var vo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(vo||{}),mC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Tp=class n{constructor(){this.ngZone=j(ge),this.scheduler=j(bo),this.errorHandler=j(qn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[vo.EarlyRead,vo.Write,vo.MixedReadWrite,vo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},bp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function hg(n,e){!e?.injector&&rM(hg);let t=e?.injector??j(Zt);return gN(t)?(dg("NgAfterNextRender"),a1(n,t,e,!0)):u1}function s1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function a1(n,e,t,r){let i=e.get(mC);i.impl??=e.get(Tp);let o=t?.phase??vo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Kp):null,a=new bp(i.impl,s1(n,o),r,s);return i.impl.register(a),a}var u1={destroy(){}};function yC(n,e,t,r){return al(n,XE(),t)?e+fa(t)+r:gi}function c1(n,e,t,r,i,o){let s=EM(),a=e1(n,s,t,i);return CM(2),a?e+fa(t)+r+fa(i)+o:gi}function yi(n,e,t){let r=rt(),i=XE();if(al(r,i,e)){let o=fi(),s=sD();JD(o,s,r,n,e,r[Mt],t,!1)}return yi}function sE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";ag(n,t,o[s],s,r)}function l1(n,e,t,r,i,o){let s=e.consts,a=Wc(s,i),c=bl(e,n,2,r,a);return XD(e,t,c,Wc(s,o)),c.attrs!==null&&Ep(c,c.attrs,!1),c.mergedAttrs!==null&&Ep(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function le(n,e,t,r){let i=rt(),o=fi(),s=Er+n,a=i[Mt],c=o.firstCreatePass?l1(s,o,i,e,t,r):o.data[s],l=d1(o,i,c,a,e,n);i[s]=l;let h=jE(c);return Ca(c,!0),$D(a,l,c),!t1(c)&&Hp()&&ig(o,i,l,c),pM()===0&&di(l,i),gM(),h&&(QD(o,i,c),KD(o,c,i)),r!==null&&YD(i,c),le}function ue(){let n=Tn();ZE()?IM():(n=n.parent,Ca(n,!1));let e=n;vM(e)&&_M(),mM();let t=fi();return t.firstCreatePass&&(zp(t,n),VE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&PM(e)&&sE(t,e,rt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kM(e)&&sE(t,e,rt(),e.stylesWithoutHost,!1),ue}function De(n,e,t,r){return le(n,e,t,r),ue(),De}var d1=(n,e,t,r,i,o)=>(qp(!0),kD(r,i,xM()));var ul="en-US";var h1=ul;function f1(n){typeof n=="string"&&(h1=n.toLowerCase().replace(/_/g,"-"))}function fg(n,e,t){return vC(n,"",e,"",t),fg}function vC(n,e,t,r,i){let o=rt(),s=yC(o,e,t,r);if(s!==gi){let a=fi(),c=sD();JD(a,c,o,n,s,o[Mt],i,!1)}return vC}function pe(n,e=""){let t=rt(),r=fi(),i=n+Er,o=r.firstCreatePass?bl(r,i,1,e,null):r.data[i],s=p1(r,t,o,e,n);t[i]=s,Hp()&&ig(r,t,s,o),Ca(o,!1)}var p1=(n,e,t,r,i)=>(qp(!0),yN(e[Mt],r));function xl(n){return Me("",n,""),xl}function Me(n,e,t){let r=rt(),i=yC(r,n,e,t);return i!==gi&&iC(r,wl(),i),Me}function pg(n,e,t,r,i){let o=rt(),s=c1(o,n,e,t,r,i);return s!==gi&&iC(o,wl(),s),pg}var g1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=NE(!1,t.type),i=r.length>0?Al([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O(Bt))})}}return n})();function _C(n){dg("NgStandalone"),n.getStandaloneInjector=e=>e.get(g1).getOrCreateStandaloneInjector(n)}var Pc=null;function m1(n){Pc!==null&&(n.defaultEncapsulation!==Pc.defaultEncapsulation||n.preserveWhitespaces!==Pc.preserveWhitespaces)||(Pc=n)}var Cr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},wC=new Cr("18.2.13");var Rl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var gg=new W(""),ba=new W(""),Ml=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,mg||(y1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(ge),O(Nl),O(ba))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Nl=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return mg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function y1(n){mg=n}var mg;function Sa(n){return!!n&&typeof n.then=="function"}function IC(n){return!!n&&typeof n.subscribe=="function"}var Pl=new W(""),EC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(Pl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Sa(o))t.push(o);else if(IC(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yg=new W("");function v1(){nI(()=>{throw new X(600,!1)})}function _1(n){return n.isBoundToModule}var w1=10;function I1(n,e,t){try{let r=t();return Sa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function DC(n,e){return Array.isArray(e)?e.reduce(DC,n):V(V({},n),e)}var Tr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(tN),this.afterRenderManager=j(mC),this.zonelessEnabled=j(lg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=j(No).hasPendingTasks.pipe(G(t=>!t)),this._injector=j(Bt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof nl;if(!this._injector.get(EC).done){let m=!i&&AE(t),v=!1;throw new X(405,v)}let s;i?s=t:s=this._injector.get(So).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=_1(s)?void 0:this._injector.get(Dr),c=r||s.selector,l=s.create(Zt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(gg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Vc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ao,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<w1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)E1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>vl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Vc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(yg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Vc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Vc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function E1(n,e,t,r){if(!t&&!vl(n))return;aC(n,e,t&&!r?0:1)}var Sp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},kl=(()=>{class n{compileModuleSync(t){return new sl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=xE(t),o=PD(i.declarations).reduce((s,a)=>{let c=wr(a);return c&&s.push(new xo(c)),s},[]);return new Sp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),D1=new W("");function C1(n,e,t){let r=new sl(t);return Promise.resolve(r)}function aE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var T1=(()=>{class n{constructor(){this.zone=j(ge),this.changeDetectionScheduler=j(bo),this.applicationRef=j(Tr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ge(Re(V({},CC()),{scheduleInRootZone:t})),[{provide:ge,useFactory:n},{provide:Eo,multi:!0,useFactory:()=>{let r=j(T1,{optional:!0});return()=>r.initialize()}},{provide:Eo,multi:!0,useFactory:()=>{let r=j(S1);return()=>{r.initialize()}}},e===!0?{provide:hC,useValue:!0}:[],{provide:fC,useValue:t??wD}]}function CC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var S1=(()=>{class n{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=j(ge),this.pendingTasks=j(No)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var A1=(()=>{class n{constructor(){this.appRef=j(Tr),this.taskService=j(No),this.ngZone=j(ge),this.zonelessEnabled=j(lg),this.disableScheduling=j(hC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(fC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jc||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?WI:ID;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,WI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function x1(){return typeof $localize<"u"&&$localize.locale||ul}var vg=new W("",{providedIn:"root",factory:()=>j(vg,ae.Optional|ae.SkipSelf)||x1()});var cl=new W("");function kc(n){return!n.moduleRef}function R1(n){let e=kc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ge);return t.run(()=>{kc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(qn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),kc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(cl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(cl);s.add(o),n.moduleRef.onDestroy(()=>{Vc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return I1(r,t,()=>{let o=e.get(EC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(vg,ul);if(f1(s||ul),kc(n)){let a=e.get(Tr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return M1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function M1(n,e){let t=n.injector.get(Tr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var TC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>eN(r?.ngZone,Re(V({},CC({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[b1({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:bo,useExisting:A1}],c=ZP(t.moduleType,this.injector,a);return R1({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=DC({},r);return C1(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(cl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Zt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ha=null,bC=new W("");function N1(n){if(ha&&!ha.get(bC,!1))throw new X(400,!1);v1(),ha=n;let e=n.get(TC);return O1(n),e}function _g(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=SC();if(!s||s.injector.get(bC,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):N1(P1(a,r))}return k1(i)}}function P1(n=[],e){return Zt.create({name:e,providers:[{provide:pl,useValue:"platform"},{provide:cl,useValue:new Set([()=>ha=null])},...n]})}function k1(n){let e=SC();if(!e)throw new X(401,!1);return e}function SC(){return ha?.get(TC)??null}function O1(n){n.get(Zp,null)?.forEach(t=>t())}function wg(){return!1}var Aa=(()=>{class n{static{this.__NG_ELEMENT_ID__=F1}}return n})();function F1(n){return L1(Tn(),rt(),(n&16)===16)}function L1(n,e,t){if(ml(n)&&!t){let r=Mo(n.index,e);return new hi(r,r)}else if(n.type&175){let r=e[En];return new hi(r,e)}return null}var Ap=class{constructor(){}supports(e){return gC(e)}create(e){return new xp(e)}},V1=(n,e)=>e,xp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||V1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<uE(r,i,o)?t:r,a=uE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!gC(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,JP(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Rp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ll),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ll),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Mp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ll=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Mp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function uE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function cE(){return new Ig([new Ap])}var Ig=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:cE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||cE()),deps:[[n,new kp,new Ro]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var AC=_g(null,"core",[]),xC=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Tr))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function RC(n){let e=wr(n);if(!e)return null;let t=new xo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var OC=null;function vi(){return OC}function FC(n){OC??=n}var Ol=class{};var Pt=new W(""),Tg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j($1),providedIn:"platform"})}}return n})(),LC=new W(""),$1=(()=>{class n extends Tg{constructor(){super(),this._doc=j(Pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vi().getBaseHref(this._doc)}onPopState(t){let r=vi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=vi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function bg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function MC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Kn(n){return n&&n[0]!=="?"?"?"+n:n}var _i=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(Sg),providedIn:"root"})}}return n})(),VC=new W(""),Sg=(()=>{class n extends _i{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return bg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Kn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Kn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Kn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Tg),O(VC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jC=(()=>{class n extends _i{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=bg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Kn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Kn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Tg),O(VC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Po=(()=>{class n{constructor(t){this._subject=new Dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=z1(MC(NC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Kn(r))}normalize(t){return n.stripTrailingSlash(q1(this._basePath,NC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Kn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Kn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Kn}static{this.joinWithSlash=bg}static{this.stripTrailingSlash=MC}static{this.\u0275fac=function(r){return new(r||n)(O(_i))}}static{this.\u0275prov=H({token:n,factory:()=>H1(),providedIn:"root"})}}return n})();function H1(){return new Po(O(_i))}function q1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function NC(n){return n.replace(/\/index.html$/,"")}function z1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function BC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Eg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ko=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Eg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),PC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);PC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ze(Ta),Ze(cg),Ze(Ig))}}static{this.\u0275dir=fl({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function PC(n,e){n.context.$implicit=e.item}var UC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})(),Ag="browser",G1="server";function W1(n){return n===Ag}function wi(n){return n===G1}var $C=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>W1(j(Nt))?new Dg(j(Pt),window):new Cg})}}return n})(),Dg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=K1(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function K1(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Cg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Fl=class{};var Ng=class extends Ol{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Pg=class n extends Ng{static makeCurrent(){FC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Y1();return t==null?null:Z1(t)}resetBaseElement(){xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return BC(document.cookie,e)}},xa=null;function Y1(){return xa=xa||document.querySelector("base"),xa?xa.getAttribute("href"):null}function Z1(n){return new URL(n,document.baseURI).pathname}var kg=class{addToWindow(e){zn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new X(5103,!1);return o},zn.getAllAngularTestabilities=()=>e.getAllTestabilities(),zn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=zn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};zn.frameworkStabilizers||(zn.frameworkStabilizers=[]),zn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?vi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},J1=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Og=new W(""),GC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Og),O(ge))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ll=class{constructor(e){this._doc=e}},Rg="ng-app-id",WC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wi(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Rg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Rg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Rg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Pt),O(Dl),O(Jp,8),O(Nt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Mg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lg=/%COMP%/g,KC="%COMP%",X1=`_nghost-${KC}`,ek=`_ngcontent-${KC}`,tk=!0,nk=new W("",{providedIn:"root",factory:()=>tk});function rk(n){return ek.replace(Lg,n)}function ik(n){return X1.replace(Lg,n)}function QC(n,e){return e.map(t=>t.replace(Lg,n))}var HC=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=wi(a),this.defaultRenderer=new Ra(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===wn.ShadowDom&&(r=Re(V({},r),{encapsulation:wn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Vl?i.applyToHost(t):i instanceof Ma&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case wn.Emulated:o=new Vl(c,l,r,this.appId,h,s,a,p);break;case wn.ShadowDom:return new Fg(c,l,t,r,s,a,this.nonce,p);default:o=new Ma(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(GC),O(WC),O(Dl),O(nk),O(Pt),O(Nt),O(ge),O(Jp))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ra=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Mg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Mg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Mg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(pi.DashCase|pi.Important)?e.style.setProperty(t,r,i&pi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&pi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=vi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function qC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Fg=class extends Ra{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=QC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ma=class extends Ra{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?QC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Vl=class extends Ma{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=rk(l),this.hostAttr=ik(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},ok=(()=>{class n extends Ll{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),zC=["alt","control","meta","shift"],sk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ak={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},uk=(()=>{class n extends Ll{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),zC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=sk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zC.forEach(s=>{if(s!==i){let a=ak[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function ck(){Pg.makeCurrent()}function lk(){return new qn}function dk(){return AD(document),document}var hk=[{provide:Nt,useValue:Ag},{provide:Zp,useValue:ck,multi:!0},{provide:Pt,useFactory:dk,deps:[]}],YC=_g(AC,"browser",hk),fk=new W(""),pk=[{provide:ba,useClass:kg,deps:[]},{provide:gg,useClass:Ml,deps:[ge,Nl,ba]},{provide:Ml,useClass:Ml,deps:[ge,Nl,ba]}],gk=[{provide:pl,useValue:"root"},{provide:qn,useFactory:lk,deps:[]},{provide:Og,useClass:ok,multi:!0,deps:[Pt,ge,Nt]},{provide:Og,useClass:uk,multi:!0,deps:[Pt]},HC,WC,GC,{provide:Ao,useExisting:HC},{provide:Fl,useClass:J1,deps:[]},[]],ZC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Dl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(fk,12))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({providers:[...gk,...pk],imports:[UC,xC]})}}return n})();var JC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",Ga=Symbol("RouteTitle"),$g=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bo(n){return new $g(n)}function mk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function yk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bn(n[t],e[t]))return!1;return!0}function bn(n,e){let t=n?Hg(n):void 0,r=e?Hg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!lT(n[i],e[i]))return!1;return!0}function Hg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function lT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function dT(n){return n.length>0?n[n.length-1]:null}function Sr(n){return kf(n)?n:Sa(n)?Ie(Promise.resolve(n)):J(n)}var vk={exact:fT,subset:pT},hT={exact:_k,subset:wk,ignored:()=>!0};function eT(n,e,t){return vk[t.paths](n.root,e.root,t.matrixParams)&&hT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _k(n,e){return bn(n,e)}function fT(n,e,t){if(!Ei(n.segments,e.segments)||!Ul(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!fT(n.children[r],e.children[r],t))return!1;return!0}function wk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lT(n[t],e[t]))}function pT(n,e,t){return gT(n,e,e.segments,t)}function gT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ei(i,t)||e.hasChildren()||!Ul(i,t,r))}else if(n.segments.length===t.length){if(!Ei(n.segments,t)||!Ul(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!pT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ei(n.segments,i)||!Ul(n.segments,i,r)||!n.children[oe]?!1:gT(n.children[oe],e,o,r)}}function Ul(n,e,t){return e.every((r,i)=>hT[t](n[i].parameters,r.parameters))}var Yn=class{constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){return Dk.serialize(this)}},Ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $l(this)}},Ii=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bo(this.parameters),this._parameterMap}toString(){return yT(this)}};function Ik(n,e){return Ei(n,e)&&n.every((t,r)=>bn(t.parameters,e[r].parameters))}function Ei(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Ek(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var Wa=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new Uo,providedIn:"root"})}}return n})(),Uo=class{parse(e){let t=new zg(e);return new Yn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Na(e.root,!0)}`,r=bk(e.queryParams),i=typeof e.fragment=="string"?`#${Ck(e.fragment)}`:"";return`${t}${r}${i}`}},Dk=new Uo;function $l(n){return n.segments.map(e=>yT(e)).join("/")}function Na(n,e){if(!n.hasChildren())return $l(n);if(e){let t=n.children[oe]?Na(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${Na(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Ek(n,(r,i)=>i===oe?[Na(n.children[oe],!1)]:[`${i}:${Na(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${$l(n)}/${t[0]}`:`${$l(n)}/(${t.join("//")})`}}function mT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jl(n){return mT(n).replace(/%3B/gi,";")}function Ck(n){return encodeURI(n)}function qg(n){return mT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hl(n){return decodeURIComponent(n)}function tT(n){return Hl(n.replace(/\+/g,"%20"))}function yT(n){return`${qg(n.path)}${Tk(n.parameters)}`}function Tk(n){return Object.entries(n).map(([e,t])=>`;${qg(e)}=${qg(t)}`).join("")}function bk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${jl(t)}=${jl(i)}`).join("&"):`${jl(t)}=${jl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Sk=/^[^\/()?;#]+/;function Vg(n){let e=n.match(Sk);return e?e[0]:""}var Ak=/^[^\/()?;=#]+/;function xk(n){let e=n.match(Ak);return e?e[0]:""}var Rk=/^[^=?&#]+/;function Mk(n){let e=n.match(Rk);return e?e[0]:""}var Nk=/^[^&#]+/;function Pk(n){let e=n.match(Nk);return e?e[0]:""}var zg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ce(e,t)),r}parseSegment(){let e=Vg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new Ii(Hl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=xk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Vg(this.remaining);i&&(r=i,this.capture(r))}e[Hl(t)]=Hl(r)}parseQueryParam(e){let t=Mk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Pk(this.remaining);s&&(r=s,this.capture(r))}let i=tT(t),o=tT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Vg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function vT(n){return n.segments.length>0?new Ce([],{[oe]:n}):n}function _T(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=_T(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return kk(t)}function kk(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ce(n.segments.concat(e.segments),e.children)}return n}function Va(n){return n instanceof Yn}function Ok(n,e,t=null,r=null){let i=wT(n);return IT(i,e,t,r)}function wT(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=vT(r);return e??i}function IT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return jg(i,i,i,t,r);let o=Fk(e);if(o.toRoot())return jg(i,i,new Ce([],{}),t,r);let s=Lk(o,i,n),a=s.processChildren?Oa(s.segmentGroup,s.index,o.commands):DT(s.segmentGroup,s.index,o.commands);return jg(i,s.segmentGroup,a,t,r)}function ql(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ja(n){return typeof n=="object"&&n!=null&&n.outlets}function jg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=ET(n,e,t);let a=vT(_T(s));return new Yn(a,o,i)}function ET(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=ET(o,e,t)}),new Ce(n.segments,r)}var zl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ql(r[0]))throw new X(4003,!1);let i=r.find(ja);if(i&&i!==dT(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Fk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new zl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new zl(t,e,r)}var Lo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Lk(n,e,t){if(n.isAbsolute)return new Lo(e,!0,0);if(!t)return new Lo(e,!1,NaN);if(t.parent===null)return new Lo(t,!0,0);let r=ql(n.commands[0])?0:1,i=t.segments.length-1+r;return Vk(t,i,n.numberOfDoubleDots)}function Vk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Lo(r,!1,i-o)}function jk(n){return ja(n[0])?n[0].outlets:{[oe]:n}}function DT(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return Oa(n,e,t);let r=Bk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ce(n.segments.slice(r.pathIndex),n.children),Oa(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?Gg(n,e,t):r.match?Oa(n,0,i):Gg(n,e,t)}function Oa(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=jk(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Oa(n.children[oe],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=DT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function Bk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ja(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!rT(c,l,s))return o;r+=2}else{if(!rT(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ja(o)){let c=Uk(o.outlets);return new Ce(r,c)}if(i===0&&ql(t[0])){let c=n.segments[e];r.push(new Ii(c.path,nT(t[0]))),i++;continue}let s=ja(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ql(a)?(r.push(new Ii(s,nT(a))),i+=2):(r.push(new Ii(s,{})),i++)}return new Ce(r,{})}function Uk(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Gg(new Ce([],{}),0,r))}),e}function nT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function rT(n,e,t){return n==t.path&&bn(e,t.parameters)}var Fa="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),Jt=class{constructor(e,t){this.id=e,this.url=t}},$o=class extends Jt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zn=class extends Jt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}($t||{}),Gl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Gl||{}),Qn=class extends Jt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},br=class extends Jt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},Ba=class extends Jt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wl=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kg=class extends Jt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qg=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xg=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},em=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tm=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nm=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kl=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=at.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ua=class{},Ho=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function $k(n,e){return n.providers&&!n._injector&&(n._injector=Al(n.providers,e,`Route: ${n.path}`)),n._injector??e}function cn(n){return n.outlet||oe}function Hk(n,e){let t=n.filter(r=>cn(r)===e);return t.push(...n.filter(r=>cn(r)!==e)),t}function Ka(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var rm=class{get injector(){return Ka(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Qa(this.rootInjector),this.attachRef=null}},Qa=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new rm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ql=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=im(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=im(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=om(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return om(e,this._root).map(t=>t.value)}};function im(n,e){if(n===e.value)return e;for(let t of e.children){let r=im(n,t);if(r)return r}return null}function om(n,e){if(n===e.value)return[e];for(let t of e.children){let r=om(n,t);if(r.length)return r.unshift(e),r}return[]}var Ut=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Yl=class extends Ql{constructor(e,t){super(e),this.snapshot=t,pm(this,e)}toString(){return this.snapshot.toString()}};function CT(n){let e=qk(n),t=new ct([new Ii("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new qo(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new Yl(new Ut(a,[]),e)}function qk(n){let e={},t={},r={},i="",o=new Vo([],e,r,i,t,oe,n,null,{});return new Jl("",new Ut(o,[]))}var qo=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(l=>l[Ga]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Bo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Bo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&bT(i)&&(r.resolve[Ga]=i.title),r}var Vo=class{get title(){return this.data?.[Ga]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jl=class extends Ql{constructor(e,t){super(t),this.url=e,pm(this,t)}toString(){return TT(this._root)}};function pm(n,e){e.value._routerState=n,e.children.forEach(t=>pm(n,t))}function TT(n){let e=n.children.length>0?` { ${n.children.map(TT).join(", ")} } `:"";return`${n.value}${e}`}function Bg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),bn(e.params,t.params)||n.paramsSubject.next(t.params),yk(e.url,t.url)||n.urlSubject.next(t.url),bn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sm(n,e){let t=bn(n.params,e.params)&&Ik(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||sm(n.parent,e.parent))}function bT(n){return typeof n.title=="string"||n.title===null}var zk=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=j(Qa),this.location=j(Ta),this.changeDetector=j(Aa),this.inputBinder=j(rd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new am(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=fl({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yl]})}}return n})(),am=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===qo?this.route:e===Qa?this.childContexts:this.parent.get(e,t)}},rd=new W(""),iT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=aa([r.queryParams,r.params,r.data]).pipe(He(([o,s,a],c)=>(a=V(V(V({},o),s),a),c===0?J(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=RC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function Gk(n,e,t){let r=$a(n,e._root,t?t._root:void 0);return new Yl(r,e)}function $a(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Wk(n,e,t);return new Ut(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>$a(n,a)),s}}let r=Kk(e.value),i=e.children.map(o=>$a(n,o));return new Ut(r,i)}}function Wk(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $a(n,r,i);return $a(n,r)})}function Kk(n){return new qo(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Ha=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ST="ngNavigationCancelingError";function Xl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Va(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AT(!1,$t.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function AT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ST]=!0,t.cancellationCode=e,t}function Qk(n){return xT(n)&&Va(n.url)}function xT(n){return!!n&&n[ST]}var Yk=(n,e,t,r)=>G(i=>(new um(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),um=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Bg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new nm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new em(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Bg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Bg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ed=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jo=class{constructor(e,t){this.component=e,this.route=t}};function Zk(n,e,t){let r=n._root,i=e?e._root:null;return Pa(r,i,t,[r.value])}function Jk(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Go(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!pE(n)?n:e.get(n):r}function Pa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fo(e);return n.children.forEach(s=>{Xk(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>La(a,t.getContext(s),i)),i}function Xk(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=eO(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ed(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Pa(n,e,a?a.children:null,r,i):Pa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jo(a.outlet.component,s))}else s&&La(e,a,i),i.canActivateChecks.push(new ed(r)),o.component?Pa(n,null,a?a.children:null,r,i):Pa(n,null,t,r,i);return i}function eO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ei(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ei(n.url,e.url)||!bn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sm(n,e)||!bn(n.queryParams,e.queryParams);case"paramsChange":default:return!sm(n,e)}}function La(n,e,t){let r=Fo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?La(s,e.children.getContext(o),t):La(s,null,t):La(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new jo(e.outlet.component,i)):t.canDeactivateChecks.push(new jo(null,i)):t.canDeactivateChecks.push(new jo(null,i))}function Ya(n){return typeof n=="function"}function tO(n){return typeof n=="boolean"}function nO(n){return n&&Ya(n.canLoad)}function rO(n){return n&&Ya(n.canActivate)}function iO(n){return n&&Ya(n.canActivateChild)}function oO(n){return n&&Ya(n.canDeactivate)}function sO(n){return n&&Ya(n.canMatch)}function RT(n){return n instanceof Un||n?.name==="EmptyError"}var Bl=Symbol("INITIAL_VALUE");function zo(){return He(n=>aa(n.map(e=>e.pipe($n(1),oi(Bl)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===Bl)return Bl;if(t===!1||aO(t))return t}return!0}),lt(e=>e!==Bl),$n(1)))}function aO(n){return Va(n)||n instanceof Ha}function uO(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(Re(V({},t),{guardsResult:!0})):cO(s,r,i,n).pipe(Ye(a=>a&&tO(a)?lO(r,o,n,e):J(a)),G(a=>Re(V({},t),{guardsResult:a})))})}function cO(n,e,t,r){return Ie(n).pipe(Ye(i=>gO(i.component,i.route,t,e,r)),Gt(i=>i!==!0,!0))}function lO(n,e,t,r){return Ie(e).pipe(ri(i=>fo(hO(i.route.parent,r),dO(i.route,r),pO(n,i.path,t),fO(n,i.route,t))),Gt(i=>i!==!0,!0))}function dO(n,e){return n!==null&&e&&e(new tm(n)),J(!0)}function hO(n,e){return n!==null&&e&&e(new Xg(n)),J(!0)}function fO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>Ac(()=>{let s=Ka(e)??t,a=Go(o,s),c=rO(a)?a.canActivate(e,n):Dn(s,()=>a(e,n));return Sr(c).pipe(Gt())}));return J(i).pipe(zo())}function pO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Jk(s)).filter(s=>s!==null).map(s=>Ac(()=>{let a=s.guards.map(c=>{let l=Ka(s.node)??t,h=Go(c,l),p=iO(h)?h.canActivateChild(r,n):Dn(l,()=>h(r,n));return Sr(p).pipe(Gt())});return J(a).pipe(zo())}));return J(o).pipe(zo())}function gO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=Ka(e)??i,l=Go(a,c),h=oO(l)?l.canDeactivate(n,e,t,r):Dn(c,()=>l(n,e,t,r));return Sr(h).pipe(Gt())});return J(s).pipe(zo())}function mO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=Go(s,n),c=nO(a)?a.canLoad(e,t):Dn(n,()=>a(e,t));return Sr(c)});return J(o).pipe(zo(),MT(r))}function MT(n){return Af(nt(e=>{if(typeof e!="boolean")throw Xl(n,e)}),G(e=>e===!0))}function yO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=Go(s,n),c=sO(a)?a.canMatch(e,t):Dn(n,()=>a(e,t));return Sr(c)});return J(o).pipe(zo(),MT(r))}var qa=class{constructor(e){this.segmentGroup=e||null}},za=class extends Error{constructor(e){super(),this.urlTree=e}};function Oo(n){return ho(new qa(n))}function vO(n){return ho(new X(4e3,!1))}function _O(n){return ho(AT(!1,$t.GuardRejected))}var cm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[oe])return vO(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:M}=i,N=Dn(o,()=>a({params:v,data:b,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof Yn)throw new za(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new za(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Yn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},lm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wO(n,e,t,r,i){let o=NT(n,e,t);return o.matched?(r=$k(e,r),yO(r,e,t,i).pipe(G(s=>s===!0?o:V({},lm)))):J(o)}function NT(n,e,t){if(e.path==="**")return IO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},lm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||mk)(t,n,e);if(!i)return V({},lm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function IO(n){return{matched:!0,parameters:n.length>0?dT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function oT(n,e,t,r){return t.length>0&&CO(n,t,r)?{segmentGroup:new Ce(e,DO(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&TO(n,t,r)?{segmentGroup:new Ce(n.segments,EO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function EO(n,e,t,r){let i={};for(let o of t)if(id(n,e,o)&&!r[cn(o)]){let s=new Ce([],{});i[cn(o)]=s}return V(V({},r),i)}function DO(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&cn(r)!==oe){let i=new Ce([],{});t[cn(r)]=i}return t}function CO(n,e,t){return t.some(r=>id(n,e,r)&&cn(r)!==oe)}function TO(n,e,t){return t.some(r=>id(n,e,r))}function id(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function bO(n,e,t){return e.length===0&&!n.children[t]}var dm=class{};function SO(n,e,t,r,i,o,s="emptyOnly"){return new hm(n,e,t,r,i,s,o).recognize()}var AO=31,hm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new cm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=oT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Ut(r,t),o=new Jl("",i),s=Ok(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Vo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(G(r=>({children:r,rootSnapshot:t})),pr(r=>{if(r instanceof za)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof qa?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Ut?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(ri(s=>{let a=r.children[s],c=Hk(t,s);return this.processSegmentGroup(e,c,a,s,i)}),ii((s,a)=>(s.push(...a),s)),gr(null),Vf(),Ye(s=>{if(s===null)return Oo(r);let a=PT(s);return xO(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return Ie(t).pipe(ri(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(pr(l=>{if(l instanceof qa)return J(null);throw l}))),Gt(c=>!!c),pr(c=>{if(RT(c))return bO(r,i,o)?J(new dm):Oo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return cn(r)!==s&&(s===oe||!id(i,o,r))?Oo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Oo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=NT(t,i,o);if(!c)return Oo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AO&&(this.allowRedirects=!1));let v=new Vo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,sT(i),cn(i),i.component??i._loadedComponent??null,i,aT(i)),b=Zl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ye(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=wO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(He(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(He(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,b=new Vo(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,sT(r),cn(r),r.component??r._loadedComponent??null,r,aT(r)),M=Zl(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:B}=oT(t,m,v,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new Ut(b,F)));if(l.length===0&&B.length===0)return J(new Ut(b,[]));let q=cn(r)===o;return this.processSegment(h,l,N,B,q?oe:o,!0,b).pipe(G(F=>new Ut(b,F instanceof Ut?[F]:[])))}))):Oo(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):mO(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):_O(t))):J({routes:[],injector:e})}};function xO(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function RO(n){let e=n.value.routeConfig;return e&&e.path===""}function PT(n){let e=[],t=new Set;for(let r of n){if(!RO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=PT(r.children);e.push(new Ut(r.value,i))}return e.filter(r=>!t.has(r))}function sT(n){return n.data||{}}function aT(n){return n.resolve||{}}function MO(n,e,t,r,i,o){return Ye(s=>SO(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:c})=>Re(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function NO(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of kT(c))s.add(l);let a=0;return Ie(s).pipe(ri(c=>o.has(c)?PO(c,r,n,e):(c.data=Zl(c,c.parent,n).resolve,J(void 0))),nt(()=>a++),po(1),Ye(c=>a===s.size?J(t):Et))})}function kT(n){let e=n.children.map(t=>kT(t)).flat();return[n,...e]}function PO(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!bT(i)&&(o[Ga]=i.title),kO(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=Zl(n,n.parent,t).resolve,null)))}function kO(n,e,t,r){let i=Hg(n);if(i.length===0)return J({});let o={};return Ie(i).pipe(Ye(s=>OO(n[s],e,t,r).pipe(Gt(),nt(a=>{if(a instanceof Ha)throw Xl(new Uo,a);o[s]=a}))),po(1),Ff(o),pr(s=>RT(s)?Et:ho(s)))}function OO(n,e,t,r){let i=Ka(e)??r,o=Go(n,i),s=o.resolve?o.resolve(e,t):Dn(i,()=>o(e,t));return Sr(s)}function Ug(n){return He(e=>{let t=n(e);return t?Ie(t).pipe(G(()=>e)):J(e)})}var OT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Ga]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(FO),providedIn:"root"})}}return n})(),FO=(()=>{class n extends OT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(JC))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Za=new W("",{providedIn:"root",factory:()=>({})}),LO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=st({type:n,selectors:[["ng-component"]],standalone:!0,features:[_C],decls:1,vars:0,template:function(r,i){r&1&&De(0,"router-outlet")},dependencies:[zk],encapsulation:2})}}return n})();function gm(n){let e=n.children&&n.children.map(gm),t=e?Re(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=LO),t}var td=new W(""),mm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(kl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Sr(t.loadComponent()).pipe(G(FT),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ua(()=>{this.componentLoaders.delete(t)})),i=new ao(r,()=>new ze).pipe(so());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=VO(r,this.compiler,t,this.onLoadEndListener).pipe(ua(()=>{this.childrenLoaders.delete(r)})),s=new ao(o,()=>new ze).pipe(so());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VO(n,e,t,r){return Sr(n.loadChildren()).pipe(G(FT),Ye(i=>i instanceof wa||Array.isArray(i)?J(i):Ie(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(td,[],{optional:!0,self:!0}).flat()),{routes:s.map(gm),injector:o}}))}function jO(n){return n&&typeof n=="object"&&"default"in n}function FT(n){return jO(n)?n.default:n}var ym=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(BO),providedIn:"root"})}}return n})(),BO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LT=new W(""),VT=new W("");function UO(n,e,t){let r=n.get(VT),i=n.get(Pt);return n.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),$O(n))),{onViewTransitionCreated:c}=r;return c&&Dn(n,()=>c({transition:a,from:e,to:t})),s})}function $O(n){return new Promise(e=>{hg({read:()=>setTimeout(e)},{injector:n})})}var HO=new W(""),vm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=j(mm),this.environmentInjector=j(Bt),this.urlSerializer=j(Wa),this.rootContexts=j(Qa),this.location=j(Po),this.inputBindingEnabled=j(rd,{optional:!0})!==null,this.titleStrategy=j(OT),this.options=j(Za,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(ym),this.createViewTransition=j(LT,{optional:!0}),this.navigationErrorHandler=j(HO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Zg(i)),r=i=>this.events.next(new Jg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Re(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),G(o=>Re(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),He(o=>{let s=!1,a=!1;return J(o).pipe(He(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",$t.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Re(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new br(c.id,this.urlSerializer.serialize(c.rawUrl),p,Gl.IgnoredSameUrlNavigation)),c.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe(He(p=>{let m=this.transitions?.getValue();return this.events.next(new $o(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),MO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Re(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Wl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:M}=c,N=new $o(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let B=CT(this.rootComponentType).snapshot;return this.currentTransition=o=Re(V({},c),{targetSnapshot:B,urlAfterRedirects:m,extras:Re(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,J(o)}else{let p="";return this.events.next(new br(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Gl.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Et}}),nt(c=>{let l=new Wg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),G(c=>(this.currentTransition=o=Re(V({},c),{guards:Zk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),uO(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Xl(this.urlSerializer,c.guardsResult);let l=new Kg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),lt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",$t.GuardRejected),!1)),Ug(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(nt(l=>{let h=new Qg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),He(l=>{let h=!1;return J(l).pipe(NO(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",$t.NoDataFromResolver)}}))}),nt(l=>{let h=new Yg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Ug(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return aa(l(c.targetSnapshot.root)).pipe(gr(null),$n(1))}),Ug(()=>this.afterPreactivation()),He(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ie(h).pipe(G(()=>o)):J(o)}),G(c=>{let l=Gk(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Re(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new Ua)}),Yk(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),$n(1),nt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Bf(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),ua(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",$t.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),pr(c=>{if(a=!0,xT(c))this.events.next(new Qn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Qk(c)?this.events.next(new Ho(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ba(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Dn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ha){let{message:p,cancellationCode:m}=Xl(this.urlSerializer,h);this.events.next(new Qn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Ho(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new Qn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qO(n){return n!==Fa}var zO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(GO),providedIn:"root"})}}return n})(),fm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},GO=(()=>{class n extends fm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Wp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(WO),providedIn:"root"})}}return n})(),WO=(()=>{class n extends jT{constructor(){super(...arguments),this.location=j(Po),this.urlSerializer=j(Wa),this.options=j(Za,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(ym),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=CT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof $o)this.stateMemento=this.createStateMemento();else if(t instanceof br)this.rawUrlTree=r.initialUrl;else if(t instanceof Wl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ua?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Qn&&(t.code===$t.GuardRejected||t.code===$t.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ba?this.restoreHistory(r,!0):t instanceof Zn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Yn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Wp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ka=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ka||{});function BT(n,e){n.events.pipe(lt(t=>t instanceof Zn||t instanceof Qn||t instanceof Ba||t instanceof br),G(t=>t instanceof Zn||t instanceof br?ka.COMPLETE:(t instanceof Qn?t.code===$t.Redirect||t.code===$t.SupersededByNewNavigation:!1)?ka.REDIRECTING:ka.FAILED),lt(t=>t!==ka.REDIRECTING),$n(1)).subscribe(()=>{e()})}function KO(n){throw n}var QO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Di=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(Rl),this.stateManager=j(jT),this.options=j(Za,{optional:!0})||{},this.pendingTasks=j(No),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(vm),this.urlSerializer=j(Wa),this.location=j(Po),this.urlHandlingStrategy=j(ym),this._events=new ze,this.errorHandler=this.options.errorHandler||KO,this.navigated=!1,this.routeReuseStrategy=j(zO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(td,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(rd,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Qn&&r.code!==$t.Redirect&&r.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Zn)this.navigated=!0;else if(r instanceof Ho){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||qO(i.source)},s);this.scheduleNavigation(a,Fa,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}JO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=wT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return IT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Va(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Fa,null,r)}navigate(t,r={skipLocationChange:!1}){return ZO(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},QO):r===!1?i=V({},YO):i=r,Va(t))return eT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return eT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return BT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZO(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function JO(n){return!(n instanceof Ua)&&!(n instanceof Ho)}var nd=class{};var XO=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof Zn),ri(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Al(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ie(i).pipe(fr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let o=i.pipe(Ye(s=>s===null?J(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ie([o,s]).pipe(fr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Di),O(kl),O(Bt),O(nd),O(mm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),UT=new W(""),eF=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $o?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof br&&t.code===Gl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Kl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Kl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){qD()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function tF(n){return n.routerState.root}function Ja(n,e){return{\u0275kind:n,\u0275providers:e}}function nF(){let n=j(Zt);return e=>{let t=n.get(Tr);if(e!==t.components[0])return;let r=n.get(Di),i=n.get($T);n.get(_m)===1&&r.initialNavigation(),n.get(HT,null,ae.Optional)?.setUpPreloading(),n.get(UT,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $T=new W("",{factory:()=>new ze}),_m=new W("",{providedIn:"root",factory:()=>1});function rF(){return Ja(2,[{provide:_m,useValue:0},{provide:Pl,multi:!0,deps:[Zt],useFactory:e=>{let t=e.get(LC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Di),o=e.get($T);BT(i,()=>{r(!0)}),e.get(vm).afterPreactivation=()=>(r(!0),o.closed?J(void 0):o),i.initialNavigation()}))}}])}function iF(){return Ja(3,[{provide:Pl,multi:!0,useFactory:()=>{let e=j(Di);return()=>{e.setUpLocationChangeListener()}}},{provide:_m,useValue:2}])}var HT=new W("");function oF(n){return Ja(0,[{provide:HT,useExisting:XO},{provide:nd,useExisting:n}])}function sF(){return Ja(8,[iT,{provide:rd,useExisting:iT}])}function aF(n){let e=[{provide:LT,useValue:UO},{provide:VT,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ja(9,e)}var uT=new W("ROUTER_FORROOT_GUARD"),uF=[Po,{provide:Wa,useClass:Uo},Di,Qa,{provide:qo,useFactory:tF,deps:[Di]},mm,[]],wm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[uF,[],{provide:td,multi:!0,useValue:t},{provide:uT,useFactory:hF,deps:[[Di,new Ro,new kp]]},{provide:Za,useValue:r||{}},r?.useHash?lF():dF(),cF(),r?.preloadingStrategy?oF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?fF(r):[],r?.bindToComponentInputs?sF().\u0275providers:[],r?.enableViewTransitions?aF().\u0275providers:[],pF()]}}static forChild(t){return{ngModule:n,providers:[{provide:td,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(uT,8))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function cF(){return{provide:UT,useFactory:()=>{let n=j($C),e=j(ge),t=j(Za),r=j(vm),i=j(Wa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new eF(i,r,n,e,t)}}}function lF(){return{provide:_i,useClass:jC}}function dF(){return{provide:_i,useClass:Sg}}function hF(n){return"guarded"}function fF(n){return[n.initialNavigation==="disabled"?iF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?rF().\u0275providers:[]]}var cT=new W("");function pF(){return[{provide:cT,useFactory:nF},{provide:yg,multi:!0,useExisting:cT}]}var gF=[],qT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({imports:[wm.forRoot(gF),wm]})}}return n})();var od=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="https://images.unsplash.com/photo-1557040135-9dc2a6b60411?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var mF="firebase",yF="10.14.1";hr(mF,yF,"app");var Xa=new Cr("ANGULARFIRE2_VERSION");var vF=(n,e)=>{let t=e?[e]:Jw(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ci=class{constructor(){return vF(_F)}},_F="app-check";function Im(){}var sd=class{zone;delegate;constructor(e,t=Nf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Em=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Im,{},Im,Im)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ad=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new sd(Zone.current)),this.insideAngular=t.run(()=>new sd(Zone.current,sa)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(ge))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wF(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function kt(n){return IF(wF())(n)}function IF(n){return function(t){return t=t.lift(new Em(n.ngZone)),t.pipe(on(n.outsideAngular),zt(n.insideAngular))}}var CF=new Map,TF={activated:!1,tokenObservers:[]},bF={initialized:!1,enabled:!1};function ln(n){return CF.get(n)||Object.assign({},TF)}function YT(){return bF}var SF="https://content-firebaseappcheck.googleapis.com/v1";var AF="exchangeDebugToken",GT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},a9=24*60*60*1e3;var Cm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new df,this.pending.promise.catch(t=>{}),yield xF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new df,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function xF(n){return new Promise(e=>{setTimeout(e,n)})}var RF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ar=new Yw("appCheck","AppCheck",RF);function ZT(n){if(!ln(n).activated)throw Ar.create("use-before-activation",{appName:n.name})}function JT(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Ar.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Ar.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw Ar.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ar.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function XT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${SF}/projects/${t}/apps/${r}:${AF}?key=${i}`,body:{debug_token:e}}}var MF="firebase-app-check-database",NF=1,Tm="firebase-app-check-store";var ud=null;function PF(){return ud||(ud=new Promise((n,e)=>{try{let t=indexedDB.open(MF,NF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ar.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Tm,{keyPath:"compositeKey"})}}}catch(t){e(Ar.create("storage-open",{originalErrorMessage:t?.message}))}}),ud)}function kF(n,e){return OF(FF(n),e)}function OF(n,e){return R(this,null,function*(){let r=(yield PF()).transaction(Tm,"readwrite"),o=r.objectStore(Tm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Ar.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function FF(n){return`${n.options.appId}-${n.name}`}var bm=new uc("@firebase/app-check");function Dm(n,e){return ac()?kF(n,e).catch(t=>{bm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function e0(){return YT().enabled}function t0(){return R(this,null,function*(){let n=YT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var LF={error:"UNKNOWN_ERROR"};function VF(n){return Ww.encodeString(JSON.stringify(n),!1)}function Sm(n,e=!1){return R(this,null,function*(){let t=n.app;ZT(t);let r=ln(t),i=r.token,o;if(i&&!eu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(eu(c)?i=c:yield Dm(t,void 0))}if(!e&&i&&eu(i))return{token:i.token};let s=!1;if(e0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=JT(XT(t,yield t0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Dm(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield ln(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?bm.warn(c.message):bm.error(c),o=c}let a;return i?o?eu(i)?a={token:i.token,internalError:o}:a=KT(o):(a={token:i.token},r.token=i,yield Dm(t,i)):a=KT(o),s&&$F(t,a),a})}function jF(n){return R(this,null,function*(){let e=n.app;ZT(e);let{provider:t}=ln(e);if(e0()){let r=yield t0(),{token:i}=yield JT(XT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function BF(n,e,t,r){let{app:i}=n,o=ln(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&eu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),WT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>WT(n))}function n0(n,e){let t=ln(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function WT(n){let{app:e}=n,t=ln(e),r=t.tokenRefresher;r||(r=UF(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function UF(n){let{app:e}=n;return new Cm(()=>R(this,null,function*(){let t=ln(e),r;if(t.token?r=yield Sm(n,!0):r=yield Sm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ln(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},GT.RETRIAL_MIN_WAIT,GT.RETRIAL_MAX_WAIT)}function $F(n,e){let t=ln(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function eu(n){return n.expireTimeMillis-Date.now()>0}function KT(n){return{token:VF(LF),error:n}}var Am=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ln(this.app);for(let t of e)n0(this.app,t.next);return Promise.resolve()}};function HF(n,e){return new Am(n,e)}function qF(n){return{getToken:e=>Sm(n,e),getLimitedUseToken:()=>jF(n),addTokenListener:e=>BF(n,"INTERNAL",e),removeTokenListener:e=>n0(n.app,e)}}var zF="@firebase/app-check",GF="0.8.8";var WF="app-check",QT="app-check-internal";function KF(){na(new Xr(WF,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return HF(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QT).initialize()})),na(new Xr(QT,n=>{let e=n.getProvider("app-check").getImmediate();return qF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),hr(zF,GF)}KF();var QF=["localhost","0.0.0.0","127.0.0.1"],_9=typeof window<"u"&&QF.includes(window.location.hostname);var YF="firebase",ZF="10.14.1";Vt.registerVersion(YF,ZF,"app-compat");var JF=["ngOnDestroy"],o0=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(JF.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var cd=class{constructor(e){return e}},Wo=new W("angularfire2.app.options"),Ko=new W("angularfire2.app.name");function tu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Vt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Vt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;XF("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new cd(s)}var XF=(n,...e)=>{wg()&&typeof console<"u"&&console[n](...e)},eL={provide:cd,useFactory:tu,deps:[Wo,ge,[new Ro,Ko]]},s0=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Wo,useValue:t},{provide:Ko,useValue:r}]}}constructor(t){Vt.registerVersion("angularfire",Xa.full,"core"),Vt.registerVersion("angularfire",Xa.full,"app-compat"),Vt.registerVersion("angular",wC.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Nt))};static \u0275mod=bt({type:n});static \u0275inj=Tt({providers:[eL]})}return n})();function ld(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return tL(i,s)||(i0("error",`${e} was already initialized on the ${t} Firebase App with different settings.${nL?" You may need to reload as Firebase is not HMR aware.":""}`),i0("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function tL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var nL=typeof module<"u"&&!!module.hot,i0=(n,...e)=>{wg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var xm=new W("angularfire2.auth.use-emulator"),Rm=new W("angularfire2.auth.settings"),Mm=new W("angularfire2.auth.tenant-id"),Nm=new W("angularfire2.auth.langugage-code"),Pm=new W("angularfire2.auth.use-device-language"),km=new W("angularfire.auth.persistence"),Om=(n,e,t,r,i,o,s,a)=>ld(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),a0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let b=new ze,M=J(void 0).pipe(zt(s.outsideAngular),He(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),G(()=>tu(t,o,r)),G(N=>Om(N,o,a,l,h,p,c,m)),Rc({bufferSize:1,refCount:!1}));if(wi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{M.pipe(Gt()).subscribe();let N=M.pipe(He(F=>F.getRedirectResult().then(Y=>Y,()=>null)),kt,Rc({bufferSize:1,refCount:!1})),B=M.pipe(He(F=>new he(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))})))),q=M.pipe(He(F=>new he(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))}))));this.authState=N.pipe(Mc(B),on(s.outsideAngular),zt(s.insideAngular)),this.user=N.pipe(Mc(q),on(s.outsideAngular),zt(s.insideAngular)),this.idToken=this.user.pipe(He(F=>F?Ie(F.getIdToken()):J(null))),this.idTokenResult=this.user.pipe(He(F=>F?Ie(F.getIdTokenResult()):J(null))),this.credential=Of(N,b,this.authState.pipe(lt(F=>!F))).pipe(G(F=>F?.user?F:null),on(s.outsideAngular),zt(s.insideAngular))}return o0(this,M,o,{spy:{apply:(N,B,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Wo),O(Ko,8),O(Nt),O(ge),O(ad),O(xm,8),O(Rm,8),O(Mm,8),O(Nm,8),O(Pm,8),O(km,8),O(Ci,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var u0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c0={};var xr,Fm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)_[Ln-2]=arguments[Ln];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=Y(w,y).g;w=B(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=B(this,I),M(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,Ln=I.i(D)>>>16,Fs=I.i(D)&65535;w[2*E+2*D]+=_*Fs,q(w,2*E+2*D),w[2*E+2*D+1]+=T*Fs,q(w,2*E+2*D+1),w[2*E+2*D+1]+=_*Ln,q(w,2*E+2*D+1),w[2*E+2*D+2]+=T*Ln,q(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function Y(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(M(I))return y=Y(N(I),y),new F(N(y.g),N(y.h));if(M(y))return y=Y(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=ee(w),E=ee(E);var D=Z(w,1),T=Z(E,1);for(E=Z(E,2),w=Z(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=Z(E,1),w=Z(w,1)}return y=B(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);M(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=B(I,_)}return new F(D,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ee(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Z(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Fm=c0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,xr=c0.Integer=s}).apply(typeof u0<"u"?u0:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jn={};var Lm,iL,Qo,Vm,nu,hd,jm,Bm,Um;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function b(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,A){for(var L=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)L[Se-2]=arguments[Se];return d.prototype[C].apply(g,L)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,A=g.length||0;u.length=C+A;for(let L=0;L<A;L++)u[C+L]=g[L]}else u.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Vh;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Ln{constructor(){this.h=this.g=null}add(d,f){let g=Fs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Fs=new B(()=>new ix,u=>u.reset());class ix{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ls,Vs=!1,Vh=new Ln,H_=()=>{let u=a.Promise.resolve(void 0);Ls=()=>{u.then(ox)}};var ox=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=Fs;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Vs=!1};function ur(){this.s=this.s,this.C=this.C}ur.prototype.s=!1,ur.prototype.ma=function(){this.s||(this.s=!0,this.N())},ur.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var sx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function js(u,d){if(ft.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ee){e:{try{Y(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ax[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&js.aa.h.call(this)}}b(js,ft);var ax={2:"touch",3:"pen",4:"mouse"};js.prototype.h=function(){js.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Bs="closure_listenable_"+(1e6*Math.random()|0),ux=0;function cx(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++ux,this.da=this.fa=!1}function Hu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qu(u){this.src=u,this.g={},this.h=0}qu.prototype.add=function(u,d,f,g,C){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=Bh(u,d,g,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new cx(d,this.src,A,!!g,C),d.fa=f,u.push(d)),d};function jh(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Hu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Bh(u,d,f,g){for(var C=0;C<u.length;++C){var A=u[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Uh="closure_lm_"+(1e6*Math.random()|0),$h={};function q_(u,d,f,g,C){if(g&&g.once)return G_(u,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)q_(u,d[A],f,g,C);return null}return f=Gh(f),u&&u[Bs]?u.K(d,f,l(g)?!!g.capture:!!g,C):z_(u,d,f,!1,g,C)}function z_(u,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Se=qh(u);if(Se||(u[Uh]=Se=new qu(u)),f=Se.add(d,f,g,L,A),f.proxy)return f;if(g=lx(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)sx||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(K_(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function lx(){function u(f){return d.call(u.src,u.listener,f)}let d=dx;return u}function G_(u,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)G_(u,d[A],f,g,C);return null}return f=Gh(f),u&&u[Bs]?u.L(d,f,l(g)?!!g.capture:!!g,C):z_(u,d,f,!0,g,C)}function W_(u,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)W_(u,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Gh(f),u&&u[Bs]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=Bh(A,f,g,C),-1<f&&(Hu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=qh(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Bh(d,f,g,C)),(f=-1<u?d[u]:null)&&Hh(f))}function Hh(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Bs])jh(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(K_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=qh(d))?(jh(f,u),f.h==0&&(f.src=null,d[Uh]=null)):Hu(u)}}}function K_(u){return u in $h?$h[u]:$h[u]="on"+u}function dx(u,d){if(u.da)u=!0;else{d=new js(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Hh(u),u=f.call(g,d)}return u}function qh(u){return u=u[Uh],u instanceof qu?u:null}var zh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gh(u){return typeof u=="function"?u:(u[zh]||(u[zh]=function(d){return u.handleEvent(d)}),u[zh])}function pt(){ur.call(this),this.i=new qu(this),this.M=this,this.F=null}b(pt,ur),pt.prototype[Bs]=!0,pt.prototype.removeEventListener=function(u,d,f,g){W_(this,u,d,f,g)};function _t(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new ft(d,u);else if(d instanceof ft)d.target=d.target||u;else{var C=d;d=new ft(g,u),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=zu(L,g,!0,d)&&C}if(L=d.g=u,C=zu(L,g,!0,d)&&C,C=zu(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=zu(L,g,!1,d)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)Hu(f[g]);delete u.g[d],u.h--}}this.F=null},pt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},pt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function zu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Se=L.listener,ut=L.ha||L.src;L.fa&&jh(u.i,L),C=Se.call(ut,g)!==!1&&C}}return C&&!g.defaultPrevented}function Q_(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Y_(u){u.g=Q_(()=>{u.g=null,u.i&&(u.i=!1,Y_(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class hx extends ur{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Y_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(u){ur.call(this),this.h=u,this.g={}}b(Us,ur);var Z_=[];function J_(u){Z(u.g,function(d,f){this.g.hasOwnProperty(f)&&Hh(d)},u),u.g={}}Us.prototype.N=function(){Us.aa.N.call(this),J_(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wh=a.JSON.stringify,fx=a.JSON.parse,px=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Kh(){}Kh.prototype.h=null;function X_(u){return u.h||(u.h=u.i())}function ew(){}var $s={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qh(){ft.call(this,"d")}b(Qh,ft);function Yh(){ft.call(this,"c")}b(Yh,ft);var Qr={},tw=null;function Gu(){return tw=tw||new pt}Qr.La="serverreachability";function nw(u){ft.call(this,Qr.La,u)}b(nw,ft);function Hs(u){let d=Gu();_t(d,new nw(d))}Qr.STAT_EVENT="statevent";function rw(u,d){ft.call(this,Qr.STAT_EVENT,u),this.stat=d}b(rw,ft);function wt(u){let d=Gu();_t(d,new rw(d,u))}Qr.Ma="timingevent";function iw(u,d){ft.call(this,Qr.Ma,u),this.size=d}b(iw,ft);function qs(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function zs(){this.g=!0}zs.prototype.xa=function(){this.g=!1};function gx(u,d,f,g,C,A){u.info(function(){if(u.g)if(A)for(var L="",Se=A.split("&"),ut=0;ut<Se.length;ut++){var _e=Se[ut].split("=");if(1<_e.length){var gt=_e[0];_e=_e[1];var mt=gt.split("_");L=2<=mt.length&&mt[1]=="type"?L+(gt+"="+_e+"&"):L+(gt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function mx(u,d,f,g,C,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function Ji(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+vx(u,f)+(g?" "+g:"")})}function yx(u,d){u.info(function(){return"TIMEOUT: "+d})}zs.prototype.info=function(){};function vx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Wh(f)}catch{return d}}var Wu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ow={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zh;function Ku(){}b(Ku,Kh),Ku.prototype.g=function(){return new XMLHttpRequest},Ku.prototype.i=function(){return{}},Zh=new Ku;function cr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sw}function sw(){this.i=null,this.g="",this.h=!1}var aw={},Jh={};function Xh(u,d,f){u.L=1,u.v=Ju(Vn(d)),u.m=f,u.P=!0,uw(u,null)}function uw(u,d){u.F=Date.now(),Qu(u),u.A=Vn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),Ew(f.i,"t",g),u.C=0,f=u.j.J,u.h=new sw,u.g=Bw(u.j,f?d:null,!u.m),0<u.O&&(u.M=new hx(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(Z_[0]=C.toString()),C=Z_);for(var A=0;A<C.length;A++){var L=q_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Hs(),gx(u.i,u.u,u.A,u.l,u.R,u.m)}cr.prototype.ca=function(u){u=u.target;let d=this.M;d&&jn(u)==3?d.j():this.Y(u)},cr.prototype.Y=function(u){try{if(u==this.g)e:{let mt=jn(this.g);var d=this.g.Ba();let to=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||xw(this.g)))){this.J||mt!=4||d==7||(d==8||0>=to?Hs(3):Hs(2)),ef(this);var f=this.g.Z();this.X=f;t:if(cw(this)){var g=xw(this.g);u="";var C=g.length,A=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),Gs(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,mx(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ut=this.g;if((Se=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Se)){var _e=Se;break t}}_e=null}if(f=_e)Ji(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tf(this,f);else{this.o=!1,this.s=3,wt(12),Yr(this),Gs(this);break e}}if(this.P){f=!0;let nn;for(;!this.J&&this.C<L.length;)if(nn=_x(this,L),nn==Jh){mt==4&&(this.s=4,wt(14),f=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==aw){this.s=4,wt(15),Ji(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Ji(this.i,this.l,nn,null),tf(this,nn);if(cw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||L.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)Ji(this.i,this.l,L,"[Invalid Chunked Response]"),Yr(this),Gs(this);else if(0<L.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),uf(gt),gt.M=!0,wt(11))}}else Ji(this.i,this.l,L,null),tf(this,L);mt==4&&Yr(this),this.o&&!this.J&&(mt==4?Fw(this.j,this):(this.o=!1,Qu(this)))}else Fx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Yr(this),Gs(this)}}}catch{}finally{}};function cw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _x(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Jh:(f=Number(d.substring(f,g)),isNaN(f)?aw:(g+=1,g+f>d.length?Jh:(d=d.slice(g,g+f),u.C=g+f,d)))}cr.prototype.cancel=function(){this.J=!0,Yr(this)};function Qu(u){u.S=Date.now()+u.I,lw(u,u.I)}function lw(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qs(m(u.ba,u),d)}function ef(u){u.B&&(a.clearTimeout(u.B),u.B=null)}cr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(yx(this.i,this.A),this.L!=2&&(Hs(),wt(17)),Yr(this),this.s=2,Gs(this)):lw(this,this.S-u)};function Gs(u){u.j.G==0||u.J||Fw(u.j,u)}function Yr(u){ef(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,J_(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function tf(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||nf(f.h,u))){if(!u.K&&nf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)rc(f),tc(f);else break e;af(f),wt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=qs(m(f.Za,f),6e3));if(1>=fw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Jr(f,11)}else if((u.K||f.g==u)&&rc(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let _e=C[d];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];let gt=_e[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=_e[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let to=_e[5];to!=null&&typeof to=="number"&&0<to&&(g=1.5*to,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let nn=u.g;if(nn){let oc=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oc){var A=g.h;A.g||oc.indexOf("spdy")==-1&&oc.indexOf("quic")==-1&&oc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(rf(A,A.h),A.h=null))}if(g.D){let cf=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;cf&&(g.ya=cf,Pe(g.I,g.D,cf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=u;if(g.qa=jw(g,g.J?g.ia:null,g.W),L.K){pw(g.h,L);var Se=L,ut=g.L;ut&&(Se.I=ut),Se.B&&(ef(Se),Qu(Se)),g.g=L}else kw(g);0<f.i.length&&nc(f)}else _e[0]!="stop"&&_e[0]!="close"||Jr(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Jr(f,7):sf(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}Hs(4)}catch{}}var wx=class{constructor(u,d){this.g=u,this.map=d}};function dw(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fw(u){return u.h?1:u.g?u.g.size:0}function nf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function rf(u,d){u.g?u.g.add(d):u.h=d}function pw(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}dw.prototype.cancel=function(){if(this.i=gw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function gw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function Ix(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function Ex(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function mw(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=Ex(u),g=Ix(u),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],u)}var yw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dx(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var A=u[f].substring(0,g);C=u[f].substring(g+1)}else A=u[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Zr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Zr){this.h=u.h,Yu(this,u.j),this.o=u.o,this.g=u.g,Zu(this,u.s),this.l=u.l;var d=u.i,f=new Qs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),vw(this,f),this.m=u.m}else u&&(d=String(u).match(yw))?(this.h=!1,Yu(this,d[1]||"",!0),this.o=Ws(d[2]||""),this.g=Ws(d[3]||"",!0),Zu(this,d[4]),this.l=Ws(d[5]||"",!0),vw(this,d[6]||"",!0),this.m=Ws(d[7]||"")):(this.h=!1,this.i=new Qs(null,this.h))}Zr.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ks(d,_w,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ks(d,_w,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ks(f,f.charAt(0)=="/"?bx:Tx,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ks(f,Ax)),u.join("")};function Vn(u){return new Zr(u)}function Yu(u,d,f){u.j=f?Ws(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Zu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function vw(u,d,f){d instanceof Qs?(u.i=d,xx(u.i,u.h)):(f||(d=Ks(d,Sx)),u.i=new Qs(d,u.h))}function Pe(u,d,f){u.i.set(d,f)}function Ju(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ws(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ks(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,Cx),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Cx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _w=/[#\/\?@]/g,Tx=/[#\?:]/g,bx=/[#\?]/g,Sx=/[#\?@]/g,Ax=/#/g;function Qs(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function lr(u){u.g||(u.g=new Map,u.h=0,u.i&&Dx(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Qs.prototype,n.add=function(u,d){lr(this),this.i=null,u=Xi(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function ww(u,d){lr(u),d=Xi(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Iw(u,d){return lr(u),d=Xi(u,d),u.g.has(d)}n.forEach=function(u,d){lr(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){lr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(u){lr(this);let d=[];if(typeof u=="string")Iw(this,u)&&(d=d.concat(this.g.get(Xi(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return lr(this),this.i=null,u=Xi(this,u),Iw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Ew(u,d,f){ww(u,d),0<f.length&&(u.i=null,u.g.set(Xi(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),u.push(C)}}return this.i=u.join("&")};function Xi(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function xx(u,d){d&&!u.j&&(lr(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(ww(this,g),Ew(this,C,f))},u)),u.j=d}function Rx(u,d){let f=new zs;if(a.Image){let g=new Image;g.onload=v(dr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(dr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(dr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(dr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function Mx(u,d){let f=new zs,g=new AbortController,C=setTimeout(()=>{g.abort(),dr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?dr(f,"TestPingServer: ok",!0,d):dr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),dr(f,"TestPingServer: error",!1,d)})}function dr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function Nx(){this.g=new px}function Px(u,d,f){let g=f||"";try{mw(u,function(C,A){let L=C;l(C)&&(L=Wh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Ys(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Ys,Kh),Ys.prototype.g=function(){return new Xu(this.l,this.j)},Ys.prototype.i=function(u){return function(){return u}}({});function Xu(u,d){pt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Xu,pt),n=Xu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Js(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zs(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Zs(this):Js(this),this.readyState==3&&Dw(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Zs(this))},n.Qa=function(u){this.g&&(this.response=u,Zs(this))},n.ga=function(){this.g&&Zs(this)};function Zs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Js(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Js(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cw(u){let d="";return Z(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function of(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Cw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Pe(u,d,f))}function Ue(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ue,pt);var kx=/^https?$/i,Ox=["POST","PUT"];n=Ue.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zh.g(),this.v=this.o?X_(this.o):X_(Zh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){Tw(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ox,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Aw(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){Tw(this,A)}};function Tw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,bw(u),ec(u)}function bw(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),ec(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ec(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sw(this):this.bb())},n.bb=function(){Sw(this)};function Sw(u){if(u.h&&typeof s<"u"&&(!u.v[1]||jn(u)!=4||u.Z()!=2)){if(u.u&&jn(u)==4)Q_(u.Ea,0,u);else if(_t(u,"readystatechange"),jn(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(u.D).match(yw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!kx.test(C?C.toLowerCase():"")}f=g}if(f)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var A=2<jn(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",bw(u)}}finally{ec(u)}}}}function ec(u,d){if(u.g){Aw(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||_t(u,"ready");try{f.onreadystatechange=g}catch{}}}function Aw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function jn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),fx(d)}};function xw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fx(u){let d={};u=(u.g&&2<=jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function Rw(u){this.Aa=0,this.i=[],this.j=new zs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xs("baseRetryDelayMs",5e3,u),this.cb=Xs("retryDelaySeedMs",1e4,u),this.Wa=Xs("forwardChannelMaxRetries",2,u),this.wa=Xs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new dw(u&&u.concurrentRequestLimit),this.Da=new Nx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Rw.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){wt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=jw(this,null,this.W),nc(this)};function sf(u){if(Mw(u),u.G==3){var d=u.U++,f=Vn(u.I);if(Pe(f,"SID",u.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),ea(u,f),d=new cr(u,u.j,d),d.L=2,d.v=Ju(Vn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Bw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qu(d)}Vw(u)}function tc(u){u.g&&(uf(u),u.g.cancel(),u.g=null)}function Mw(u){tc(u),u.u&&(a.clearTimeout(u.u),u.u=null),rc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function nc(u){if(!hw(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ls||H_(),Vs||(Ls(),Vs=!0),Vh.add(d,u),u.B=0}}function Lx(u,d){return fw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qs(m(u.Ga,u,d),Lw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new cr(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Pw(this,C,d),f=Vn(this.I),Pe(f,"RID",u),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),ea(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Cw(A)))+"&"+d:this.m&&of(f,this.m,A)),rf(this.h,C),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),C.T=!0,Xh(C,f,null)):Xh(C,f,d),this.G=2}}else this.G==3&&(u?Nw(this,u):this.i.length==0||hw(this.h)||Nw(this))};function Nw(u,d){var f;d?f=d.l:f=u.U++;let g=Vn(u.I);Pe(g,"SID",u.K),Pe(g,"RID",f),Pe(g,"AID",u.T),ea(u,g),u.m&&u.o&&of(g,u.m,u.o),f=new cr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Pw(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),rf(u.h,f),Xh(f,g,d)}function ea(u,d){u.H&&Z(u.H,function(f,g){Pe(d,g,f)}),u.l&&mw({},function(f,g){Pe(d,g,f)})}function Pw(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Se=!0;for(let ut=0;ut<f;ut++){let _e=C[ut].g,gt=C[ut].map;if(_e-=A,0>_e)A=Math.max(0,C[ut].g-100),Se=!1;else try{Px(gt,L,"req"+_e+"_")}catch{g&&g(gt)}}if(Se){g=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function kw(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ls||H_(),Vs||(Ls(),Vs=!0),Vh.add(d,u),u.v=0}}function af(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qs(m(u.Fa,u),Lw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Ow(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qs(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),tc(this),Ow(this))};function uf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ow(u){u.g=new cr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Vn(u.qa);Pe(d,"RID","rpc"),Pe(d,"SID",u.K),Pe(d,"AID",u.T),Pe(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(d,"TO",u.ja),Pe(d,"TYPE","xmlhttp"),ea(u,d),u.m&&u.o&&of(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Ju(Vn(d)),f.m=null,f.P=!0,uw(f,u)}n.Za=function(){this.C!=null&&(this.C=null,tc(this),af(this),wt(19))};function rc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Fw(u,d){var f=null;if(u.g==d){rc(u),uf(u),u.g=null;var g=2}else if(nf(u.h,d))f=d.D,pw(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=Gu(),_t(g,new iw(g,f)),nc(u)}else kw(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&Lx(u,d)||g==2&&af(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:Jr(u,5);break;case 4:Jr(u,10);break;case 3:Jr(u,6);break;default:Jr(u,2)}}}function Lw(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Jr(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new Zr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yu(g,"https"),Ju(g),C?Rx(g.toString(),f):Mx(g.toString(),f)}else wt(2);u.G=0,u.l&&u.l.sa(d),Vw(u),Mw(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Vw(u){if(u.G=0,u.ka=[],u.l){let d=gw(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function jw(u,d,f){var g=f instanceof Zr?Vn(f):new Zr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Zu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Zr(null);g&&Yu(A,g),d&&(A.g=d),C&&Zu(A,C),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Pe(g,f,d),Pe(g,"VER",u.la),ea(u,g),g}function Bw(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ue(new Ys({eb:f})):new Ue(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uw(){}n=Uw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ic(){}ic.prototype.g=function(u,d){return new Lt(u,d)};function Lt(u,d){pt.call(this),this.g=new Rw(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!q(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new eo(this)}b(Lt,pt),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){sf(this.g)},Lt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Wh(u),u=f);d.i.push(new wx(d.Ya++,u)),d.G==3&&nc(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,sf(this.g),delete this.g,Lt.aa.N.call(this)};function $w(u){Qh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}b($w,Qh);function Hw(){Yh.call(this),this.status=1}b(Hw,Yh);function eo(u){this.g=u}b(eo,Uw),eo.prototype.ua=function(){_t(this.g,"a")},eo.prototype.ta=function(u){_t(this.g,new $w(u))},eo.prototype.sa=function(u){_t(this.g,new Hw)},eo.prototype.ra=function(){_t(this.g,"b")},ic.prototype.createWebChannel=ic.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Um=Jn.createWebChannelTransport=function(){return new ic},Bm=Jn.getStatEventTarget=function(){return Gu()},jm=Jn.Event=Qr,hd=Jn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wu.NO_ERROR=0,Wu.TIMEOUT=8,Wu.HTTP_ERROR=6,nu=Jn.ErrorCode=Wu,ow.COMPLETE="complete",Vm=Jn.EventType=ow,ew.EventType=$s,$s.OPEN="a",$s.CLOSE="b",$s.ERROR="c",$s.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Qo=Jn.WebChannel=ew,iL=Jn.FetchXmlHttpFactory=Ys,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,Lm=Jn.XhrIo=Ue}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});var l0="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var bs="10.14.0";var Fr=new uc("@firebase/firestore");function es(){return Fr.logLevel}function fb(n){Fr.setLogLevel(n)}function k(n,...e){if(Fr.logLevel<=mn.DEBUG){let t=e.map(Gv);Fr.debug(`Firestore (${bs}): ${n}`,...t)}}function Ge(n,...e){if(Fr.logLevel<=mn.ERROR){let t=e.map(Gv);Fr.error(`Firestore (${bs}): ${n}`,...t)}}function dn(n,...e){if(Fr.logLevel<=mn.WARN){let t=e.map(Gv);Fr.warn(`Firestore (${bs}): ${n}`,...t)}}function Gv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${bs}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function K(n,e){n||z()}function pb(n,e){n||z()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends Qw{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var it=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ed=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Wm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},Km=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Qm=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new it;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new it,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new it)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Ed(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new et(e)}},Ym=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Zm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ym(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Jm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Xm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new Jm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function oL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Dd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=oL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function cs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function gb(n){return n+"\0"}var je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ye=class n extends Cd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},sL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends Cd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return sL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var ls=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function ey(n){return n.fields.find(e=>e.kind===2)}function bi(n){return n.fields.filter(e=>e.kind!==2)}ls.UNKNOWN_ID=-1;var ss=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var pu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,en.min())}};function mb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new en(i,$.empty(),e)}function yb(n){return new en(n.readTime,n.key,-1)}var en=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),$.empty(),-1)}static max(){return new n(Q.max(),$.empty(),-1)}};function Wv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var vb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Td=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Gr(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==vb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var bd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new it,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ni(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Kv(r.target.error);this.V.reject(new Ni(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Ni(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new ny(t)}},Lr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ta())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Si(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ac())return!1;if(n.v())return!0;let e=ta(),t=n.S(e),r=0<t&&t<10,i=_b(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Ni(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ni(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=bd.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function _b(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var ty=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Si(this.B.delete())}},Ni=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Wr(n){return n.name==="IndexedDbTransactionError"}var ny=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Si(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Si(this.store.add(e))}get(e){return Si(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Si(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Si(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Kv(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new ty(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Si(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Kv(r.target.error);t(i)}})}var d0=!1;function Kv(n){let e=Lr.S(ta());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return d0||(d0=!0,setTimeout(()=>{throw r},0)),r}}return n}var ry=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Wr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Gr(t)}yield this.X(6e4)}))}},iy=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=yb(o);Wv(s,r)>0&&(r=s)}),new en(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Ht=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ou(n){return n==null}function gu(n){return n===0&&1/n==-1/0}function wb(n){return typeof n=="number"&&Number.isInteger(n)&&!gu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function St(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=h0(e)),e=aL(n.get(t),e);return h0(e)}function aL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function h0(n){return n+""}function Sn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ye(r)}var f0=["userId","batchId"];function yd(n,e){return[n,St(e)]}function Ib(n,e,t){return[n,St(e),t]}var uL={},cL=["prefixPath","collectionGroup","readTime","documentId"],lL=["prefixPath","collectionGroup","documentId"],dL=["collectionGroup","readTime","prefixPath","documentId"],hL=["canonicalId","targetId"],fL=["targetId","path"],pL=["path","targetId"],gL=["collectionId","parent"],mL=["indexId","uid"],yL=["uid","sequenceNumber"],vL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_L=["indexId","uid","orderedDocumentKey"],wL=["userId","collectionPath","documentId"],IL=["userId","collectionPath","largestBatchId"],EL=["userId","collectionGroup","largestBatchId"],Eb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DL=[...Eb,"documentOverlays"],Db=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Cb=Db,Qv=[...Cb,"indexConfiguration","indexState","indexEntries"],CL=Qv,TL=[...Qv,"globals"];var mu=class extends Td{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ot(n,e){let t=U(n);return Lr.F(t._e,e)}function p0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ke=class n{constructor(e,t){this.comparator=e,this.root=t||xn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new os(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new os(this.root,e,this.comparator,!1)}getReverseIterator(){return new os(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new os(this.root,e,this.comparator,!0)}},os=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new xn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class n{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sd(this.data.getIterator())}getIteratorFrom(e){return new Sd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Sd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Yo(n){return n.hasNext()?n.getNext():void 0}var qt=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new xe(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ad=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function bb(){return typeof atob<"u"}var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ad("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var bL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(n){if(K(!!n),typeof n=="string"){let e=0,t=bL.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vr(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function _h(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Yv(n){let e=n.mapValue.fields.__previous_value__;return _h(e)?Yv(e):e}function yu(n){let e=tr(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var oy=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},jr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var kr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vd={nullValue:"NULL_VALUE"};function Pi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_h(n)?4:Sb(n)?9007199254740991:wh(n)?10:11:z()}function Nn(n,e){if(n===e)return!0;let t=Pi(n);if(t!==Pi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yu(n).isEqual(yu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=tr(i.timestampValue),a=tr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Vr(i.bytesValue).isEqual(Vr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?gu(s)===gu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return cs(n.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(p0(s)!==p0(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Nn(s[c],a[c])))return!1;return!0}(n,e);default:return z()}}function vu(n,e){return(n.values||[]).find(t=>Nn(t,e))!==void 0}function Br(n,e){if(n===e)return 0;let t=Pi(n),r=Pi(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),c=Fe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return g0(n.timestampValue,e.timestampValue);case 4:return g0(yu(n),yu(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Vr(o),c=Vr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=re(a[l],c[l]);if(h!==0)return h}return re(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Fe(o.latitude),Fe(s.latitude));return a!==0?a:re(Fe(o.longitude),Fe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return m0(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=re(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:m0(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===kr.mapValue&&s===kr.mapValue)return 0;if(o===kr.mapValue)return 1;if(s===kr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=re(c[p],h[p]);if(m!==0)return m;let v=Br(a[c[p]],l[h[p]]);if(v!==0)return v}return re(c.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function g0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=tr(n),r=tr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function m0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Br(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function ds(n){return sy(n)}function sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=tr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=sy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${sy(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function ki(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ay(n){return!!n&&"integerValue"in n}function _u(n){return!!n&&"arrayValue"in n}function y0(n){return!!n&&"nullValue"in n}function v0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _d(n){return!!n&&"mapValue"in n}function wh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function cu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return qi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ab={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function SL(n){return"nullValue"in n?vd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ki(jr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?wh(n)?Ab:{mapValue:{}}:z()}function AL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ki(jr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Ab:"mapValue"in n?wh(n)?{mapValue:{}}:kr:z()}function _0(n,e){let t=Br(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function w0(n,e){let t=Br(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_d(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=cu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());_d(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_d(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(cu(this.value))}};function xb(n){let e=[];return qi(n.fields,(t,r)=>{let i=new We([t]);if(_d(r)){let o=xb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new qt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Pn=class{constructor(e,t){this.position=e,this.inclusive=t}};function I0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Br(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function E0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nn(n.position[t],e.position[t]))return!1;return!0}var Oi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function xL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var xd=class{},de=class n extends xd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ly(e,t,r):t==="array-contains"?new fy(e,r):t==="in"?new Rd(e,r):t==="not-in"?new py(e,r):t==="array-contains-any"?new gy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dy(e,r):new hy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Br(t,this.value)):t!==null&&Pi(this.value)===Pi(t)&&this.matchesComparison(Br(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class n extends xd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return hs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function hs(n){return n.op==="and"}function uy(n){return n.op==="or"}function Zv(n){return Rb(n)&&hs(n)}function Rb(n){for(let e of n.filters)if(e instanceof be)return!1;return!0}function cy(n){if(n instanceof de)return n.field.canonicalString()+n.op.toString()+ds(n.value);if(Zv(n))return n.filters.map(e=>cy(e)).join(",");{let e=n.filters.map(t=>cy(t)).join(",");return`${n.op}(${e})`}}function Mb(n,e){return n instanceof de?function(r,i){return i instanceof de&&r.op===i.op&&r.field.isEqual(i.field)&&Nn(r.value,i.value)}(n,e):n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Mb(s,i.filters[a]),!0):!1}(n,e):void z()}function Nb(n,e){let t=n.filters.concat(e);return be.create(t,n.op)}function Pb(n){return n instanceof de?function(t){return`${t.field.canonicalString()} ${t.op} ${ds(t.value)}`}(n):n instanceof be?function(t){return t.op.toString()+" {"+t.getFilters().map(Pb).join(" ,")+"}"}(n):"Filter"}var ly=class extends de{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},dy=class extends de{constructor(e,t){super(e,"in",t),this.keys=kb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},hy=class extends de{constructor(e,t){super(e,"not-in",t),this.keys=kb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var fy=class extends de{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return _u(t)&&vu(t.arrayValue,this.value)}},Rd=class extends de{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vu(this.value.arrayValue,t)}},py=class extends de{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!vu(this.value.arrayValue,t)}},gy=class extends de{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!_u(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vu(this.value.arrayValue,r))}};var my=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function yy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new my(n,e,t,r,i,o,s)}function Fi(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ou(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ds(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ds(r)).join(",")),e.ue=t}return e.ue}function Fu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Mb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E0(n.startAt,e.startAt)&&E0(n.endAt,e.endAt)}function Md(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Nd(n,e){return n.filters.filter(t=>t instanceof de&&t.field.isEqual(e))}function D0(n,e,t){let r=vd,i=!0;for(let o of Nd(n,e)){let s=vd,a=!0;switch(o.op){case"<":case"<=":s=SL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=vd}_0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];_0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function C0(n,e,t){let r=kr,i=!0;for(let o of Nd(n,e)){let s=kr,a=!0;switch(o.op){case">=":case">":s=AL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=kr}w0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];w0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var hn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Ob(n,e,t,r,i,o,s,a){return new hn(n,e,t,r,i,o,s,a)}function Ss(n){return new hn(n)}function T0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Jv(n){return n.collectionGroup!==null}function as(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xe(We.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Oi(o,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new Oi(We.keyField(),r))}return e.ce}function At(n){let e=U(n);return e.le||(e.le=RL(e,as(n))),e.le}function RL(n,e){if(n.limitType==="F")return yy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Oi(i.field,o)});let t=n.endAt?new Pn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Pn(n.startAt.position,n.startAt.inclusive):null;return yy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vy(n,e){let t=n.filters.concat([e]);return new hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Pd(n,e,t){return new hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lu(n,e){return Fu(At(n),At(e))&&n.limitType===e.limitType}function Fb(n){return`${Fi(At(n))}|lt:${n.limitType}`}function ts(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Pb(i)).join(", ")}]`),Ou(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ds(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ds(i)).join(",")),`Target(${r})`}(At(n))}; limitType=${n.limitType})`}function Vu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of as(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=I0(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,as(r),i)||r.endAt&&!function(s,a,c){let l=I0(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,as(r),i))}(n,e)}function Lb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vb(n){return(e,t)=>{let r=!1;for(let i of as(n)){let o=ML(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function ML(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Br(c,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var kn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Tb(this.inner)}size(){return this.innerSize}};var NL=new ke($.comparator);function Ot(){return NL}var jb=new ke($.comparator);function au(...n){let e=jb;for(let t of n)e=e.insert(t.key,t);return e}function Bb(n){let e=jb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function An(){return lu()}function Ub(){return lu()}function lu(){return new kn(n=>n.toString(),(n,e)=>n.isEqual(e))}var PL=new ke($.comparator),kL=new xe($.comparator);function ie(...n){let e=kL;for(let t of n)e=e.add(t);return e}var OL=new xe(re);function Xv(){return OL}function e_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gu(e)?"-0":e}}function $b(n){return{integerValue:""+n}}function Hb(n,e){return wb(e)?$b(e):e_(n,e)}var fs=class{constructor(){this._=void 0}};function FL(n,e,t){return n instanceof Ur?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_h(o)&&(o=Yv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof nr?zb(n,e):n instanceof rr?Gb(n,e):function(i,o){let s=qb(i,o),a=b0(s)+b0(i.Pe);return ay(s)&&ay(i.Pe)?$b(a):e_(i.serializer,a)}(n,e)}function LL(n,e,t){return n instanceof nr?zb(n,e):n instanceof rr?Gb(n,e):t}function qb(n,e){return n instanceof $r?function(r){return ay(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ur=class extends fs{},nr=class extends fs{constructor(e){super(),this.elements=e}};function zb(n,e){let t=Wb(e);for(let r of n.elements)t.some(i=>Nn(i,r))||t.push(r);return{arrayValue:{values:t}}}var rr=class extends fs{constructor(e){super(),this.elements=e}};function Gb(n,e){let t=Wb(e);for(let r of n.elements)t=t.filter(i=>!Nn(i,r));return{arrayValue:{values:t}}}var $r=class extends fs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function b0(n){return Fe(n.integerValue||n.doubleValue)}function Wb(n){return _u(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Li=class{constructor(e,t){this.field=e,this.transform=t}};function VL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof nr&&i instanceof nr||r instanceof rr&&i instanceof rr?cs(r.elements,i.elements,Nn):r instanceof $r&&i instanceof $r?Nn(r.Pe,i.Pe):r instanceof Ur&&i instanceof Ur}(n.transform,e.transform)}var _y=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ps=class{};function Kb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qr(n.key,qe.none()):new Hr(n.key,n.data,qe.none());{let t=n.data,r=vt.empty(),i=new xe(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new fn(n.key,r,new qt(i.toArray()),qe.none())}}function jL(n,e,t){n instanceof Hr?function(i,o,s){let a=i.value.clone(),c=A0(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof fn?function(i,o,s){if(!wd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=A0(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Qb(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function du(n,e,t,r){return n instanceof Hr?function(o,s,a,c){if(!wd(o.precondition,s))return a;let l=o.value.clone(),h=x0(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof fn?function(o,s,a,c){if(!wd(o.precondition,s))return a;let l=x0(o.fieldTransforms,c,s),h=s.data;return h.setAll(Qb(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return wd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function BL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=qb(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function S0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cs(r,i,(o,s)=>VL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Hr=class extends ps{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fn=class extends ps{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Qb(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function A0(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,LL(s,a,t[i]))}return r}function x0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,FL(o,s,e))}return r}var qr=class extends ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wu=class extends ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Iu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&jL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=du(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Ub();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Kb(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&cs(this.mutations,e.mutations,(t,r)=>S0(t,r))&&cs(this.baseMutations,e.baseMutations,(t,r)=>S0(t,r))}},wy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return PL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Eu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Iy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,me;function Yb(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function Zb(n){if(n===void 0)return Ge("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(me=Je||(Je={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var R0=null;function Jb(){return new TextEncoder}var UL=new xr([4294967295,4294967295],0);function M0(n){let e=Jb().encode(n),t=new Fm;return t.update(e),new Uint8Array(t.digest())}function N0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xr([t,r],0),new xr([i,o],0)]}var Ey=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mi(`Invalid padding: ${t}`);if(r<0)throw new Mi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=xr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(xr.fromNumber(r)));return i.compare(UL)===1&&(i=new xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=M0(e),[r,i]=N0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=M0(e),[r,i]=N0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Mi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Du=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new ke(re),Ot(),ie())}},Cu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var us=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},kd=class{constructor(e,t){this.targetId=e,this.me=t}},Od=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Fd=class{constructor(){this.fe=0,this.ge=k0(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Cu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=k0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Dy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ot(),this.qe=P0(),this.Qe=new ke(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Md(o))if(r===0){let s=new $(o.path);this.Ue(t,s,tt.newNoDocument(s,Q.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}R0?.et(function(h,p,m,v,b){var M,N,B,q,F,Y;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(ee.bloomFilter={applied:b===0,hashCount:(M=Z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(q=(B=(N=Z?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&q!==void 0?q:0,padding:(Y=(F=Z?.bits)===null||F===void 0?void 0:F.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Vr(r).toUint8Array()}catch(c){if(c instanceof Ad)return dn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ey(s,i,o)}catch(c){return dn(c instanceof Mi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Md(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,tt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Du(e,t,this.Qe,this.ke,r);return this.ke=Ot(),this.qe=P0(),this.Qe=new ke(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Fd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xe(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function P0(){return new ke($.comparator)}function k0(){return new ke($.comparator)}var $L={asc:"ASCENDING",desc:"DESCENDING"},HL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qL={and:"AND",or:"OR"},Cy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ty(n,e){return n.useProto3Json||Ou(e)?e:{value:e}}function gs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zL(n,e){return gs(n,e.toTimestamp())}function Ke(n){return K(!!n),Q.fromTimestamp(function(t){let r=tr(t);return new je(r.seconds,r.nanos)}(n))}function t_(n,e){return by(n,e).canonicalString()}function by(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function eS(n){let e=ye.fromString(n);return K(lS(e)),e}function Tu(n,e){return t_(n.databaseId,e.path)}function Rn(n,e){let t=eS(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(rS(t))}function tS(n,e){return t_(n.databaseId,e)}function nS(n){let e=eS(n);return e.length===4?ye.emptyPath():rS(e)}function Sy(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rS(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function O0(n,e,t){return{name:Tu(n,e),fields:t.value.mapValue.fields}}function iS(n,e,t){let r=Rn(n,e.name),i=Ke(e.updateTime),o=e.createTime?Ke(e.createTime):Q.min(),s=new vt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function GL(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=Rn(r,i.found.name),s=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):Q.min(),c=new vt({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=Rn(r,i.missing),s=Ke(i.readTime);return tt.newNoDocument(o,s)}(n,e):z()}function WL(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Qe.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qe.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:Zb(l.code);return new P(h,l.message||"")}(s);t=new Od(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Rn(n,r.document.name),o=Ke(r.document.updateTime),s=r.document.createTime?Ke(r.document.createTime):Q.min(),a=new vt({mapValue:{fields:r.document.fields}}),c=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new us(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Rn(n,r.document),o=r.readTime?Ke(r.readTime):Q.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new us([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Rn(n,r.document),o=r.removedTargetIds||[];t=new us([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Iy(i,o),a=r.targetId;t=new kd(a,s)}}return t}function bu(n,e){let t;if(e instanceof Hr)t={update:O0(n,e.key,e.value)};else if(e instanceof qr)t={delete:Tu(n,e.key)};else if(e instanceof fn)t={update:O0(n,e.key,e.data),updateMask:XL(e.fieldMask)};else{if(!(e instanceof wu))return z();t={verify:Tu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ur)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $r)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:zL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function Ay(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(Ke(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new Ur;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new nr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new rr(h)}else"increment"in a?c=new $r(s,a.increment):z();let l=We.fromServerFormat(a.fieldPath);return new Li(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Rn(n,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new qt(l.map(h=>We.fromServerFormat(h)))}(e.updateMask);return new fn(i,o,s,t,r)}return new Hr(i,o,t,r)}if(e.delete){let i=Rn(n,e.delete);return new qr(i,t)}if(e.verify){let i=Rn(n,e.verify);return new wu(i,t)}return z()}function KL(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ke(i.updateTime):Ke(o);return s.isEqual(Q.min())&&(s=Ke(o)),new _y(s,i.transformResults||[])}(t,e))):[]}function oS(n,e){return{documents:[tS(n,e.path)]}}function sS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tS(n,i);let o=function(l){if(l.length!==0)return cS(be.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ns(m.field),direction:YL(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Ty(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function aS(n){let e=nS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=uS(p);return m instanceof be&&Zv(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Oi(rs(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Ou(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new Pn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Pn(v,m)}(t.endAt)),Ob(e,i,s,o,a,"F",c,l)}function QL(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=rs(t.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=rs(t.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=rs(t.unaryFilter.field);return de.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=rs(t.unaryFilter.field);return de.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return de.create(rs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return be.create(t.compositeFilter.filters.map(r=>uS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function YL(n){return $L[n]}function ZL(n){return HL[n]}function JL(n){return qL[n]}function ns(n){return{fieldPath:n.canonicalString()}}function rs(n){return We.fromServerFormat(n.fieldPath)}function cS(n){return n instanceof de?function(t){if(t.op==="=="){if(v0(t.value))return{unaryFilter:{field:ns(t.field),op:"IS_NAN"}};if(y0(t.value))return{unaryFilter:{field:ns(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(v0(t.value))return{unaryFilter:{field:ns(t.field),op:"IS_NOT_NAN"}};if(y0(t.value))return{unaryFilter:{field:ns(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(t.field),op:ZL(t.op),value:t.value}}}(n):n instanceof be?function(t){let r=t.getFilters().map(i=>cS(i));return r.length===1?r[0]:{compositeFilter:{op:JL(t.op),filters:r}}}(n):z()}function XL(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ms=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),a=Qe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ld=class{constructor(e){this.ct=e}};function eV(n,e){let t;if(e.document)t=iS(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=ji(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=ji(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new je(i[0],i[1]);return Q.fromTimestamp(o)}(e.readTime)),t}function F0(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Tu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:gs(o,s.version.toTimestamp()),createTime:gs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vi(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Vi(e.version)}}return r}function Vd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ji(n){let e=new je(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Ai(n,e){let t=(e.baseMutations||[]).map(o=>Ay(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Ay(n.ct,o)),i=je.fromMillis(e.localWriteTimeMs);return new Iu(e.batchId,i,t,r)}function uu(n){let e=ji(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ji(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),At(Ss(nS(o.documents[0])))}(n.query):function(o){return At(aS(o))}(n.query),new ms(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qe.fromBase64String(n.resumeToken))}function dS(n,e){let t=Vi(e.snapshotVersion),r=Vi(e.lastLimboFreeSnapshotVersion),i;i=Md(e.target)?oS(n.ct,e.target):sS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function n_(n){let e=aS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pd(e,e.limit,"L"):e}function $m(n,e){return new Eu(e.largestBatchId,Ay(n.ct,e.overlayMutation))}function L0(n,e){let t=e.path.lastSegment();return[n,St(e.path.popLast()),t]}function V0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Vi(r.readTime),documentKey:St(r.documentKey.path),largestBatchId:r.largestBatchId}}var xy=class{getBundleMetadata(e,t){return j0(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:ji(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return j0(e).put(function(i){return{bundleId:i.id,createTime:Vi(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return B0(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:n_(o.bundledQuery),readTime:ji(o.readTime)}}(r)})}saveNamedQuery(e,t){return B0(e).put(function(i){return{name:i.name,readTime:Vi(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function j0(n){return ot(n,"bundles")}function B0(n){return ot(n,"namedQueries")}var jd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return ru(e).get(L0(this.userId,t)).next(r=>r?$m(this.serializer,r):null)}getOverlays(e,t){let r=An();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Eu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(St(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ru(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=An(),o=St(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ru(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=$m(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=An(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ru(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=$m(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return ru(e).put(function(i,o,s){let[a,c,l]=L0(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:bu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function ru(n){return ot(n,"documentOverlays")}var Ry=class{Pt(e){return ot(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Xn=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),gu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=tr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Vr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Sb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):wh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Fe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Xn.vt=new Xn;function tV(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function U0(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=tV(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var My=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=U0(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=U0(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Ny=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Py=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},xi=class{constructor(){this.jt=new My,this.Ht=new Ny(this.jt),this.Jt=new Py(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ri=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Rr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=$0(n.arrayValue,e.arrayValue),t!==0?t:(t=$0(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function $0(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Bd=class{constructor(e){this.Xt=new xe((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=ey(e);if(t!==void 0&&!this.sn(t))return!1;let r=bi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new xe(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ss(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ss(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ss(r.field,r.dir==="asc"?0:1)));return new ls(ls.UNKNOWN_ID,this.collectionId,t,pu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function hS(n){var e,t;if(K(n instanceof de||n instanceof be),n instanceof de){if(n instanceof Rd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>de.create(n.field,"==",o)))||[];return be.create(i,"or")}return n}let r=n.filters.map(i=>hS(i));return be.create(r,n.op)}function nV(n){if(n.getFilters().length===0)return[];let e=Fy(hS(n));return K(fS(e)),ky(e)||Oy(e)?[e]:e.getFilters()}function ky(n){return n instanceof de}function Oy(n){return n instanceof be&&Zv(n)}function fS(n){return ky(n)||Oy(n)||function(t){if(t instanceof be&&uy(t)){for(let r of t.getFilters())if(!ky(r)&&!Oy(r))return!1;return!0}return!1}(n)}function Fy(n){if(K(n instanceof de||n instanceof be),n instanceof de)return n;if(n.filters.length===1)return Fy(n.filters[0]);let e=n.filters.map(r=>Fy(r)),t=be.create(e,n.op);return t=Ud(t),fS(t)?t:(K(t instanceof be),K(hs(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>r_(r,i)))}function r_(n,e){let t;return K(n instanceof de||n instanceof be),K(e instanceof de||e instanceof be),t=n instanceof de?e instanceof de?function(i,o){return be.create([i,o],"and")}(n,e):H0(n,e):e instanceof de?H0(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),hs(i)&&hs(o))return Nb(i,o.getFilters());let s=uy(i)?i:o,a=uy(i)?o:i,c=s.filters.map(l=>r_(l,a));return be.create(c,"or")}(n,e),Ud(t)}function H0(n,e){if(hs(e))return Nb(e,n.getFilters());{let t=e.filters.map(r=>r_(n,r));return be.create(t,"or")}}function Ud(n){if(K(n instanceof de||n instanceof be),n instanceof de)return n;let e=n.getFilters();if(e.length===1)return Ud(e[0]);if(Rb(n))return n;let t=e.map(i=>Ud(i)),r=[];return t.forEach(i=>{i instanceof de?r.push(i):i instanceof be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,n.op)}var Ly=class{constructor(){this.un=new Su}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(en.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(en.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Su=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(ye.comparator)).toArray()}};var fd=new Uint8Array(0),Vy=class{constructor(e,t){this.databaseId=t,this.cn=new Su,this.ln=new kn(r=>Fi(r),(r,i)=>Fu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:St(i)};return q0(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[gb(t),""],!1,!0);return q0(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Sn(s.parent))}return r})}addFieldIndex(e,t){let r=iu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Jo(e);return o.next(a=>{s.put(V0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=iu(e),i=Jo(e),o=Zo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=iu(e),r=Zo(e),i=Jo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Bd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Zo(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${Fi(t)}`);let h=function(F,Y){let ee=ey(Y);if(ee===void 0)return null;for(let Z of Nd(F,ee.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,c),p=function(F,Y){let ee=new Map;for(let Z of bi(Y))for(let I of Nd(F,Z.fieldPath))switch(I.op){case"==":case"in":ee.set(Z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Z.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,c),m=function(F,Y){let ee=[],Z=!0;for(let I of bi(Y)){let y=I.kind===0?D0(F,I.fieldPath,F.startAt):C0(F,I.fieldPath,F.startAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new Pn(ee,Z)}(l,c),v=function(F,Y){let ee=[],Z=!0;for(let I of bi(Y)){let y=I.kind===0?C0(F,I.fieldPath,F.endAt):D0(F,I.fieldPath,F.endAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new Pn(ee,Z)}(l,c),b=this.In(c,l,m),M=this.In(c,l,v),N=this.Tn(c,l,p),B=this.En(c.indexId,h,b,m.inclusive,M,v.inclusive,N);return S.forEach(B,q=>r.G(q,t.limit).next(F=>{F.forEach(Y=>{let ee=$.fromSegments(Y.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=nV(be.create(e.filters,"and")).map(r=>yy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):fd,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,M))}return h}An(e,t,r,i){let o=new Ri(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Ri(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Bd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new xe(We.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new xi;for(let i of bi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Xn.vt.It(o,s)}return r.zt()}dn(e){let t=new xi;return Xn.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new xi;return Xn.vt.It(ki(this.databaseId,t),r.Yt(function(o){let s=bi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new xi);let o=0;for(let s of bi(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&_u(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Xn.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new xi;c.seed(a.zt()),Xn.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof de&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=iu(e),i=Jo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new pu(p.sequenceNumber,new en(ji(p.readTime),new $(Sn(p.documentKey)),p.largestBatchId)):pu.empty(),v=h.fields.map(([b,M])=>new ss(We.fromServerFormat(b),M));return new ls(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=iu(e),o=Jo(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(V0(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return Zo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Zo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Zo(e),o=new xe(Rr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Ri(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new xe(Rr),i=this.Vn(t,e);if(i==null)return r;let o=ey(t);if(o!=null){let s=e.data.field(o.fieldPath);if(_u(s))for(let a of s.arrayValue.values||[])r=r.add(new Ri(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ri(t.indexId,e.key,fd,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),b=l.getIterator(),M=Yo(v),N=Yo(b);for(;M||N;){let B=!1,q=!1;if(M&&N){let F=h(M,N);F<0?q=!0:F>0&&(B=!0)}else M!=null?q=!0:B=!0;B?(p(N),N=Yo(b)):q?(m(M),M=Yo(v)):(M=Yo(v),N=Yo(b))}}(i,o,Rr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Jo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Rr(s,a)).filter((s,a,c)=>!a||Rr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Rr(s,e),c=Rr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,fd,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,fd,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return Rr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(z0)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(z0)}};function q0(n){return ot(n,"collectionParents")}function Zo(n){return ot(n,"indexEntries")}function iu(n){return ot(n,"indexConfiguration")}function Jo(n){return ot(n,"indexState")}function z0(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Wv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new en(e.readTime,e.documentKey,t)}var G0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function pS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=Ib(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function $d(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(41943040,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);var Hd=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=is(e),s=Mr(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new Iu(a,t,r,i),l=function(v,b,M){let N=M.baseMutations.map(q=>bu(v.ct,q)),B=M.mutations.map(q=>bu(v.ct,q));return{userId:b,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,c),h=[],p=new xe((m,v)=>re(m.canonicalString(),v.canonicalString()));for(let m of i){let v=Ib(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,uL))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Mr(e).get(t).next(r=>r?(K(r.userId===this.userId),Ai(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Mr(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Ai(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Mr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ai(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=yd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return is(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=Sn(h);if(l===this.userId&&t.path.isEqual(m))return Mr(e).get(p).next(v=>{if(!v)throw z();K(v.userId===this.userId),o.push(Ai(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(re),i=[];return t.forEach(o=>{let s=yd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=is(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,M=Sn(v);m===this.userId&&o.path.isEqual(M)?r=r.add(b):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=yd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new xe(re);return is(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,b=Sn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Mr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Ai(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return pS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return is(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Sn(o[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return gS(e,this.userId,t)}Nn(e){return mS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function gS(n,e,t){let r=yd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return is(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Mr(n){return ot(n,"mutations")}function is(n){return ot(n,"documentMutations")}function mS(n){return ot(n,"mutationQueues")}var ys=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var jy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ys(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xo(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Xo(e).J((s,a)=>{let c=uu(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Xo(e).J((r,i)=>{let o=uu(i);t(o)})}qn(e){return W0(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return W0(e).put("targetGlobalKey",t)}Kn(e,t){return Xo(e).put(dS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Fi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Xo(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=uu(a);Fu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Nr(e);return t.forEach(s=>{let a=St(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Nr(e);return S.forEach(t,o=>{let s=St(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Nr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nr(e),o=ie();return i.J({range:r,H:!0},(s,a,c)=>{let l=Sn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=St(t.path),i=IDBKeyRange.bound([r],[gb(r)],!1,!0),o=0;return Nr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Xo(e).get(t).next(r=>r?uu(r):null)}};function Xo(n){return ot(n,"targets")}function W0(n){return ot(n,"targetGlobal")}function Nr(n){return ot(n,"targetDocuments")}function K0([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var By=class{constructor(e){this.Un=e,this.buffer=new xe(K0),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();K0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Uy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Gr(t)}yield this.Hn(3e5)}))}},$y=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Ht.oe);let r=new By(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(G0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G0):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),es()<=mn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function rV(n,e){return new $y(n,e)}var Hy=class{constructor(e,t){this.db=e,this.garbageCollector=rV(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return pd(e,r)}removeReference(e,t,r){return pd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pd(e,t)}nr(e,t){return function(i,o){let s=!1;return mS(i).Y(a=>gS(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Q.min()),Nr(e).delete(function(p){return[0,St(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pd(e,t)}tr(e,t){let r=Nr(e),i,o=Ht.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Ht.oe&&t(new $(Sn(i)),o),o=l,i=c):o=Ht.oe}).next(()=>{o!==Ht.oe&&t(new $(Sn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function pd(n,e){return Nr(n).put(function(r,i){return{targetId:0,path:St(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var qd=class{constructor(){this.changes=new kn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ti(e).put(r)}removeEntry(e,t,r){return Ti(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Vd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return Ti(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ou(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return Ti(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ou(t))},(i,o)=>{r={document:this.ir(t,o),size:$d(o)}}).next(()=>r)}getEntries(e,t){let r=Ot();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Ot(),i=new ke($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,$d(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new xe(Z0);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ou(i.first()),ou(i.last())),s=i.getIterator(),a=s.getNext();return Ti(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Z0(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(ou(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Vd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ti(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Ot();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Vu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Ot(),s=Y0(t,r),a=Y0(t,en.max());return Ti(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new zy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Q0(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return Q0(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=eV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return tt.newInvalidDocument(e)}};function yS(n){return new qy(n)}var zy=class extends qd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new kn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new xe((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=F0(this.cr.serializer,s);i=i.add(o.path.popLast());let l=$d(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=F0(this.cr.serializer,s.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Q0(n){return ot(n,"remoteDocumentGlobal")}function Ti(n){return ot(n,"remoteDocumentsV14")}function ou(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y0(n,e){let t=e.documentKey.path.toArray();return[n,Vd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Z0(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var Gy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var zd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&du(r.mutation,i,qt.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=An();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=au();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=An();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ot(),s=lu(),a=function(){return lu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof fn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),du(h.mutation,l,h.mutation.getFieldMask(),je.now())):s.set(l.key,qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Gy(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=lu(),i=new ke((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||qt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ie()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=Ub();h.forEach(m=>{if(!o.has(m)){let v=Kb(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(An()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ie())).next(h=>({batchId:a,changes:Bb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=au();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=au();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new hn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,tt.newInvalidDocument(h)))});let a=au();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&du(h.mutation,l,qt.empty(),je.now()),Vu(t,l)&&(a=a.insert(c,l))}),a})}};var Wy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:n_(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),S.resolve()}};var Ky=class{constructor(){this.overlays=new ke($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=An();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=An(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ke((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=An(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=An(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Eu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Qy=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Au=class{constructor(){this.Tr=new xe(Xe.Er),this.dr=new xe(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ye([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ye([])),r=new Xe(t,e),i=new Xe(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Yy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xe(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Iu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(re);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new $(o),0),a=new xe(re);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Zy=class{constructor(e){this.Mr=e,this.docs=function(){return new ke($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=Ot();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ot(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Wv(yb(h),r)<=0||(i.has(h.key)||Vu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Jy(this)}getSize(e){return S.resolve(this.size)}},Jy=class extends qd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Xy=class{constructor(e){this.persistence=e,this.Nr=new kn(t=>Fi(t),Fu),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Au,this.targetCount=0,this.kr=ys.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ys(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Gd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ht(0),this.Kr=!1,this.Kr=!0,this.$r=new Qy,this.referenceDelegate=e(this),this.Ur=new Xy(this),this.indexManager=new Ly,this.remoteDocumentCache=function(i){return new Zy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ld(t),this.Gr=new Wy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ky,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Yy(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new ev(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},ev=class extends Td{constructor(e){super(),this.currentSequenceNumber=e}},Wd=class n{constructor(e){this.persistence=e,this.Jr=new Au,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var tv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new bd("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",f0,{unique:!0}),c.createObjectStore("documentMutations")}(e),J0(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),J0(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",f0,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:wL});l.createIndex("collectionPathOverlayIndex",IL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",EL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:cL});l.createIndex("documentKeyIndex",lL),l.createIndex("collectionGroupIndex",dL)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:mL}).createIndex("sequenceNumberIndex",yL,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:vL}).createIndex("documentKeyIndex",_L,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=$d(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{K(c.userId===o.userId);let l=Ai(this.serializer,c);return pS(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new ye(s),l=function(p){return[0,St(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:St(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:gL});let r=t.store("collectionParents"),i=new Su,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:St(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new ye(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=Sn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=uu(i),s=dS(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new $(ye.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=yS(this.serializer),o=new Gd(Wd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ie();Ai(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new et(l),p=jd.lt(this.serializer,h),m=o.getIndexManager(h),v=Hd.lt(h,this.serializer,m,o.referenceDelegate);return new zd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new mu(t,Ht.oe),c).next()})})}};function J0(n){n.createObjectStore("targetDocuments",{keyPath:fL}).createIndex("documentTargetsIndex",pL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hL,{unique:!0}),n.createObjectStore("targetGlobal")}var Hm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nv=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hy(this,i),this.Ai=t+"main",this.serializer=new Ld(c),this.Ri=new Lr(this.Ai,this.hi,new tv(this.serializer)),this.$r=new Ry,this.Ur=new jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yS(this.serializer),this.Gr=new xy,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Hm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ht(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Wr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return su(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return gd(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ot(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):su(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Hm);return!1}}return!(!this.networkEnabled||!this.inForeground)||gd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new mu(e,Ht.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>gd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Hd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Vy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?TL:c===16?CL:c===15?Qv:c===14?Cb:c===13?Db:c===12?DL:c===11?Eb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new mu(a,this.Qr?this.Qr.next():Ht.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,vb);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return su(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Hm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return su(e).put("owner",t)}static D(){return Lr.D()}bi(e){let t=su(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;hf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function su(n){return ot(n,"owner")}function gd(n){return ot(n,"clientMetadata")}function i_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var rv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var iv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Kd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hf()?8:_b(ta())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new iv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(es()<=mn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ts(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(es()<=mn.DEBUG&&k("QueryEngine","Query:",ts(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(es()<=mn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ts(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,At(t))):S.resolve())}Yi(e,t){if(T0(t))return S.resolve(null);let r=At(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Pd(t,null,"F"),r=At(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Pd(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return T0(t)||i.isEqual(Q.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(es()<=mn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ts(t)),this.rs(e,s,t,mb(i,-1)).next(a=>a))})}ts(e,t){let r=new xe(Vb(e));return t.forEach((i,o)=>{Vu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return es()<=mn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ts(t)),this.Ji.getDocumentsMatchingQuery(e,t,en.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ov=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ke(re),this._s=new kn(o=>Fi(o),Fu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function vS(n,e,t,r){return new ov(n,e,t,r)}function _S(n,e){return R(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function iV(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(M=>{let N=l.docVersions.get(b);K(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function wS(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function oV(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Qe.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,B){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=Ot(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(IS(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function IS(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ot();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Q.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function sV(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vs(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ms(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function _s(n,e,t){return R(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Wr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Qd(n,e,t){let r=U(n),i=Q.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=U(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,At(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:ie())).next(a=>(CS(r,Lb(e),a),{documents:a,Ts:o})))}function ES(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function DS(n,e){let t=U(n),r=t.us.get(e)||Q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,mb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CS(t,e,i),i))}function CS(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function aV(n,e,t,r){return R(this,null,function*(){let i=U(n),o=ie(),s=Ot();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield vs(i,function(h){return At(Ss(ye.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>IS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function uV(r,i){return R(this,arguments,function*(n,e,t=ie()){let o=yield vs(n,At(n_(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ke(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Qe.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function X0(n,e){return`firestore_clients_${n}_${e}`}function eb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qm(n,e){return`firestore_targets_${n}_${e}`}var Yd=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},hu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Zd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Xv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=wb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},sv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}},xu=class{constructor(){this.activeTargetIds=Xv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},fu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ke(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=X0(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new xu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(X0(this.persistenceKey,r));if(i){let o=Zd.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(qm(this.persistenceKey,e));if(i){let o=hu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Ht.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Ht.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Yd(this.currentUser,e,t,r),o=eb(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=eb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=qm(this.persistenceKey,e),o=new hu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Zd.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Yd.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return hu.Rs(i,t)}Ls(e){return sv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Xv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Jd=class{constructor(){this.so=new xu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var av=class{_o(e){}shutdown(){}};var Xd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var md=null;function zm(){return md===null?md=function(){return 268435456+Math.round(2147483648*Math.random())}():md++,"0x"+md.toString(16)}var cV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",cv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=zm(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw dn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=cV[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=zm();return new Promise((s,a)=>{let c=new Lm;c.setWithCredentials(!0),c.listenOnce(Vm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nu.NO_ERROR:let h=c.getResponseJson();k(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case nu.TIMEOUT:k(yt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case nu.HTTP_ERROR:let p=c.getStatus();if(k(yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(yt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=zm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Um(),a=Bm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(yt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,b=new uv({Io:N=>{v?k(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(yt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,B,q)=>{N.listen(B,F=>{try{q(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return M(p,Qo.EventType.OPEN,()=>{v||(k(yt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),M(p,Qo.EventType.CLOSE,()=>{v||(v=!0,k(yt,`RPC '${e}' stream ${i} transport closed`),b.So())}),M(p,Qo.EventType.ERROR,N=>{v||(v=!0,dn(yt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,Qo.EventType.MESSAGE,N=>{var B;if(!v){let q=N.data[0];K(!!q);let F=q,Y=F.error||((B=F[0])===null||B===void 0?void 0:B.error);if(Y){k(yt,`RPC '${e}' stream ${i} received error:`,Y);let ee=Y.status,Z=function(w){let E=Je[w];if(E!==void 0)return Zb(E)}(ee),I=Y.message;Z===void 0&&(Z=x.INTERNAL,I="Unknown error status: "+ee+" with message "+Y.message),v=!0,b.So(new P(Z,I)),p.close()}else k(yt,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),M(a,jm.STAT_EVENT,N=>{N.stat===hd.PROXY?k(yt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===hd.NOPROXY&&k(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function TS(){return typeof window<"u"?window:null}function Id(){return typeof document<"u"?document:null}function ju(n){return new Cy(n,!0)}var Ru=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var eh=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ru(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lv=class extends eh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=WL(this.serializer,e),r=function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?Ke(s.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Sy(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Md(c)?{documents:oS(o,c)}:{query:sS(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Xb(o,s.resumeToken);let l=Ty(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){a.readTime=gs(o,s.snapshotVersion.toTimestamp());let l=Ty(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=QL(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Sy(this.serializer),t.removeTarget=e,this.a_(t)}},dv=class extends eh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=KL(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Sy(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bu(this.serializer,r))};this.a_(t)}};var hv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,by(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,by(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},fv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ge(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var pv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Kr(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=U(c);l.L_.add(4),yield As(l),l.q_.set("Unknown"),l.L_.delete(4),yield Bu(l)})}(this))}))}),this.q_=new fv(r,i)}};function Bu(n){return R(this,null,function*(){if(Kr(n))for(let e of n.B_)yield e(!0)})}function As(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Ih(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),a_(t)?s_(t):Rs(t).r_()&&o_(t,e))}function ws(n,e){let t=U(n),r=Rs(t);t.N_.delete(e),r.r_()&&bS(t,e),t.N_.size===0&&(r.r_()?r.o_():Kr(t)&&t.q_.set("Unknown"))}function o_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rs(n).A_(e)}function bS(n,e){n.Q_.xe(e),Rs(n).R_(e)}function s_(n){n.Q_=new Dy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Rs(n).start(),n.q_.v_()}function a_(n){return Kr(n)&&!Rs(n).n_()&&n.N_.size>0}function Kr(n){return U(n).L_.size===0}function SS(n){n.Q_=void 0}function lV(n){return R(this,null,function*(){n.q_.set("Online")})}function dV(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{o_(n,e)})})}function hV(n,e){return R(this,null,function*(){SS(n),a_(n)?(n.q_.M_(e),s_(n)):n.q_.set("Unknown")})}function fV(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof Od&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield th(n,r)}else if(e instanceof us?n.Q_.Ke(e):e instanceof kd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield wS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),bS(o,c);let p=new ms(h.target,c,l,h.sequenceNumber);o_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield th(n,r)}})}function th(n,e,t){return R(this,null,function*(){if(!Wr(e))throw e;n.L_.add(1),yield As(n),n.q_.set("Offline"),t||(t=()=>wS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Bu(n)}))})}function AS(n,e){return e().catch(t=>th(n,t,e))}function xs(n){return R(this,null,function*(){let e=U(n),t=zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;pV(e);)try{let i=yield sV(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,gV(e,i)}catch(i){yield th(e,i)}xS(e)&&RS(e)})}function pV(n){return Kr(n)&&n.O_.length<10}function gV(n,e){n.O_.push(e);let t=zr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function xS(n){return Kr(n)&&!zr(n).n_()&&n.O_.length>0}function RS(n){zr(n).start()}function mV(n){return R(this,null,function*(){zr(n).p_()})}function yV(n){return R(this,null,function*(){let e=zr(n);for(let t of n.O_)e.m_(t.mutations)})}function vV(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=wy.from(r,e,t);yield AS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield xs(n)})}function _V(n,e){return R(this,null,function*(){e&&zr(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return Yb(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();zr(r).s_(),yield AS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield xs(r)}})}(n,e)),xS(n)&&RS(n)})}function tb(n,e){return R(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Kr(t);t.L_.add(3),yield As(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Bu(t)})}function gv(n,e){return R(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield Bu(t)):e||(t.L_.add(2),yield As(t),t.q_.set("Unknown"))})}function Rs(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new lv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:lV.bind(null,n),Ro:dV.bind(null,n),mo:hV.bind(null,n),d_:fV.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),a_(n)?s_(n):n.q_.set("Unknown")):(yield n.K_.stop(),SS(n))}))),n.K_}function zr(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new dv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mV.bind(null,n),mo:_V.bind(null,n),f_:yV.bind(null,n),g_:vV.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield xs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var mv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new it,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ms(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),Wr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var nh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=au(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var rh=class{constructor(){this.W_=new ke($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Is=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,nh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var yv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},vv=class{constructor(){this.queries=nb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=nb(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function nb(){return new kn(n=>Fb(n),Lu)}function u_(n,e){return R(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new yv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ms(s,`Initialization of query '${ts(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&l_(t)})}function c_(n,e){return R(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function wV(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&l_(t)}function IV(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function l_(n){n.Y_.forEach(e=>{e.next()})}var _v,rb;(rb=_v||(_v={})).ea="default",rb.Cache="cache";var Mu=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Is(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Is.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_v.Cache}};var wv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var ih=class{constructor(e){this.serializer=e}Es(e){return Rn(this.serializer,e)}ds(e){return e.metadata.exists?iS(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ke(e)}},Iv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=MS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ye.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new ih(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield aV(this.localStore,new ih(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield uV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function MS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var oh=class{constructor(e){this.key=e}},sh=class{constructor(e){this.key=e}},ah=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=Vb(e),this.Ra=new nh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new rh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Vu(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return M(v)-M(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Is(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new sh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new oh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Is.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Ev=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Dv=class{constructor(e){this.key=e,this.va=!1}},Cv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new kn(a=>Fb(a),Lu),this.Ma=new Map,this.xa=new Set,this.Oa=new ke($.comparator),this.Na=new Map,this.La=new Au,this.Ba={},this.ka=new Map,this.qa=ys.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function EV(n,e,t=!0){return R(this,null,function*(){let r=Eh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield NS(r,e,t,!0),i})}function DV(n,e){return R(this,null,function*(){let t=Eh(n);yield NS(t,e,!0,!1)})}function NS(n,e,t,r){return R(this,null,function*(){let i=yield vs(n.localStore,At(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield d_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Ih(n.remoteStore,i),a})}function d_(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,B,q){return R(this,null,function*(){let F=N.view.ma(B);F.ns&&(F=yield Qd(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let Y=q&&q.targetChanges.get(N.targetId),ee=q&&q.targetMismatches.get(N.targetId)!=null,Z=N.view.applyChanges(F,M.isPrimaryClient,Y,ee);return Tv(M,N.targetId,Z.wa),Z.snapshot})}(n,p,m,v);let o=yield Qd(n.localStore,e,!0),s=new ah(e,o.Ts),a=s.ma(o.documents),c=Cu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Tv(n,t,l.wa);let h=new Ev(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function CV(n,e,t){return R(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Lu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield _s(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ws(r.remoteStore,i.targetId),Es(r,i.targetId)}).catch(Gr))):(Es(r,i.targetId),yield _s(r.localStore,i.targetId,!0))})}function TV(n,e){return R(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ws(t.remoteStore,r.targetId))})}function bV(n,e,t){return R(this,null,function*(){let r=g_(n);try{let i=yield function(s,a){let c=U(s),l=je.now(),h=a.reduce((v,b)=>v.add(b.key),ie()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Ot(),M=ie();return c.cs.getEntries(v,h).next(N=>{b=N,b.forEach((B,q)=>{q.isValidDocument()||(M=M.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let B=[];for(let q of a){let F=BL(q,p.get(q.key).overlayedDocument);F!=null&&B.push(new fn(q.key,F,xb(F.value.mapValue),qe.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:Bb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new ke(re)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield sr(r,i.changes),yield xs(r.remoteStore)}catch(i){let o=Ms(i,"Failed to persist write");t.reject(o)}})}function PS(n,e){return R(this,null,function*(){let t=U(n);try{let r=yield oV(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield sr(t,r,e)}catch(r){yield Gr(r)}})}function ib(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=U(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&l_(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SV(n,e,t){return R(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new ke($.comparator);s=s.insert(o,tt.newNoDocument(o,Q.min()));let a=ie().add(o),c=new Du(Q.min(),new Map,new ke(re),s,a);yield PS(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),p_(r)}else yield _s(r.localStore,e,!1).then(()=>Es(r,e,t)).catch(Gr)})}function AV(n,e){return R(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield iV(t.localStore,e);f_(t,r,null),h_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sr(t,i)}catch(i){yield Gr(i)}})}function xV(n,e,t){return R(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let c=U(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);f_(r,e,t),h_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sr(r,i)}catch(i){yield Gr(i)}})}function RV(n,e){return R(this,null,function*(){let t=U(n);Kr(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ms(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function h_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function f_(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Es(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||kS(n,r)})}function kS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ws(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),p_(n))}function Tv(n,e,t){for(let r of t)r instanceof oh?(n.La.addReference(r.key,e),MV(n,r)):r instanceof sh?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||kS(n,r.key)):z()}function MV(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),p_(n))}function p_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ye.fromString(e)),r=n.qa.next();n.Na.set(r,new Dv(t)),n.Oa=n.Oa.insert(t,r),Ih(n.remoteStore,new ms(At(Ss(t.path)),r,"TargetPurposeLimboResolution",Ht.oe))}}function sr(n,e,t){return R(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=rv.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=U(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Wr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function NV(n,e){return R(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield _S(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sr(t,r.hs)}})}function PV(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function kV(n,e){return R(this,null,function*(){let t=U(n),r=yield Qd(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Tv(t,e.targetId,i.wa),i})}function OV(n,e){return R(this,null,function*(){let t=U(n);return DS(t.localStore,e).then(r=>sr(t,r))})}function FV(n,e,t,r){return R(this,null,function*(){let i=U(n),o=yield function(a,c){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield xs(i.remoteStore):t==="acknowledged"||t==="rejected"?(f_(i,e,r||null),h_(i,e),function(a,c){U(U(a).mutationQueue).On(c)}(i.localStore,e)):z(),yield sr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function LV(n,e){return R(this,null,function*(){let t=U(n);if(Eh(t),g_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ob(t,r.toArray());t.Qa=!0,yield gv(t.remoteStore,!0);for(let o of i)Ih(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Es(t,s),_s(t.localStore,s,!0))),ws(t.remoteStore,s)}),yield i,yield ob(t,r),function(s){let a=U(s);a.Na.forEach((c,l)=>{ws(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new ke($.comparator)}(t),t.Qa=!1,yield gv(t.remoteStore,!1)}})}function ob(n,e,t){return R(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield vs(r.localStore,At(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield kV(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield ES(r.localStore,s);a=yield vs(r.localStore,l),yield d_(r,OS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function OS(n){return Ob(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function VV(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function jV(n,e,t,r){return R(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield DS(i.localStore,Lb(o[0])),a=Du.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qe.EMPTY_BYTE_STRING);yield sr(i,s,a);break}case"rejected":yield _s(i.localStore,e,!0),Es(i,e,r);break;default:z()}})}function BV(n,e,t){return R(this,null,function*(){let r=Eh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield ES(r.localStore,i),s=yield vs(r.localStore,o);yield d_(r,OS(o),s.targetId,!1,s.resumeToken),Ih(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield _s(r.localStore,i,!1).then(()=>{ws(r.remoteStore,i),Es(r,i)}).catch(Gr))}})}function Eh(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SV.bind(null,e),e.Ca.d_=wV.bind(null,e.eventManager),e.Ca.$a=IV.bind(null,e.eventManager),e}function g_(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xV.bind(null,e),e}function UV(n,e,t){let r=U(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,b){let M=U(v),N=Ke(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",B=>M.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(MS(c));let l=new Iv(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield sr(o,p.Ia,void 0),yield function(v,b){let M=U(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,b))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return dn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var bv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=ju(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return vS(this.persistence,new Kd,t.initialUser,this.serializer)}Ga(t){return new Gd(Wd.Zr,this.serializer)}Wa(t){return new Jd}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var uh=class n extends bv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield lf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield g_(this.Ja.syncEngine),yield xs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return vS(this.persistence,new Kd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Uy(r,e.asyncQueue,t)}Ha(e,t){let r=new iy(t,this.persistence);return new ry(e.asyncQueue,r)}Ga(e){let t=i_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new nv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,TS(),Id(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Jd}},Sv=class n extends uh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield lf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof fu&&(this.sharedClientState.syncEngine={no:FV.bind(null,t),ro:jV.bind(null,t),io:BV.bind(null,t),Qi:VV.bind(null,t),eo:OV.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield LV(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=TS();if(!fu.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=i_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},m_=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ib(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=NV.bind(null,this.syncEngine),yield gv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new vv}()}createDatastore(t){let r=ju(t.databaseInfo.databaseId),i=function(s){return new cv(s)}(t.databaseInfo);return function(s,a,c,l){return new hv(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new pv(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>ib(this.syncEngine,r,0),function(){return Xd.D()?new Xd:new av}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new Cv(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield As(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function sb(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ds=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Av=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new it,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new wv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var xv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=U(i),a={documents:o.map(p=>Tu(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=GL(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new wu(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=U(r),s={writes:i.map(a=>bu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Q.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Q.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Rv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Ru(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new xv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ou(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Yb(t)}return!1}};var Mv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Dd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new it;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ms(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Gm(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield _S(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ab(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield y_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>tb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>tb(e.remoteStore,i)),n._onlineComponents=e})}function y_(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Gm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;dn("Error using user provided cache. Falling back to memory cache: "+t),yield Gm(n,new bv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Gm(n,new bv);return n._offlineComponents})}function Dh(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield ab(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield ab(n,new m_))),n._onlineComponents})}function FS(n){return y_(n).then(e=>e.persistence)}function v_(n){return y_(n).then(e=>e.localStore)}function LS(n){return Dh(n).then(e=>e.remoteStore)}function __(n){return Dh(n).then(e=>e.syncEngine)}function $V(n){return Dh(n).then(e=>e.datastore)}function Cs(n){return R(this,null,function*(){let e=yield Dh(n),t=e.eventManager;return t.onListen=EV.bind(null,e.syncEngine),t.onUnlisten=CV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TV.bind(null,e.syncEngine),t})}function HV(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield FS(n),t=yield LS(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),Bu(o)}(t)}))}function qV(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield FS(n),t=yield LS(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=U(i);o.L_.add(0),yield As(o),o.q_.set("Offline")})}(t)}))}function zV(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ms(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield v_(n),e,t)})),t.promise}function VS(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Ds({next:m=>{h.Za(),s.enqueueAndForget(()=>c_(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mu(Ss(a.path),h,{includeMetadataChanges:!0,_a:!0});return u_(o,p)}(yield Cs(n),n.asyncQueue,e,t,r)})),r.promise}function GV(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield Qd(i,o,!0),c=new ah(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Ms(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield v_(n),e,t)})),t.promise}function jS(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Ds({next:m=>{h.Za(),s.enqueueAndForget(()=>c_(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mu(a,h,{includeMetadataChanges:!0,_a:!0});return u_(o,p)}(yield Cs(n),n.asyncQueue,e,t,r)})),r.promise}function WV(n,e){let t=new Ds(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield Cs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield Cs(n),t)}))}}function KV(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?Jb().encode(s):s,function(h,p){return new Av(h,p)}(function(h,p){if(h instanceof Uint8Array)return sb(h,p);if(h instanceof ArrayBuffer)return sb(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,ju(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){UV(yield __(n),i,r)}))}function QV(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield v_(n),e)}))}function BS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ub=new Map;function w_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function I_(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cb(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lb(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ch(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ch(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function US(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var ch=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ch({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ch(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Wm;switch(r.type){case"firstParty":return new Zm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ub.get(t);r&&(k("ComponentProvider","Removing Datastore"),ub.delete(t),r.terminate())}(this),Promise.resolve()}};function $S(n,e,t,r={}){var i;let o=(n=ve(n,Bi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&dn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=et.MOCK_USER;else{a=Kw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new et(l)}n._authCredentials=new Km(new Ed(a,c))}}var dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ne=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Mn=class n extends dt{constructor(e,t,r){super(e,t,Ss(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function E_(n,e,...t){if(n=Le(n),w_("collection","path",e),n instanceof Bi){let r=ye.fromString(e,...t);return lb(r),new Mn(n,null,r)}{if(!(n instanceof Ne||n instanceof Mn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return lb(r),new Mn(n.firestore,null,r)}}function HS(n,e){if(n=ve(n,Bi),w_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dt(n,null,function(r){return new hn(ye.emptyPath(),r)}(e))}function Uu(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Dd.newId()),w_("doc","path",e),n instanceof Bi){let r=ye.fromString(e,...t);return cb(r),new Ne(n,null,new $(r))}{if(!(n instanceof Ne||n instanceof Mn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return cb(r),new Ne(n.firestore,n instanceof Mn?n.converter:null,new $(r))}}function D_(n,e){return n=Le(n),e=Le(e),(n instanceof Ne||n instanceof Mn)&&(e instanceof Ne||e instanceof Mn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function C_(n,e){return n=Le(n),e=Le(e),n instanceof dt&&e instanceof dt&&n.firestore===e.firestore&&Lu(n._query,e._query)&&n.converter===e.converter}var lh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ru(this,"async_queue_retry"),this.Vu=()=>{let r=Id();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Id();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Id();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new it;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=mv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Nv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Pv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new it,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var qS=-1,Be=class extends Bi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new lh(e),this._firestoreClient=void 0,yield e}})}};function ht(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zS(n),n._firestoreClient}function zS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new oy(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,BS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Mv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function GS(n,e){dn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return KS(n,m_.provider,{build:r=>new uh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function WS(n){return R(this,null,function*(){dn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();KS(n,m_.provider,{build:t=>new Sv(t,e.cacheSizeBytes)})})}function KS(n,e,t){if((n=ve(n,Be))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},zS(n)}function QS(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new it;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!Lr.D())return Promise.resolve();let i=r+"main";yield Lr.delete(i)})}(i_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function YS(n){return function(t){let r=new it;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return RV(yield __(t),r)})),r.promise}(ht(n=ve(n,Be)))}function ZS(n){return HV(ht(n=ve(n,Be)))}function JS(n){return qV(ht(n=ve(n,Be)))}function XS(n,e){let t=ht(n=ve(n,Be)),r=new Pv;return KV(t,n._databaseId,e,r),r}function eA(n,e){return QV(ht(n=ve(n,Be)),e).then(t=>t?new dt(n,null,t.query):null)}var On=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ir=class{constructor(e){this._methodName=e}};var Ui=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Nu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var YV=/^__.*__$/,kv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hr(e,this.data,t,this.fieldTransforms)}},dh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function tA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var hh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(tA(this.Cu)&&YV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Ov=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ju(e)}Qu(e,t,r,i=!1){return new hh({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function zi(n){let e=n._freezeSettings(),t=ju(n._databaseId);return new Ov(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Th(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);S_("Data must be an object, but it was:",s,r);let a=iA(r,s),c,l;if(o.merge)c=new qt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Bv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);sA(h,m)||h.push(m)}c=new qt(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new kv(new vt(a),c,l)}var Pu=class n extends ir{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function nA(n,e,t){return new hh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Fv=class n extends ir{_toFieldTransform(e){return new Li(e.path,new Ur)}isEqual(e){return e instanceof n}},Lv=class n extends ir{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=nA(this,e,!0),r=this.Ku.map(o=>Gi(o,t)),i=new nr(r);return new Li(e.path,i)}isEqual(e){return e instanceof n&&ff(this.Ku,e.Ku)}},Vv=class n extends ir{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=nA(this,e,!0),r=this.Ku.map(o=>Gi(o,t)),i=new rr(r);return new Li(e.path,i)}isEqual(e){return e instanceof n&&ff(this.Ku,e.Ku)}},jv=class n extends ir{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new $r(e.serializer,Hb(e.serializer,this.$u));return new Li(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function T_(n,e,t,r){let i=n.Qu(1,e,t);S_("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();qi(r,(c,l)=>{let h=A_(e,c,t);l=Le(l);let p=i.Nu(h);if(l instanceof Pu)o.push(h);else{let m=Gi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new qt(o);return new dh(s,a,i.fieldTransforms)}function b_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Bv(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Bv(e,o[m])),c.push(o[m+1]);let l=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!sA(l,a[m])){let v=a[m],b=c[m];b=Le(b);let M=s.Nu(v);if(b instanceof Pu)l.push(v);else{let N=Gi(b,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new qt(l);return new dh(h,p,s.fieldTransforms)}function rA(n,e,t,r=!1){return Gi(t,n.Qu(r?4:3,e))}function Gi(n,e){if(oA(n=Le(n)))return S_("Unsupported field value:",e,n),iA(n,e);if(n instanceof ir)return function(r,i){if(!tA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Gi(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Hb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=je.fromDate(r);return{timestampValue:gs(i.serializer,o)}}if(r instanceof je){let o=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gs(i.serializer,o)}}if(r instanceof Ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof On)return{bytesValue:Xb(i.serializer,r._byteString)};if(r instanceof Ne){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:t_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return e_(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ch(r)}`)}(n,e)}function iA(n,e){let t={};return Tb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(n,(r,i)=>{let o=Gi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function oA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof Ui||n instanceof On||n instanceof Ne||n instanceof ir||n instanceof Nu)}function S_(n,e,t){if(!oA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Ch(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Bv(n,e,t){if((e=Le(e))instanceof pn)return e._internalPath;if(typeof e=="string")return A_(n,e);throw fh("Field path arguments must be of type string or ",n,!1,void 0,t)}var ZV=new RegExp("[~\\*/\\[\\]]");function A_(n,e,t){if(e.search(ZV)>=0)throw fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pn(...e.split("."))._internalPath}catch{throw fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function sA(n,e){return n.some(t=>t.isEqual(e))}var $i=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Uv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Uv=class extends $i{data(){return super.data()}};function bh(n,e){return typeof e=="string"?A_(n,e):e instanceof pn?e._internalPath:e._delegate._internalPath}function aA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ku=class{},Hi=class extends ku{};function ar(n,e,...t){let r=[];e instanceof ku&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof $v).length,a=o.filter(c=>c instanceof ph).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var ph=class n extends Hi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return yA(e._query,t),new dt(e.firestore,e.converter,vy(e._query,t))}_parse(e){let t=zi(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){hb(p,h);let v=[];for(let b of p)v.push(db(c,o,b));m={arrayValue:{values:v}}}else m=db(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||hb(p,h),m=rA(a,s,p,h==="in"||h==="not-in");return de.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function uA(n,e,t){let r=e,i=bh("where",n);return ph._create(i,r,t)}var $v=class n extends ku{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:be.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)yA(s,c),s=vy(s,c)}(e._query,t),new dt(e.firestore,e.converter,vy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Hv=class n extends Hi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oi(o,s)}(e._query,this._field,this._direction);return new dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new hn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function cA(n,e="asc"){let t=e,r=bh("orderBy",n);return Hv._create(r,t)}var gh=class n extends Hi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new dt(e.firestore,e.converter,Pd(e._query,this._limit,this._limitType))}};function lA(n){return US("limit",n),gh._create("limit",n,"F")}function dA(n){return US("limitToLast",n),gh._create("limitToLast",n,"L")}var mh=class n extends Hi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=mA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function hA(...n){return mh._create("startAt",n,!0)}function fA(...n){return mh._create("startAfter",n,!1)}var yh=class n extends Hi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=mA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function pA(...n){return yh._create("endBefore",n,!1)}function gA(...n){return yh._create("endAt",n,!0)}function mA(n,e,t,r){if(t[0]=Le(t[0]),t[0]instanceof $i)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of as(o))if(p.field.isKeyField())h.push(ki(s,c.key));else{let m=c.data.field(p.field);if(_h(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Pn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=zi(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let M=h[b];if(m[b].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!Jv(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(ye.fromString(M));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);v.push(ki(a,B))}else{let N=rA(c,l,M);v.push(N)}}return new Pn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function db(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jv(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ki(n,new $(r))}if(t instanceof Ne)return ki(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(t)}.`)}function hb(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ts=class{convertValue(e,t="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return qi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new Nu(o)}convertGeoPoint(e){return new Ui(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Yv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){let t=tr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);K(lS(r));let i=new jr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ge(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Sh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var qv=class extends Ts{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};var er=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tn=class extends $i{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Or(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Or=class extends tn{data(e={}){return super.data(e)}},gn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new er(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Or(this._firestore,this._userDataWriter,r.key,r,new er(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Or(i._firestore,i._userDataWriter,a.doc.key,a.doc,new er(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Or(i._firestore,i._userDataWriter,a.doc.key,a.doc,new er(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:JV(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function JV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function x_(n,e){return n instanceof tn&&e instanceof tn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gn&&e instanceof gn&&n._firestore===e._firestore&&C_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function vA(n){n=ve(n,Ne);let e=ve(n.firestore,Be);return VS(ht(e),n._key).then(t=>P_(e,n,t))}var or=class extends Ts{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};function _A(n){n=ve(n,Ne);let e=ve(n.firestore,Be),t=ht(e),r=new or(e);return zV(t,n._key).then(i=>new tn(e,r,n._key,i,new er(i!==null&&i.hasLocalMutations,!0),n.converter))}function wA(n){n=ve(n,Ne);let e=ve(n.firestore,Be);return VS(ht(e),n._key,{source:"server"}).then(t=>P_(e,n,t))}function IA(n){n=ve(n,dt);let e=ve(n.firestore,Be),t=ht(e),r=new or(e);return aA(n._query),jS(t,n._query).then(i=>new gn(e,r,n,i))}function EA(n){n=ve(n,dt);let e=ve(n.firestore,Be),t=ht(e),r=new or(e);return GV(t,n._query).then(i=>new gn(e,r,n,i))}function DA(n){n=ve(n,dt);let e=ve(n.firestore,Be),t=ht(e),r=new or(e);return jS(t,n._query,{source:"server"}).then(i=>new gn(e,r,n,i))}function R_(n,e,t){n=ve(n,Ne);let r=ve(n.firestore,Be),i=Sh(n.converter,e,t);return Ns(r,[Th(zi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function M_(n,e,t,...r){n=ve(n,Ne);let i=ve(n.firestore,Be),o=zi(i),s;return s=typeof(e=Le(e))=="string"||e instanceof pn?b_(o,"updateDoc",n._key,e,t,r):T_(o,"updateDoc",n._key,e),Ns(i,[s.toMutation(n._key,qe.exists(!0))])}function CA(n){return Ns(ve(n.firestore,Be),[new qr(n._key,qe.none())])}function TA(n,e){let t=ve(n.firestore,Be),r=Uu(n),i=Sh(n.converter,e);return Ns(t,[Th(zi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function N_(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Nv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Nv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Ne)l=ve(n.firestore,Be),h=Ss(n._key.path),c={next:p=>{e[s]&&e[s](P_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=ve(n,dt);l=ve(p.firestore,Be),h=p._query;let m=new or(l);c={next:v=>{e[s]&&e[s](new gn(l,m,p,v))},error:e[s+1],complete:e[s+2]},aA(n._query)}return function(m,v,b,M){let N=new Ds(M),B=new Mu(v,N,b);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return u_(yield Cs(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return c_(yield Cs(m),B)}))}}(ht(l),h,a,c)}function bA(n,e){return WV(ht(n=ve(n,Be)),Nv(e)?e:{next:e})}function Ns(n,e){return function(r,i){let o=new it;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return bV(yield __(r),i,o)})),o.promise}(ht(n),e)}function P_(n,e,t){let r=t.docs.get(e._key),i=new or(n);return new tn(n,i,e._key,r,new er(t.hasPendingWrites,t.fromCache),e.converter)}var XV={maxAttempts:5};var vh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zi(e)}set(e,t,r){this._verifyNotCommitted();let i=Pr(e,this._firestore),o=Sh(i.converter,t,r),s=Th(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Pr(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof pn?b_(this._dataReader,"WriteBatch.update",o._key,t,r,i):T_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Pr(e,this._firestore);return this._mutations=this._mutations.concat(new qr(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Pr(n,e){if((n=Le(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var zv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=zi(t)}get(t){let r=Pr(t,this._firestore),i=new qv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new $i(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new $i(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Pr(t,this._firestore),s=Sh(o.converter,r,i),a=Th(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Pr(t,this._firestore),a;return a=typeof(r=Le(r))=="string"||r instanceof pn?b_(this._dataReader,"Transaction.update",s._key,r,i,o):T_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Pr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Pr(e,this._firestore),r=new or(this._firestore);return super.get(e).then(i=>new tn(this._firestore,r,t._key,i._document,new er(!1,!1),t.converter))}};function SA(n,e,t){n=ve(n,Be);let r=Object.assign(Object.assign({},XV),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new it;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield $V(o);new Rv(o.asyncQueue,l,a,s,c).au()})),c.promise}(ht(n),i=>e(new zv(n,i)),r)}function AA(){return new Pu("deleteField")}function xA(){return new Fv("serverTimestamp")}function RA(...n){return new Lv("arrayUnion",n)}function MA(...n){return new Vv("arrayRemove",n)}function NA(n){return new jv("increment",n)}(function(e,t=!0){(function(i){bs=i})(Zw),na(new Xr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Be(new Qm(r.getProvider("auth-internal")),new Xm(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),hr(l0,"4.7.3",e),hr(l0,"4.7.3","esm2017")})();var e2="@firebase/firestore-compat",t2="0.3.38";function j_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function PA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function kA(){if(!bb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ah=class n{constructor(e){this._delegate=e}static fromBase64String(e){return kA(),new n(On.fromBase64String(e))}static fromUint8Array(e){return PA(),new n(On.fromUint8Array(e))}toBase64(){return kA(),this._delegate.toBase64()}toUint8Array(){return PA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function k_(n){return n2(n,["next","error","complete"])}function n2(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var O_=class{enableIndexedDbPersistence(e,t){return GS(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return WS(e._delegate)}clearIndexedDbPersistence(e){return QS(e._delegate)}},xh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){$S(this._delegate,e,t,r)}enableNetwork(){return ZS(this._delegate)}disableNetwork(){return JS(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,I_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return YS(this._delegate)}onSnapshotsInSync(e){return bA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Os(this,E_(this._delegate,e))}catch(t){throw xt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fn(this,Uu(this._delegate,e))}catch(t){throw xt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yi(this,HS(this._delegate,e))}catch(t){throw xt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return SA(this._delegate,t=>e(new Rh(this,t)))}batch(){return ht(this._delegate),new Mh(new vh(this._delegate,e=>Ns(this._delegate,e)))}loadBundle(e){return XS(this._delegate,e)}namedQuery(e){return eA(this._delegate,e).then(t=>t?new Yi(this,t):null)}},Ps=class extends Ts{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ah(new On(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Fn.forKey(t,this.firestore,null)}};function r2(n){fb(n)}var Rh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ps(e)}get(e){let t=Wi(e);return this._delegate.get(t).then(r=>new Ki(this._firestore,new tn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Wi(e);return r?(j_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Wi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Wi(e);return this._delegate.delete(t),this}},Mh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Wi(e);return r?(j_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Wi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Wi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},ks=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Or(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ps(e),t),i.set(t,o)),o}};ks.INSTANCES=new WeakMap;var Fn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ps(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ne(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Ne(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Os(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Os(this.firestore,E_(this._delegate,e))}catch(t){throw xt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Le(e),e instanceof Ne?D_(this._delegate,e):!1}set(e,t){t=j_("DocumentReference.set",t);try{return t?R_(this._delegate,e,t):R_(this._delegate,e)}catch(r){throw xt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?M_(this._delegate,e):M_(this._delegate,e,t,...r)}catch(i){throw xt(i,"updateDoc()","DocumentReference.update()")}}delete(){return CA(this._delegate)}onSnapshot(...e){let t=OA(e),r=FA(e,i=>new Ki(this.firestore,new tn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return N_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=_A(this._delegate):e?.source==="server"?t=wA(this._delegate):t=vA(this._delegate),t.then(r=>new Ki(this.firestore,new tn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xt(n,e,t){return n.message=n.message.replace(e,t),n}function OA(n){for(let e of n)if(typeof e=="object"&&!k_(e))return e;return{}}function FA(n,e){var t,r;let i;return k_(n[0])?i=n[0]:k_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ki=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return x_(this._delegate,e._delegate)}},Qi=class extends Ki{data(e){let t=this._delegate.data(e);return this._delegate._converter||pb(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Yi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ps(e)}where(e,t,r){try{return new n(this.firestore,ar(this._delegate,uA(e,t,r)))}catch(i){throw xt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,ar(this._delegate,cA(e,t)))}catch(r){throw xt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,ar(this._delegate,lA(e)))}catch(t){throw xt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,ar(this._delegate,dA(e)))}catch(t){throw xt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,ar(this._delegate,hA(...e)))}catch(t){throw xt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,ar(this._delegate,fA(...e)))}catch(t){throw xt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,ar(this._delegate,pA(...e)))}catch(t){throw xt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,ar(this._delegate,gA(...e)))}catch(t){throw xt(t,"endAt()","Query.endAt()")}}isEqual(e){return C_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=EA(this._delegate):e?.source==="server"?t=DA(this._delegate):t=IA(this._delegate),t.then(r=>new $u(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=OA(e),r=FA(e,i=>new $u(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return N_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},F_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},$u=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new F_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Qi(this._firestore,r))})}isEqual(e){return x_(this._delegate,e._delegate)}},Os=class n extends Yi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Fn(this.firestore,e):null}doc(e){try{return e===void 0?new Fn(this.firestore,Uu(this._delegate)):new Fn(this.firestore,Uu(this._delegate,e))}catch(t){throw xt(t,"doc()","CollectionReference.doc()")}}add(e){return TA(this._delegate,e).then(t=>new Fn(this.firestore,t))}isEqual(e){return D_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Wi(n){return ve(n,Ne)}var L_=class n{constructor(...e){this._delegate=new pn(...e)}static documentId(){return new n(We.keyField().canonicalString())}isEqual(e){return e=Le(e),e instanceof pn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var V_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=xA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=AA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=RA(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=MA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=NA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var i2={Firestore:xh,GeoPoint:Ui,Timestamp:je,Blob:Ah,Transaction:Rh,WriteBatch:Mh,DocumentReference:Fn,DocumentSnapshot:Ki,Query:Yi,QueryDocumentSnapshot:Qi,QuerySnapshot:$u,CollectionReference:Os,FieldPath:L_,FieldValue:V_,setLogLevel:r2,CACHE_SIZE_UNLIMITED:qS};function o2(n,e){n.INTERNAL.registerComponent(new Xr("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},i2)))}function s2(n){o2(n,(e,t)=>new xh(e,t,new O_)),n.registerVersion(e2,t2)}s2(Vt);function a2(n,e=sa){return new he(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function LA(n,e){return a2(n,e)}function u2(n,e){return LA(n,e).pipe(oi(void 0),ca(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function $_(n,e){return LA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var Nh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=BA(r,t);return new kh(i,o,this.afs)}snapshotChanges(){return u2(this.ref,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?Re(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ie(this.ref.get(e)).pipe(kt)}};function Ph(n,e){return $_(n,e).pipe(oi(void 0),ca(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function VA(n,e,t){return Ph(n,t).pipe(ii((r,i)=>c2(r,i.map(o=>o.payload),e),[]),Lf(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function c2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=l2(n,r))}),n}function B_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function l2(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return B_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return B_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return B_(n,e.oldIndex,1);break}return n}function jA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var kh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ph(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(oi(void 0),ca(),lt(([r,i])=>i.length>0||!r),G(([,r])=>r),kt)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=jA(e);return VA(this.query,t,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return $_(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?Re(V({},r.data()),{[e.idField]:r.id}):r.data())),kt)}get(e){return Ie(this.query.get(e)).pipe(kt)}add(e){return this.ref.add(e)}doc(e){return new Nh(this.ref.doc(e),this.afs)}},U_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Ph(this.query,this.afs.schedulers.outsideAngular).pipe(kt):Ph(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),kt)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=jA(e);return VA(this.query,t,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return $_(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),kt)}get(e){return Ie(this.query.get(e)).pipe(kt)}},d2=new W("angularfire2.enableFirestorePersistence"),h2=new W("angularfire2.firestore.persistenceSettings"),f2=new W("angularfire2.firestore.settings"),p2=new W("angularfire2.firestore.use-emulator");function BA(n,e=t=>t){return{query:e(n),ref:n}}var Ft=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,b,M,N,B,q){this.schedulers=c;let F=tu(t,a,r),Y=h;p&&Om(F,a,m,b,M,N,v,B),[this.firestore,this.persistenceEnabled$]=ld(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),Y&&ee.useEmulator(...Y),i&&!wi(s)){let Z=()=>{try{return Ie(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),J(!1)}};return[ee,a.runOutsideAngular(Z)]}else return[ee,J(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=BA(i,r),a=this.schedulers.ngZone.run(()=>o);return new kh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new U_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Nh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Wo),O(Ko,8),O(d2,8),O(f2,8),O(Nt),O(ge),O(ad),O(h2,8),O(p2,8),O(a0,8),O(xm,8),O(Rm,8),O(Mm,8),O(Nm,8),O(Pm,8),O(km,8),O(Ci,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var UA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $A=(()=>{class n{constructor(t){this.headerService=t,this.header=new od,this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(UA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-header"]],decls:16,vars:7,consts:[[2,"border-collapse","collapse","width","100%","border","0.5px solid grey"],[2,"max-width","150px","max-height","150px",3,"src"],[2,"max-width","200px"]],template:function(r,i){r&1&&(le(0,"table",0)(1,"tr")(2,"td"),pe(3),De(4,"br"),pe(5),ue(),le(6,"td"),De(7,"img",1),ue(),le(8,"td",2),pe(9),De(10,"br"),pe(11),De(12,"br"),pe(13),De(14,"br"),pe(15),ue()()()),r&2&&(Ee(3),Me(" ",i.header.name," "),Ee(2),Me(" ",i.header.goalLife," "),Ee(2),fg("src",i.header.photoUrl,ND),Ee(2),Me(" ",i.header.email,""),Ee(2),Me(" ",i.header.phoneNumber,""),Ee(2),Me(" ",i.header.location,""),Ee(2),Me(" ",i.header.socialNetwork," "))},styles:["table[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:.5px solid black;border-collapse:collapse}"]})}}return n})();var HA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Education",this.eduRef=t.collection(this.dbPath)}getEducation(){return this.eduRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function v2(n,e){if(n&1&&(le(0,"ul")(1,"li"),pe(2),De(3,"br"),pe(4),De(5,"br"),pe(6),De(7,"br"),ue()()),n&2){let t=e.$implicit;Ee(2),Me(" ",t.grade," "),Ee(2),Me(" ",t.educativeInstitute," "),Ee(2),Me(" ",t.date," ")}}var qA=(()=>{class n{constructor(t){this.educationService=t,this.education=[],this.educationService.getEducation().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(HA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-education"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(le(0,"table")(1,"h3"),pe(2,"Educations"),ue(),mi(3,v2,8,3,"ul",0),ue()),r&2&&(Ee(3),yi("ngForOf",i.education))},dependencies:[ko]})}}return n})();var Oh=class{constructor(){this.languagues="value1, value2, value3 ...",this.Areas="value1, value2, value3 ..."}};var zA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var GA=(()=>{class n{constructor(t){this.skillsService=t,this.skills=new Oh,this.skillsService.getSkills().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r[0],console.log(this.skills)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(zA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-skills"]],decls:9,vars:2,template:function(r,i){r&1&&(le(0,"table")(1,"h3"),pe(2,"Lenguages "),ue(),pe(3),De(4,"br"),le(5,"h3"),pe(6,"Technologies "),ue(),pe(7),De(8,"br"),ue()),r&2&&(Ee(3),Me(" ",i.skills.languagues," "),Ee(4),Me(" ",i.skills.Areas," "))}})}}return n})();var Fh=class{constructor(){this.Institute="institute example",this.title="title",this.date="date"}};var WA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var KA=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=new Fh,console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r[0],console.log(this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(WA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-certificates"]],decls:10,vars:3,consts:[[2,"border-collapse","collapse","width","100%"]],template:function(r,i){r&1&&(le(0,"table",0)(1,"h3"),pe(2,"Certifications "),ue(),le(3,"p"),pe(4),ue(),De(5,"br"),le(6,"p"),pe(7),ue(),le(8,"p"),pe(9),ue()()),r&2&&(Ee(4),Me("",i.certificates.title," "),Ee(3),Me(" ",i.certificates.Institute," "),Ee(2),Me(" ",i.certificates.date," "))}})}}return n})();var QA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Languages",this.languageRef=t.collection(this.dbPath)}getLanguage(){return this.languageRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T2(n,e){if(n&1&&(le(0,"ul")(1,"p"),pe(2),ue(),le(3,"p"),pe(4),ue()()),n&2){let t=e.$implicit;Ee(2),xl(t.language),Ee(2),xl(t.percentage)}}var YA=(()=>{class n{constructor(t){this.languaguesService=t,this.language=[],this.languaguesService.getLanguage().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.language=r,console.log(this.language)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(QA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-languages"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(le(0,"table")(1,"h3"),pe(2,"Languages"),ue(),mi(3,T2,5,2,"ul",0),ue()),r&2&&(Ee(3),yi("ngForOf",i.language))},dependencies:[ko]})}}return n})();var Lh=class{constructor(){this.interest="history"}};var ZA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var JA=(()=>{class n{constructor(t){this.interestsService=t,this.interests=new Lh,this.interestsService.getInterests().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r[0],console.log(this.interests)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(ZA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-insterests"]],decls:5,vars:1,template:function(r,i){r&1&&(le(0,"table")(1,"h3"),pe(2,"Interests"),ue(),le(3,"p"),pe(4),ue()()),r&2&&(Ee(4),Me(" ",i.interests.interest," "))}})}}return n})();var XA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Work-experience",this.workRef=t.collection(this.dbPath)}getWorkExperience(){return this.workRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R2(n,e){if(n&1&&(le(0,"ul")(1,"li"),pe(2),le(3,"i"),pe(4),ue(),De(5,"br"),le(6,"b"),pe(7),ue(),De(8,"br"),pe(9," Logros: "),De(10,"br"),pe(11),De(12,"br"),ue()()),n&2){let t=e.$implicit;Ee(2),pg(" ",t.startDate," - ",t.endDate," "),Ee(2),Me(" ",t.location," "),Ee(3),Me("",t.position," "),Ee(4),Me(" ",t.accomplishment," ")}}var ex=(()=>{class n{constructor(t){this.workService=t,this.workExperience=[],console.log(this.workService),this.workService.getWorkExperience().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(XA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-work-experience"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&mi(0,R2,13,5,"ul",0),r&2&&yi("ngForOf",i.workExperience)},dependencies:[ko]})}}return n})();var tx=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=st({type:n,selectors:[["app-root"]],decls:19,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(le(0,"table",0)(1,"tr")(2,"td",1),De(3,"app-header"),ue()(),le(4,"tr")(5,"td"),De(6,"app-work-experience"),ue(),le(7,"td"),De(8,"app-skills"),ue()(),le(9,"tr")(10,"td"),De(11,"app-education"),ue(),le(12,"td"),De(13,"app-certificates"),ue()(),le(14,"tr")(15,"td"),De(16,"app-languages"),ue(),le(17,"td"),De(18,"app-insterests"),ue()()())},dependencies:[$A,qA,GA,KA,YA,JA,ex]})}}return n})();var nx={production:!1,firebase:{apiKey:"AIzaSyAiicR9-3ZEOhGAVL5jxkaxthn4nOkT3aY",authDomain:"mycv-matador1081.firebaseapp.com",projectId:"mycv-matador1081",storageBucket:"mycv-matador1081.firebasestorage.app",messagingSenderId:"113584989289",appId:"1:113584989289:web:93642746b2962f55156ef8"}};var rx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n,bootstrap:[tx]})}static{this.\u0275inj=Tt({imports:[ZC,qT,s0.initializeApp(nx.firebase)]})}}return n})();YC().bootstrapModule(rx,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
